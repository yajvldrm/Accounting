Log for Debugging - 07/23/2019
[11:21:17] - ----- Accounting Start -----
[11:21:17] - Main Connection String = Server=192.168.10.200;User Id=dbadmin;Password=P@$$w0rd;Database=erp_accounting_afsc;Port=3858;allowzerodatetime=True;convertzerodatetime=True;Connect Timeout=6000000
[11:21:17] - FS Connection String = Server=192.168.10.200;User Id=dbadmin;Password=P@$$w0rd;Database=erp_file_setup_accounting_afsc;Port=3858;allowzerodatetime=True;convertzerodatetime=True;Connect Timeout=6000000
[11:21:31] - ----- Accounting Close -----
[11:21:38] - Unable to connect to any of the specified MySQL hosts.
[11:49:27] - ----- Accounting Start -----
[11:49:27] - Main Connection String = Server=192.168.10.200;User Id=dbadmin;Password=P@$$w0rd;Database=erp_accounting_afsc;Port=3858;allowzerodatetime=True;convertzerodatetime=True;Connect Timeout=6000000
[11:49:27] - FS Connection String = Server=192.168.10.200;User Id=dbadmin;Password=P@$$w0rd;Database=erp_file_setup_accounting_afsc;Port=3858;allowzerodatetime=True;convertzerodatetime=True;Connect Timeout=6000000
[11:49:35] - ----- Accounting Close -----
[11:49:41] - ----- Accounting Start -----
[11:49:42] - Main Connection String = Server=192.168.10.200;User Id=dbadmin;Password=P@$$w0rd;Database=erp_accounting_afsc;Port=3858;allowzerodatetime=True;convertzerodatetime=True;Connect Timeout=6000000
[11:49:42] - FS Connection String = Server=192.168.10.200;User Id=dbadmin;Password=P@$$w0rd;Database=erp_file_setup_accounting_afsc;Port=3858;allowzerodatetime=True;convertzerodatetime=True;Connect Timeout=6000000
[11:49:46] - ----- Accounting Close -----
[11:49:48] - Unable to connect to any of the specified MySQL hosts.
[11:50:03] - Unable to connect to any of the specified MySQL hosts.
[14:29:53] - ----- Accounting Start -----
[14:29:53] - Main Connection String = Server=192.168.10.200;User Id=dbadmin;Password=P@$$w0rd;Database=erp_accounting_afsc;Port=3858;allowzerodatetime=True;convertzerodatetime=True;Connect Timeout=6000000
[14:29:53] - FS Connection String = Server=192.168.10.200;User Id=dbadmin;Password=P@$$w0rd;Database=erp_file_setup_accounting_afsc;Port=3858;allowzerodatetime=True;convertzerodatetime=True;Connect Timeout=6000000
[14:30:16] - Unable to connect to any of the specified MySQL hosts.
[14:30:59] - Unable to connect to any of the specified MySQL hosts.
[14:31:03] - ----- Accounting Start -----
[14:31:03] - Main Connection String = Server=192.168.1.4;User Id=root;Password=snoitulos;Database=erp_accounting_ngg;Port=3306;allowzerodatetime=True;convertzerodatetime=True;Connect Timeout=6000000
[14:31:03] - FS Connection String = Server=192.168.1.4;User Id=root;Password=snoitulos;Database=erp_fs_ngg;Port=3306;allowzerodatetime=True;convertzerodatetime=True;Connect Timeout=6000000
[14:31:06] - Login Button Click
[14:31:06] - SELECT user_id FROM erp_fs_ngg.sys_erp_user WHERE username = 'alas' AND password = 'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580' 
[14:31:06] - INSERT INTO sys_log(log_date,user_id,log_code_3,machine_name,machine_user) VALUES('2019-07-23 14:31:06',1,'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580','DESKTOP-PL80BO2','Raymond T. Villegas');
[14:31:06] - SELECT log_id AS id FROM sys_log WHERE log_date = '2019-07-23 14:31:06' AND user_id = 1 AND log_code_3 = 'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580' AND machine_name = 'DESKTOP-PL80BO2' AND machine_user = 'Raymond T. Villegas';
[14:31:06] - SELECT a.stage_id,c.module_code,b.user_id FROM sys_erp_approval a LEFT JOIN sys_erp_approval_user b on b.approval_id = a.approval_id LEFT JOIN sys_erp_modules c ON c.module_id = a.module_id 
[14:31:07] - SELECT a.module_code,b.m_view,b.m_add,b.m_edit,b.m_delete,b.m_cancel,b.m_verify,b.m_approve,b.m_print FROM erp_fs_ngg.sys_erp_modules a LEFT JOIN erp_fs_ngg.sys_erp_profile_det b ON b.module_id = a.module_id LEFT JOIN erp_fs_ngg.sys_erp_user_profile c ON c.profile_id = b.profile_id AND c.system_id = a.system_id LEFT JOIN erp_fs_ngg.sys_erp_user d ON d.user_id = c.user_id WHERE a.system_id = 2 AND d.username = 'alas' 
[14:31:07] - SELECT module_code FROM erp_fs_ngg.sys_erp_modules WHERE system_id = 2 
[14:31:07] - select * from lib_erp_journal
[14:31:07] - SELECT a.*,b.company_code,b.company_name,b.address1,b.address2,b.tin,b.rdo_code ,a.currency_id,c.currency_code,c.currency_name,c.symbol  FROM sys_default a  LEFT JOIN erp_fs_ngg.lib_erp_company b ON b.company_id = a.company_id LEFT JOIN erp_fs_ngg.lib_erp_currency c ON c.currency_id = a.currency_id 
[14:31:07] - select a.*,b.module_code from sys_default_det a inner join erp_fs_ngg.sys_erp_modules b on a.module_id = b.module_id
[14:31:08] - SELECT a.book_id,a.book_code,a.book_name FROM lib_erp_book a WHERE a.company_id = '1'
[14:31:08] - SELECT 1 AS id,'January' AS name UNION SELECT 2,'February' UNION SELECT 3,'March' UNION SELECT 4,'April' UNION SELECT 5,'May' UNION SELECT 6,'June' UNION SELECT 7,'July' UNION SELECT 8,'August' UNION SELECT 9,'September' UNION SELECT 10,'October' UNION SELECT 11,'November' UNION SELECT 12,'December' 
[14:31:08] - End of Initialization
[14:31:13] - SELECT b.book_id,b.book_code,b.book_name FROM sys_acc_journal_book a LEFT JOIN lib_erp_book b ON b.book_id = a.book_id WHERE b.book_code IS NOT NULL AND a.journal_id = '3' AND b.company_id = '1' ORDER BY b.book_code 
[14:31:14] - SELECT COUNT(a.approval_id) AS numRow FROM sys_erp_approval a LEFT JOIN sys_erp_modules b ON b.module_id = a.module_id WHERE b.module_code = 'ACC00301'
[14:31:14] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_ap_id,'') AS trans_ap_id,IFNULL(b.si_no,'') AS si_no,IFNULL(b.rr_no,'') AS rr_no,IFNULL(b.po_no,'') AS po_no ,IFNULL(b.terms_id,'') AS terms_id,IFNULL(b.nodays,0) AS nodays,e.terms_name,b.due_date ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_ap b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN erp_fs_ngg.lib_erp_terms e ON b.terms_id = e.terms_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '3' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2019-07' ORDER BY a.trans_no ASC 
[14:31:15] - SELECT a.trans_sub_contract_id,a.trans_id,a.sub_contract_det_id,a.billed_amount,a.billed_amount_based
            ,a.currency_id,f.currency_code,f.currency_name,a.exchange_rate,a.based_rate
            ,b.subconid,e.subconcode,e.subconname,b.cons1,b.cons2,b.amount,b.amount_based,b.po_no
            ,b.trans_date
            ,sc_offset.amount_collected,sc_offset.amount_collected_based
            FROM trans_header_sub_contract a
            LEFT JOIN trans_sub_contract_det b ON b.sub_contract_det_id = a.sub_contract_det_id
            LEFT JOIN trans_sub_contract c ON c.sub_contract_id = b.sub_contract_id
            LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = c.project_id
            LEFT JOIN erp_fs_ngg.lib_subcon e ON e.subConid = b.subconid
            LEFT JOIN erp_fs_ngg.lib_erp_currency f ON f.currency_id = a.currency_id
            LEFT JOIN (
	            SELECT a.trans_sub_contract_id
	            ,SUM(a.amount_collected) AS amount_collected
	            ,SUM(a.amount_collected_based) AS amount_collected_based
	            FROM trans_sub_contract_offset a
	            GROUP BY a.trans_sub_contract_id
            ) sc_offset ON sc_offset.trans_sub_contract_id = a.trans_sub_contract_id
            WHERE a.trans_id='10932'
[14:31:15] - 
                    select a.trans_detailed_particular_id, a.trans_id, a.po_no,a.rr_no,a.dr_no,a.si_no,a.due_date,ROUND(a.trans_header_detailed_amount, 2) as trans_header_detailed_amount 
                    from trans_header_detailed_particular a
                    WHERE trans_id = '10932'
[14:31:15] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 10932
[14:31:15] - SELECT * FROM select_ewt WHERE trans_id = 10932
[14:31:16] - SELECT * FROM select_final_tax WHERE trans_id = 10932
[14:31:16] - SELECT * FROM select_input_vat WHERE trans_id = 10932
[14:31:16] - SELECT * FROM select_output_vat WHERE trans_id = 10932
[14:31:16] - SELECT * FROM select_prepaid WHERE trans_id = 10932
[14:31:16] - SELECT * FROM select_fixed_asset WHERE trans_id = 10932
[14:31:16] - SELECT * FROM select_checks WHERE trans_id = 10932
[14:31:16] - SELECT * FROM trans_header_particular WHERE trans_id = 10932
[14:31:17] - select a.currency_id,a.currency_code,a.currency_name ,b.exchange_rate,b.based_rate from lib_erp_currency a inner join (select a.currency_id,a.exchange_rate,a.based_rate from lib_erp_currency_rate a inner join (SELECT currency_id,max(effectivitydate) as effectivitydate FROM lib_erp_currency_rate where DATE_FORMAT(effectivitydate,'%Y-%m') = '2019-07' group by currency_id) b on a.currency_id = b.currency_id and a.effectivitydate = b.effectivitydate) b on a.currency_id = b.currency_id
[14:31:17] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 3
[14:31:20] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,2,1),a.general_code ASC 
[14:31:21] - select a.currency_id,a.currency_code,a.currency_name ,b.exchange_rate,b.based_rate from lib_erp_currency a inner join (select a.currency_id,a.exchange_rate,a.based_rate from lib_erp_currency_rate a inner join (SELECT currency_id,max(effectivitydate) as effectivitydate FROM lib_erp_currency_rate where left(effectivitydate,7) <= '2019-07' group by currency_id) b on a.currency_id = b.currency_id and a.effectivitydate = b.effectivitydate) b on a.currency_id = b.currency_id
[14:31:25] - SELECT * FROM lib_erp_chart
[14:31:31] - SELECT * FROM lib_erp_project
[14:31:32] - SELECT * FROM lib_erp_department
[14:31:35] - SELECT * FROM lib_erp_terms WHERE terms_type = 2 or terms_type = 3
[14:31:43] - SELECT * FROM lib_erp_chart
[14:31:45] - SELECT * FROM lib_erp_chart
[14:31:46] - SELECT * FROM lib_erp_chart
[14:31:46] - SELECT * FROM lib_erp_chart
[14:31:47] - SELECT * FROM lib_erp_chart
[14:31:47] - SELECT * FROM lib_erp_chart
[14:31:48] - SELECT * FROM lib_erp_chart
[14:31:48] - SELECT * FROM lib_erp_chart
[14:31:48] - SELECT * FROM lib_erp_chart
[14:31:49] - SELECT * FROM lib_erp_chart
[14:31:49] - SELECT * FROM lib_erp_chart
[14:31:49] - SELECT * FROM lib_erp_chart
[14:31:50] - SELECT * FROM lib_erp_chart
[14:31:50] - SELECT * FROM lib_erp_chart
[14:32:00] - ----- Accounting Close -----
[14:50:42] - ----- Accounting Start -----
[14:50:42] - Main Connection String = Server=192.168.1.4;User Id=root;Password=snoitulos;Database=erp_accounting_ngg;Port=3306;allowzerodatetime=True;convertzerodatetime=True;Connect Timeout=6000000
[14:50:42] - FS Connection String = Server=192.168.1.4;User Id=root;Password=snoitulos;Database=erp_fs_ngg;Port=3306;allowzerodatetime=True;convertzerodatetime=True;Connect Timeout=6000000
[14:53:05] - Login Button Click
[14:53:05] - SELECT user_id FROM erp_fs_ngg.sys_erp_user WHERE username = 'alas' AND password = 'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580' 
[14:53:05] - INSERT INTO sys_log(log_date,user_id,log_code_3,machine_name,machine_user) VALUES('2019-07-23 14:53:05',1,'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580','DESKTOP-PL80BO2','Raymond T. Villegas');
[14:53:05] - SELECT log_id AS id FROM sys_log WHERE log_date = '2019-07-23 14:53:05' AND user_id = 1 AND log_code_3 = 'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580' AND machine_name = 'DESKTOP-PL80BO2' AND machine_user = 'Raymond T. Villegas';
[14:53:05] - SELECT a.stage_id,c.module_code,b.user_id FROM sys_erp_approval a LEFT JOIN sys_erp_approval_user b on b.approval_id = a.approval_id LEFT JOIN sys_erp_modules c ON c.module_id = a.module_id 
[14:53:05] - SELECT a.module_code,b.m_view,b.m_add,b.m_edit,b.m_delete,b.m_cancel,b.m_verify,b.m_approve,b.m_print FROM erp_fs_ngg.sys_erp_modules a LEFT JOIN erp_fs_ngg.sys_erp_profile_det b ON b.module_id = a.module_id LEFT JOIN erp_fs_ngg.sys_erp_user_profile c ON c.profile_id = b.profile_id AND c.system_id = a.system_id LEFT JOIN erp_fs_ngg.sys_erp_user d ON d.user_id = c.user_id WHERE a.system_id = 2 AND d.username = 'alas' 
[14:53:06] - SELECT module_code FROM erp_fs_ngg.sys_erp_modules WHERE system_id = 2 
[14:53:06] - select * from lib_erp_journal
[14:53:06] - SELECT a.*,b.company_code,b.company_name,b.address1,b.address2,b.tin,b.rdo_code ,a.currency_id,c.currency_code,c.currency_name,c.symbol  FROM sys_default a  LEFT JOIN erp_fs_ngg.lib_erp_company b ON b.company_id = a.company_id LEFT JOIN erp_fs_ngg.lib_erp_currency c ON c.currency_id = a.currency_id 
[14:53:06] - select a.*,b.module_code from sys_default_det a inner join erp_fs_ngg.sys_erp_modules b on a.module_id = b.module_id
[14:53:07] - SELECT a.book_id,a.book_code,a.book_name FROM lib_erp_book a WHERE a.company_id = '1'
[14:53:07] - SELECT 1 AS id,'January' AS name UNION SELECT 2,'February' UNION SELECT 3,'March' UNION SELECT 4,'April' UNION SELECT 5,'May' UNION SELECT 6,'June' UNION SELECT 7,'July' UNION SELECT 8,'August' UNION SELECT 9,'September' UNION SELECT 10,'October' UNION SELECT 11,'November' UNION SELECT 12,'December' 
[14:53:07] - End of Initialization
[14:53:32] - SELECT b.book_id,b.book_code,b.book_name FROM sys_acc_journal_book a LEFT JOIN lib_erp_book b ON b.book_id = a.book_id WHERE b.book_code IS NOT NULL AND a.journal_id = '3' AND b.company_id = '1' ORDER BY b.book_code 
[14:53:47] - SELECT COUNT(a.approval_id) AS numRow FROM sys_erp_approval a LEFT JOIN sys_erp_modules b ON b.module_id = a.module_id WHERE b.module_code = 'ACC00301'
[14:53:47] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_ap_id,'') AS trans_ap_id,IFNULL(b.si_no,'') AS si_no,IFNULL(b.rr_no,'') AS rr_no,IFNULL(b.po_no,'') AS po_no ,IFNULL(b.terms_id,'') AS terms_id,IFNULL(b.nodays,0) AS nodays,e.terms_name,b.due_date ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_ap b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN erp_fs_ngg.lib_erp_terms e ON b.terms_id = e.terms_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '3' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2019-07' ORDER BY a.trans_no ASC 
[14:53:48] - SELECT a.trans_sub_contract_id,a.trans_id,a.sub_contract_det_id,a.billed_amount,a.billed_amount_based
            ,a.currency_id,f.currency_code,f.currency_name,a.exchange_rate,a.based_rate
            ,b.subconid,e.subconcode,e.subconname,b.cons1,b.cons2,b.amount,b.amount_based,b.po_no
            ,b.trans_date
            ,sc_offset.amount_collected,sc_offset.amount_collected_based
            FROM trans_header_sub_contract a
            LEFT JOIN trans_sub_contract_det b ON b.sub_contract_det_id = a.sub_contract_det_id
            LEFT JOIN trans_sub_contract c ON c.sub_contract_id = b.sub_contract_id
            LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = c.project_id
            LEFT JOIN erp_fs_ngg.lib_subcon e ON e.subConid = b.subconid
            LEFT JOIN erp_fs_ngg.lib_erp_currency f ON f.currency_id = a.currency_id
            LEFT JOIN (
	            SELECT a.trans_sub_contract_id
	            ,SUM(a.amount_collected) AS amount_collected
	            ,SUM(a.amount_collected_based) AS amount_collected_based
	            FROM trans_sub_contract_offset a
	            GROUP BY a.trans_sub_contract_id
            ) sc_offset ON sc_offset.trans_sub_contract_id = a.trans_sub_contract_id
            WHERE a.trans_id='10932'
[14:53:48] - 
                    select a.trans_detailed_particular_id, a.trans_id, a.po_no,a.rr_no,a.dr_no,a.si_no,a.due_date,ROUND(a.trans_header_detailed_amount, 2) as trans_header_detailed_amount 
                    from trans_header_detailed_particular a
                    WHERE trans_id = '10932'
[14:53:48] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 10932
[14:53:48] - SELECT * FROM select_ewt WHERE trans_id = 10932
[14:53:48] - SELECT * FROM select_final_tax WHERE trans_id = 10932
[14:53:48] - SELECT * FROM select_input_vat WHERE trans_id = 10932
[14:53:49] - SELECT * FROM select_output_vat WHERE trans_id = 10932
[14:53:49] - SELECT * FROM select_prepaid WHERE trans_id = 10932
[14:53:49] - SELECT * FROM select_fixed_asset WHERE trans_id = 10932
[14:53:49] - SELECT * FROM select_checks WHERE trans_id = 10932
[14:53:49] - SELECT * FROM trans_header_particular WHERE trans_id = 10932
[14:53:50] - select a.currency_id,a.currency_code,a.currency_name ,b.exchange_rate,b.based_rate from lib_erp_currency a inner join (select a.currency_id,a.exchange_rate,a.based_rate from lib_erp_currency_rate a inner join (SELECT currency_id,max(effectivitydate) as effectivitydate FROM lib_erp_currency_rate where DATE_FORMAT(effectivitydate,'%Y-%m') = '2019-07' group by currency_id) b on a.currency_id = b.currency_id and a.effectivitydate = b.effectivitydate) b on a.currency_id = b.currency_id
[14:53:50] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 3
[14:53:53] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,2,1),a.general_code ASC 
[14:53:54] - select a.currency_id,a.currency_code,a.currency_name ,b.exchange_rate,b.based_rate from lib_erp_currency a inner join (select a.currency_id,a.exchange_rate,a.based_rate from lib_erp_currency_rate a inner join (SELECT currency_id,max(effectivitydate) as effectivitydate FROM lib_erp_currency_rate where left(effectivitydate,7) <= '2019-07' group by currency_id) b on a.currency_id = b.currency_id and a.effectivitydate = b.effectivitydate) b on a.currency_id = b.currency_id
[14:54:00] - ----- Accounting Close -----
[15:07:57] - ----- Accounting Start -----
[15:07:57] - Main Connection String = Server=192.168.1.4;User Id=root;Password=snoitulos;Database=erp_accounting_ngg;Port=3306;allowzerodatetime=True;convertzerodatetime=True;Connect Timeout=6000000
[15:07:57] - FS Connection String = Server=192.168.1.4;User Id=root;Password=snoitulos;Database=erp_fs_ngg;Port=3306;allowzerodatetime=True;convertzerodatetime=True;Connect Timeout=6000000
[15:09:58] - Login Button Click
[15:09:58] - SELECT user_id FROM erp_fs_ngg.sys_erp_user WHERE username = 'alas' AND password = 'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580' 
[15:09:58] - INSERT INTO sys_log(log_date,user_id,log_code_3,machine_name,machine_user) VALUES('2019-07-23 15:09:58',1,'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580','DESKTOP-PL80BO2','Raymond T. Villegas');
[15:09:58] - SELECT log_id AS id FROM sys_log WHERE log_date = '2019-07-23 15:09:58' AND user_id = 1 AND log_code_3 = 'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580' AND machine_name = 'DESKTOP-PL80BO2' AND machine_user = 'Raymond T. Villegas';
[15:09:58] - SELECT a.stage_id,c.module_code,b.user_id FROM sys_erp_approval a LEFT JOIN sys_erp_approval_user b on b.approval_id = a.approval_id LEFT JOIN sys_erp_modules c ON c.module_id = a.module_id 
[15:09:58] - SELECT a.module_code,b.m_view,b.m_add,b.m_edit,b.m_delete,b.m_cancel,b.m_verify,b.m_approve,b.m_print FROM erp_fs_ngg.sys_erp_modules a LEFT JOIN erp_fs_ngg.sys_erp_profile_det b ON b.module_id = a.module_id LEFT JOIN erp_fs_ngg.sys_erp_user_profile c ON c.profile_id = b.profile_id AND c.system_id = a.system_id LEFT JOIN erp_fs_ngg.sys_erp_user d ON d.user_id = c.user_id WHERE a.system_id = 2 AND d.username = 'alas' 
[15:09:58] - SELECT module_code FROM erp_fs_ngg.sys_erp_modules WHERE system_id = 2 
[15:09:59] - select * from lib_erp_journal
[15:09:59] - SELECT a.*,b.company_code,b.company_name,b.address1,b.address2,b.tin,b.rdo_code ,a.currency_id,c.currency_code,c.currency_name,c.symbol  FROM sys_default a  LEFT JOIN erp_fs_ngg.lib_erp_company b ON b.company_id = a.company_id LEFT JOIN erp_fs_ngg.lib_erp_currency c ON c.currency_id = a.currency_id 
[15:09:59] - select a.*,b.module_code from sys_default_det a inner join erp_fs_ngg.sys_erp_modules b on a.module_id = b.module_id
[15:10:00] - SELECT a.book_id,a.book_code,a.book_name FROM lib_erp_book a WHERE a.company_id = '1'
[15:10:00] - SELECT 1 AS id,'January' AS name UNION SELECT 2,'February' UNION SELECT 3,'March' UNION SELECT 4,'April' UNION SELECT 5,'May' UNION SELECT 6,'June' UNION SELECT 7,'July' UNION SELECT 8,'August' UNION SELECT 9,'September' UNION SELECT 10,'October' UNION SELECT 11,'November' UNION SELECT 12,'December' 
[15:10:00] - End of Initialization
[15:10:04] - SELECT b.book_id,b.book_code,b.book_name FROM sys_acc_journal_book a LEFT JOIN lib_erp_book b ON b.book_id = a.book_id WHERE b.book_code IS NOT NULL AND a.journal_id = '3' AND b.company_id = '1' ORDER BY b.book_code 
[15:10:06] - SELECT COUNT(a.approval_id) AS numRow FROM sys_erp_approval a LEFT JOIN sys_erp_modules b ON b.module_id = a.module_id WHERE b.module_code = 'ACC00301'
[15:10:06] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_ap_id,'') AS trans_ap_id,IFNULL(b.si_no,'') AS si_no,IFNULL(b.rr_no,'') AS rr_no,IFNULL(b.po_no,'') AS po_no ,IFNULL(b.terms_id,'') AS terms_id,IFNULL(b.nodays,0) AS nodays,e.terms_name,b.due_date ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_ap b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN erp_fs_ngg.lib_erp_terms e ON b.terms_id = e.terms_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '3' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2019-07' ORDER BY a.trans_no ASC 
[15:10:06] - SELECT a.trans_sub_contract_id,a.trans_id,a.sub_contract_det_id,a.billed_amount,a.billed_amount_based
            ,a.currency_id,f.currency_code,f.currency_name,a.exchange_rate,a.based_rate
            ,b.subconid,e.subconcode,e.subconname,b.cons1,b.cons2,b.amount,b.amount_based,b.po_no
            ,b.trans_date
            ,sc_offset.amount_collected,sc_offset.amount_collected_based
            FROM trans_header_sub_contract a
            LEFT JOIN trans_sub_contract_det b ON b.sub_contract_det_id = a.sub_contract_det_id
            LEFT JOIN trans_sub_contract c ON c.sub_contract_id = b.sub_contract_id
            LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = c.project_id
            LEFT JOIN erp_fs_ngg.lib_subcon e ON e.subConid = b.subconid
            LEFT JOIN erp_fs_ngg.lib_erp_currency f ON f.currency_id = a.currency_id
            LEFT JOIN (
	            SELECT a.trans_sub_contract_id
	            ,SUM(a.amount_collected) AS amount_collected
	            ,SUM(a.amount_collected_based) AS amount_collected_based
	            FROM trans_sub_contract_offset a
	            GROUP BY a.trans_sub_contract_id
            ) sc_offset ON sc_offset.trans_sub_contract_id = a.trans_sub_contract_id
            WHERE a.trans_id='10932'
[15:10:06] - 
                    select a.trans_detailed_particular_id, a.trans_id, a.po_no,a.rr_no,a.dr_no,a.si_no,a.due_date,ROUND(a.trans_header_detailed_amount, 2) as trans_header_detailed_amount 
                    from trans_header_detailed_particular a
                    WHERE trans_id = '10932'
[15:10:06] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 10932
[15:10:07] - SELECT * FROM select_ewt WHERE trans_id = 10932
[15:10:07] - SELECT * FROM select_final_tax WHERE trans_id = 10932
[15:10:07] - SELECT * FROM select_input_vat WHERE trans_id = 10932
[15:10:07] - SELECT * FROM select_output_vat WHERE trans_id = 10932
[15:10:07] - SELECT * FROM select_prepaid WHERE trans_id = 10932
[15:10:07] - SELECT * FROM select_fixed_asset WHERE trans_id = 10932
[15:10:07] - SELECT * FROM select_checks WHERE trans_id = 10932
[15:10:07] - SELECT * FROM trans_header_particular WHERE trans_id = 10932
[15:10:17] - select a.currency_id,a.currency_code,a.currency_name ,b.exchange_rate,b.based_rate from lib_erp_currency a inner join (select a.currency_id,a.exchange_rate,a.based_rate from lib_erp_currency_rate a inner join (SELECT currency_id,max(effectivitydate) as effectivitydate FROM lib_erp_currency_rate where DATE_FORMAT(effectivitydate,'%Y-%m') = '2019-07' group by currency_id) b on a.currency_id = b.currency_id and a.effectivitydate = b.effectivitydate) b on a.currency_id = b.currency_id
[15:10:18] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 3
[15:10:20] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,2,1),a.general_code ASC 
[15:10:20] - select a.currency_id,a.currency_code,a.currency_name ,b.exchange_rate,b.based_rate from lib_erp_currency a inner join (select a.currency_id,a.exchange_rate,a.based_rate from lib_erp_currency_rate a inner join (SELECT currency_id,max(effectivitydate) as effectivitydate FROM lib_erp_currency_rate where left(effectivitydate,7) <= '2019-07' group by currency_id) b on a.currency_id = b.currency_id and a.effectivitydate = b.effectivitydate) b on a.currency_id = b.currency_id
[15:10:26] - SELECT * FROM lib_erp_project
[15:10:28] - SELECT * FROM lib_erp_project
[15:10:31] - ----- Accounting Close -----
[15:12:09] - ----- Accounting Start -----
[15:12:09] - Main Connection String = Server=192.168.1.4;User Id=root;Password=snoitulos;Database=erp_accounting_ngg;Port=3306;allowzerodatetime=True;convertzerodatetime=True;Connect Timeout=6000000
[15:12:09] - FS Connection String = Server=192.168.1.4;User Id=root;Password=snoitulos;Database=erp_fs_ngg;Port=3306;allowzerodatetime=True;convertzerodatetime=True;Connect Timeout=6000000
[15:12:44] - Login Button Click
[15:12:44] - SELECT user_id FROM erp_fs_ngg.sys_erp_user WHERE username = 'alas' AND password = 'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580' 
[15:12:44] - INSERT INTO sys_log(log_date,user_id,log_code_3,machine_name,machine_user) VALUES('2019-07-23 15:12:44',1,'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580','DESKTOP-PL80BO2','Raymond T. Villegas');
[15:12:45] - SELECT log_id AS id FROM sys_log WHERE log_date = '2019-07-23 15:12:44' AND user_id = 1 AND log_code_3 = 'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580' AND machine_name = 'DESKTOP-PL80BO2' AND machine_user = 'Raymond T. Villegas';
[15:12:45] - SELECT a.stage_id,c.module_code,b.user_id FROM sys_erp_approval a LEFT JOIN sys_erp_approval_user b on b.approval_id = a.approval_id LEFT JOIN sys_erp_modules c ON c.module_id = a.module_id 
[15:12:45] - SELECT a.module_code,b.m_view,b.m_add,b.m_edit,b.m_delete,b.m_cancel,b.m_verify,b.m_approve,b.m_print FROM erp_fs_ngg.sys_erp_modules a LEFT JOIN erp_fs_ngg.sys_erp_profile_det b ON b.module_id = a.module_id LEFT JOIN erp_fs_ngg.sys_erp_user_profile c ON c.profile_id = b.profile_id AND c.system_id = a.system_id LEFT JOIN erp_fs_ngg.sys_erp_user d ON d.user_id = c.user_id WHERE a.system_id = 2 AND d.username = 'alas' 
[15:12:45] - SELECT module_code FROM erp_fs_ngg.sys_erp_modules WHERE system_id = 2 
[15:12:45] - select * from lib_erp_journal
[15:12:46] - SELECT a.*,b.company_code,b.company_name,b.address1,b.address2,b.tin,b.rdo_code ,a.currency_id,c.currency_code,c.currency_name,c.symbol  FROM sys_default a  LEFT JOIN erp_fs_ngg.lib_erp_company b ON b.company_id = a.company_id LEFT JOIN erp_fs_ngg.lib_erp_currency c ON c.currency_id = a.currency_id 
[15:12:46] - select a.*,b.module_code from sys_default_det a inner join erp_fs_ngg.sys_erp_modules b on a.module_id = b.module_id
[15:12:47] - SELECT a.book_id,a.book_code,a.book_name FROM lib_erp_book a WHERE a.company_id = '1'
[15:12:47] - SELECT 1 AS id,'January' AS name UNION SELECT 2,'February' UNION SELECT 3,'March' UNION SELECT 4,'April' UNION SELECT 5,'May' UNION SELECT 6,'June' UNION SELECT 7,'July' UNION SELECT 8,'August' UNION SELECT 9,'September' UNION SELECT 10,'October' UNION SELECT 11,'November' UNION SELECT 12,'December' 
[15:12:47] - End of Initialization
[15:12:56] - SELECT b.book_id,b.book_code,b.book_name FROM sys_acc_journal_book a LEFT JOIN lib_erp_book b ON b.book_id = a.book_id WHERE b.book_code IS NOT NULL AND a.journal_id = '3' AND b.company_id = '1' ORDER BY b.book_code 
[15:12:58] - SELECT COUNT(a.approval_id) AS numRow FROM sys_erp_approval a LEFT JOIN sys_erp_modules b ON b.module_id = a.module_id WHERE b.module_code = 'ACC00301'
[15:12:58] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_ap_id,'') AS trans_ap_id,IFNULL(b.si_no,'') AS si_no,IFNULL(b.rr_no,'') AS rr_no,IFNULL(b.po_no,'') AS po_no ,IFNULL(b.terms_id,'') AS terms_id,IFNULL(b.nodays,0) AS nodays,e.terms_name,b.due_date ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_ap b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN erp_fs_ngg.lib_erp_terms e ON b.terms_id = e.terms_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '3' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2019-07' ORDER BY a.trans_no ASC 
[15:12:58] - SELECT a.trans_sub_contract_id,a.trans_id,a.sub_contract_det_id,a.billed_amount,a.billed_amount_based
            ,a.currency_id,f.currency_code,f.currency_name,a.exchange_rate,a.based_rate
            ,b.subconid,e.subconcode,e.subconname,b.cons1,b.cons2,b.amount,b.amount_based,b.po_no
            ,b.trans_date
            ,sc_offset.amount_collected,sc_offset.amount_collected_based
            FROM trans_header_sub_contract a
            LEFT JOIN trans_sub_contract_det b ON b.sub_contract_det_id = a.sub_contract_det_id
            LEFT JOIN trans_sub_contract c ON c.sub_contract_id = b.sub_contract_id
            LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = c.project_id
            LEFT JOIN erp_fs_ngg.lib_subcon e ON e.subConid = b.subconid
            LEFT JOIN erp_fs_ngg.lib_erp_currency f ON f.currency_id = a.currency_id
            LEFT JOIN (
	            SELECT a.trans_sub_contract_id
	            ,SUM(a.amount_collected) AS amount_collected
	            ,SUM(a.amount_collected_based) AS amount_collected_based
	            FROM trans_sub_contract_offset a
	            GROUP BY a.trans_sub_contract_id
            ) sc_offset ON sc_offset.trans_sub_contract_id = a.trans_sub_contract_id
            WHERE a.trans_id='10932'
[15:12:58] - 
                    select a.trans_detailed_particular_id, a.trans_id, a.po_no,a.rr_no,a.dr_no,a.si_no,a.due_date,ROUND(a.trans_header_detailed_amount, 2) as trans_header_detailed_amount 
                    from trans_header_detailed_particular a
                    WHERE trans_id = '10932'
[15:12:58] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 10932
[15:12:59] - SELECT * FROM select_ewt WHERE trans_id = 10932
[15:12:59] - SELECT * FROM select_final_tax WHERE trans_id = 10932
[15:12:59] - SELECT * FROM select_input_vat WHERE trans_id = 10932
[15:12:59] - SELECT * FROM select_output_vat WHERE trans_id = 10932
[15:12:59] - SELECT * FROM select_prepaid WHERE trans_id = 10932
[15:12:59] - SELECT * FROM select_fixed_asset WHERE trans_id = 10932
[15:13:00] - SELECT * FROM select_checks WHERE trans_id = 10932
[15:13:00] - SELECT * FROM trans_header_particular WHERE trans_id = 10932
[15:13:10] - ----- Accounting Close -----
[15:13:37] - ----- Accounting Start -----
[15:13:37] - Main Connection String = Server=192.168.1.4;User Id=root;Password=snoitulos;Database=erp_accounting_ngg;Port=3306;allowzerodatetime=True;convertzerodatetime=True;Connect Timeout=6000000
[15:13:37] - FS Connection String = Server=192.168.1.4;User Id=root;Password=snoitulos;Database=erp_fs_ngg;Port=3306;allowzerodatetime=True;convertzerodatetime=True;Connect Timeout=6000000
[15:13:45] - Login Button Click
[15:13:45] - SELECT user_id FROM erp_fs_ngg.sys_erp_user WHERE username = 'alas' AND password = 'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580' 
[15:13:45] - INSERT INTO sys_log(log_date,user_id,log_code_3,machine_name,machine_user) VALUES('2019-07-23 15:13:45',1,'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580','DESKTOP-PL80BO2','Raymond T. Villegas');
[15:13:46] - SELECT log_id AS id FROM sys_log WHERE log_date = '2019-07-23 15:13:45' AND user_id = 1 AND log_code_3 = 'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580' AND machine_name = 'DESKTOP-PL80BO2' AND machine_user = 'Raymond T. Villegas';
[15:13:46] - SELECT a.stage_id,c.module_code,b.user_id FROM sys_erp_approval a LEFT JOIN sys_erp_approval_user b on b.approval_id = a.approval_id LEFT JOIN sys_erp_modules c ON c.module_id = a.module_id 
[15:13:46] - SELECT a.module_code,b.m_view,b.m_add,b.m_edit,b.m_delete,b.m_cancel,b.m_verify,b.m_approve,b.m_print FROM erp_fs_ngg.sys_erp_modules a LEFT JOIN erp_fs_ngg.sys_erp_profile_det b ON b.module_id = a.module_id LEFT JOIN erp_fs_ngg.sys_erp_user_profile c ON c.profile_id = b.profile_id AND c.system_id = a.system_id LEFT JOIN erp_fs_ngg.sys_erp_user d ON d.user_id = c.user_id WHERE a.system_id = 2 AND d.username = 'alas' 
[15:13:46] - SELECT module_code FROM erp_fs_ngg.sys_erp_modules WHERE system_id = 2 
[15:13:46] - select * from lib_erp_journal
[15:13:46] - SELECT a.*,b.company_code,b.company_name,b.address1,b.address2,b.tin,b.rdo_code ,a.currency_id,c.currency_code,c.currency_name,c.symbol  FROM sys_default a  LEFT JOIN erp_fs_ngg.lib_erp_company b ON b.company_id = a.company_id LEFT JOIN erp_fs_ngg.lib_erp_currency c ON c.currency_id = a.currency_id 
[15:13:46] - select a.*,b.module_code from sys_default_det a inner join erp_fs_ngg.sys_erp_modules b on a.module_id = b.module_id
[15:13:48] - SELECT a.book_id,a.book_code,a.book_name FROM lib_erp_book a WHERE a.company_id = '1'
[15:13:48] - SELECT 1 AS id,'January' AS name UNION SELECT 2,'February' UNION SELECT 3,'March' UNION SELECT 4,'April' UNION SELECT 5,'May' UNION SELECT 6,'June' UNION SELECT 7,'July' UNION SELECT 8,'August' UNION SELECT 9,'September' UNION SELECT 10,'October' UNION SELECT 11,'November' UNION SELECT 12,'December' 
[15:13:48] - End of Initialization
[15:13:53] - SELECT b.book_id,b.book_code,b.book_name FROM sys_acc_journal_book a LEFT JOIN lib_erp_book b ON b.book_id = a.book_id WHERE b.book_code IS NOT NULL AND a.journal_id = '3' AND b.company_id = '1' ORDER BY b.book_code 
[15:13:55] - SELECT COUNT(a.approval_id) AS numRow FROM sys_erp_approval a LEFT JOIN sys_erp_modules b ON b.module_id = a.module_id WHERE b.module_code = 'ACC00301'
[15:13:55] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_ap_id,'') AS trans_ap_id,IFNULL(b.si_no,'') AS si_no,IFNULL(b.rr_no,'') AS rr_no,IFNULL(b.po_no,'') AS po_no ,IFNULL(b.terms_id,'') AS terms_id,IFNULL(b.nodays,0) AS nodays,e.terms_name,b.due_date ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_ap b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN erp_fs_ngg.lib_erp_terms e ON b.terms_id = e.terms_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '3' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2019-07' ORDER BY a.trans_no ASC 
[15:13:55] - SELECT a.trans_sub_contract_id,a.trans_id,a.sub_contract_det_id,a.billed_amount,a.billed_amount_based
            ,a.currency_id,f.currency_code,f.currency_name,a.exchange_rate,a.based_rate
            ,b.subconid,e.subconcode,e.subconname,b.cons1,b.cons2,b.amount,b.amount_based,b.po_no
            ,b.trans_date
            ,sc_offset.amount_collected,sc_offset.amount_collected_based
            FROM trans_header_sub_contract a
            LEFT JOIN trans_sub_contract_det b ON b.sub_contract_det_id = a.sub_contract_det_id
            LEFT JOIN trans_sub_contract c ON c.sub_contract_id = b.sub_contract_id
            LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = c.project_id
            LEFT JOIN erp_fs_ngg.lib_subcon e ON e.subConid = b.subconid
            LEFT JOIN erp_fs_ngg.lib_erp_currency f ON f.currency_id = a.currency_id
            LEFT JOIN (
	            SELECT a.trans_sub_contract_id
	            ,SUM(a.amount_collected) AS amount_collected
	            ,SUM(a.amount_collected_based) AS amount_collected_based
	            FROM trans_sub_contract_offset a
	            GROUP BY a.trans_sub_contract_id
            ) sc_offset ON sc_offset.trans_sub_contract_id = a.trans_sub_contract_id
            WHERE a.trans_id='10932'
[15:13:55] - 
                    select a.trans_detailed_particular_id, a.trans_id, a.po_no,a.rr_no,a.dr_no,a.si_no,a.due_date,ROUND(a.trans_header_detailed_amount, 2) as trans_header_detailed_amount 
                    from trans_header_detailed_particular a
                    WHERE trans_id = '10932'
[15:13:55] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 10932
[15:13:56] - SELECT * FROM select_ewt WHERE trans_id = 10932
[15:13:56] - SELECT * FROM select_final_tax WHERE trans_id = 10932
[15:13:56] - SELECT * FROM select_input_vat WHERE trans_id = 10932
[15:13:56] - SELECT * FROM select_output_vat WHERE trans_id = 10932
[15:13:56] - SELECT * FROM select_prepaid WHERE trans_id = 10932
[15:13:57] - SELECT * FROM select_fixed_asset WHERE trans_id = 10932
[15:13:57] - SELECT * FROM select_checks WHERE trans_id = 10932
[15:13:57] - SELECT * FROM trans_header_particular WHERE trans_id = 10932
[15:14:51] - select a.currency_id,a.currency_code,a.currency_name ,b.exchange_rate,b.based_rate from lib_erp_currency a inner join (select a.currency_id,a.exchange_rate,a.based_rate from lib_erp_currency_rate a inner join (SELECT currency_id,max(effectivitydate) as effectivitydate FROM lib_erp_currency_rate where DATE_FORMAT(effectivitydate,'%Y-%m') = '2019-07' group by currency_id) b on a.currency_id = b.currency_id and a.effectivitydate = b.effectivitydate) b on a.currency_id = b.currency_id
[15:14:51] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 3
[15:14:53] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,2,1),a.general_code ASC 
[15:14:54] - select a.currency_id,a.currency_code,a.currency_name ,b.exchange_rate,b.based_rate from lib_erp_currency a inner join (select a.currency_id,a.exchange_rate,a.based_rate from lib_erp_currency_rate a inner join (SELECT currency_id,max(effectivitydate) as effectivitydate FROM lib_erp_currency_rate where left(effectivitydate,7) <= '2019-07' group by currency_id) b on a.currency_id = b.currency_id and a.effectivitydate = b.effectivitydate) b on a.currency_id = b.currency_id
[15:15:04] - ----- Accounting Close -----
[15:16:50] - ----- Accounting Start -----
[15:16:50] - Main Connection String = Server=192.168.1.4;User Id=root;Password=snoitulos;Database=erp_accounting_ngg;Port=3306;allowzerodatetime=True;convertzerodatetime=True;Connect Timeout=6000000
[15:16:50] - FS Connection String = Server=192.168.1.4;User Id=root;Password=snoitulos;Database=erp_fs_ngg;Port=3306;allowzerodatetime=True;convertzerodatetime=True;Connect Timeout=6000000
[15:16:55] - Login Button Click
[15:16:55] - SELECT user_id FROM erp_fs_ngg.sys_erp_user WHERE username = 'alas' AND password = 'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580' 
[15:16:55] - INSERT INTO sys_log(log_date,user_id,log_code_3,machine_name,machine_user) VALUES('2019-07-23 15:16:55',1,'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580','DESKTOP-PL80BO2','Raymond T. Villegas');
[15:16:55] - SELECT log_id AS id FROM sys_log WHERE log_date = '2019-07-23 15:16:55' AND user_id = 1 AND log_code_3 = 'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580' AND machine_name = 'DESKTOP-PL80BO2' AND machine_user = 'Raymond T. Villegas';
[15:16:55] - SELECT a.stage_id,c.module_code,b.user_id FROM sys_erp_approval a LEFT JOIN sys_erp_approval_user b on b.approval_id = a.approval_id LEFT JOIN sys_erp_modules c ON c.module_id = a.module_id 
[15:16:55] - SELECT a.module_code,b.m_view,b.m_add,b.m_edit,b.m_delete,b.m_cancel,b.m_verify,b.m_approve,b.m_print FROM erp_fs_ngg.sys_erp_modules a LEFT JOIN erp_fs_ngg.sys_erp_profile_det b ON b.module_id = a.module_id LEFT JOIN erp_fs_ngg.sys_erp_user_profile c ON c.profile_id = b.profile_id AND c.system_id = a.system_id LEFT JOIN erp_fs_ngg.sys_erp_user d ON d.user_id = c.user_id WHERE a.system_id = 2 AND d.username = 'alas' 
[15:16:56] - SELECT module_code FROM erp_fs_ngg.sys_erp_modules WHERE system_id = 2 
[15:16:56] - select * from lib_erp_journal
[15:16:56] - SELECT a.*,b.company_code,b.company_name,b.address1,b.address2,b.tin,b.rdo_code ,a.currency_id,c.currency_code,c.currency_name,c.symbol  FROM sys_default a  LEFT JOIN erp_fs_ngg.lib_erp_company b ON b.company_id = a.company_id LEFT JOIN erp_fs_ngg.lib_erp_currency c ON c.currency_id = a.currency_id 
[15:16:56] - select a.*,b.module_code from sys_default_det a inner join erp_fs_ngg.sys_erp_modules b on a.module_id = b.module_id
[15:16:57] - SELECT a.book_id,a.book_code,a.book_name FROM lib_erp_book a WHERE a.company_id = '1'
[15:16:58] - SELECT 1 AS id,'January' AS name UNION SELECT 2,'February' UNION SELECT 3,'March' UNION SELECT 4,'April' UNION SELECT 5,'May' UNION SELECT 6,'June' UNION SELECT 7,'July' UNION SELECT 8,'August' UNION SELECT 9,'September' UNION SELECT 10,'October' UNION SELECT 11,'November' UNION SELECT 12,'December' 
[15:16:58] - End of Initialization
[15:17:08] - SELECT b.book_id,b.book_code,b.book_name FROM sys_acc_journal_book a LEFT JOIN lib_erp_book b ON b.book_id = a.book_id WHERE b.book_code IS NOT NULL AND a.journal_id = '3' AND b.company_id = '1' ORDER BY b.book_code 
[15:17:09] - SELECT COUNT(a.approval_id) AS numRow FROM sys_erp_approval a LEFT JOIN sys_erp_modules b ON b.module_id = a.module_id WHERE b.module_code = 'ACC00301'
[15:17:09] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_ap_id,'') AS trans_ap_id,IFNULL(b.si_no,'') AS si_no,IFNULL(b.rr_no,'') AS rr_no,IFNULL(b.po_no,'') AS po_no ,IFNULL(b.terms_id,'') AS terms_id,IFNULL(b.nodays,0) AS nodays,e.terms_name,b.due_date ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_ap b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN erp_fs_ngg.lib_erp_terms e ON b.terms_id = e.terms_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '3' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2019-07' ORDER BY a.trans_no ASC 
[15:17:09] - SELECT a.trans_sub_contract_id,a.trans_id,a.sub_contract_det_id,a.billed_amount,a.billed_amount_based
            ,a.currency_id,f.currency_code,f.currency_name,a.exchange_rate,a.based_rate
            ,b.subconid,e.subconcode,e.subconname,b.cons1,b.cons2,b.amount,b.amount_based,b.po_no
            ,b.trans_date
            ,sc_offset.amount_collected,sc_offset.amount_collected_based
            FROM trans_header_sub_contract a
            LEFT JOIN trans_sub_contract_det b ON b.sub_contract_det_id = a.sub_contract_det_id
            LEFT JOIN trans_sub_contract c ON c.sub_contract_id = b.sub_contract_id
            LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = c.project_id
            LEFT JOIN erp_fs_ngg.lib_subcon e ON e.subConid = b.subconid
            LEFT JOIN erp_fs_ngg.lib_erp_currency f ON f.currency_id = a.currency_id
            LEFT JOIN (
	            SELECT a.trans_sub_contract_id
	            ,SUM(a.amount_collected) AS amount_collected
	            ,SUM(a.amount_collected_based) AS amount_collected_based
	            FROM trans_sub_contract_offset a
	            GROUP BY a.trans_sub_contract_id
            ) sc_offset ON sc_offset.trans_sub_contract_id = a.trans_sub_contract_id
            WHERE a.trans_id='10932'
[15:17:10] - 
                    select a.trans_detailed_particular_id, a.trans_id, a.po_no,a.rr_no,a.dr_no,a.si_no,a.due_date,ROUND(a.trans_header_detailed_amount, 2) as trans_header_detailed_amount 
                    from trans_header_detailed_particular a
                    WHERE trans_id = '10932'
[15:17:10] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 10932
[15:17:10] - SELECT * FROM select_ewt WHERE trans_id = 10932
[15:17:10] - SELECT * FROM select_final_tax WHERE trans_id = 10932
[15:17:10] - SELECT * FROM select_input_vat WHERE trans_id = 10932
[15:17:10] - SELECT * FROM select_output_vat WHERE trans_id = 10932
[15:17:11] - SELECT * FROM select_prepaid WHERE trans_id = 10932
[15:17:11] - SELECT * FROM select_fixed_asset WHERE trans_id = 10932
[15:17:11] - SELECT * FROM select_checks WHERE trans_id = 10932
[15:17:11] - SELECT * FROM trans_header_particular WHERE trans_id = 10932
[15:17:13] - select a.currency_id,a.currency_code,a.currency_name ,b.exchange_rate,b.based_rate from lib_erp_currency a inner join (select a.currency_id,a.exchange_rate,a.based_rate from lib_erp_currency_rate a inner join (SELECT currency_id,max(effectivitydate) as effectivitydate FROM lib_erp_currency_rate where DATE_FORMAT(effectivitydate,'%Y-%m') = '2019-07' group by currency_id) b on a.currency_id = b.currency_id and a.effectivitydate = b.effectivitydate) b on a.currency_id = b.currency_id
[15:17:13] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 3
[15:17:15] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,2,1),a.general_code ASC 
[15:17:16] - select a.currency_id,a.currency_code,a.currency_name ,b.exchange_rate,b.based_rate from lib_erp_currency a inner join (select a.currency_id,a.exchange_rate,a.based_rate from lib_erp_currency_rate a inner join (SELECT currency_id,max(effectivitydate) as effectivitydate FROM lib_erp_currency_rate where left(effectivitydate,7) <= '2019-07' group by currency_id) b on a.currency_id = b.currency_id and a.effectivitydate = b.effectivitydate) b on a.currency_id = b.currency_id
[15:17:19] - SELECT * FROM lib_erp_project
[15:17:21] - SELECT * FROM lib_erp_project
[15:17:22] - SELECT * FROM lib_erp_department
[15:17:32] - ----- Accounting Close -----
[15:19:52] - ----- Accounting Start -----
[15:19:52] - Main Connection String = Server=192.168.1.4;User Id=root;Password=snoitulos;Database=erp_accounting_ngg;Port=3306;allowzerodatetime=True;convertzerodatetime=True;Connect Timeout=6000000
[15:19:52] - FS Connection String = Server=192.168.1.4;User Id=root;Password=snoitulos;Database=erp_fs_ngg;Port=3306;allowzerodatetime=True;convertzerodatetime=True;Connect Timeout=6000000
[15:19:57] - Login Button Click
[15:19:57] - SELECT user_id FROM erp_fs_ngg.sys_erp_user WHERE username = 'alas' AND password = 'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580' 
[15:19:57] - INSERT INTO sys_log(log_date,user_id,log_code_3,machine_name,machine_user) VALUES('2019-07-23 15:19:57',1,'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580','DESKTOP-PL80BO2','Raymond T. Villegas');
[15:19:57] - SELECT log_id AS id FROM sys_log WHERE log_date = '2019-07-23 15:19:57' AND user_id = 1 AND log_code_3 = 'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580' AND machine_name = 'DESKTOP-PL80BO2' AND machine_user = 'Raymond T. Villegas';
[15:19:58] - SELECT a.stage_id,c.module_code,b.user_id FROM sys_erp_approval a LEFT JOIN sys_erp_approval_user b on b.approval_id = a.approval_id LEFT JOIN sys_erp_modules c ON c.module_id = a.module_id 
[15:19:58] - SELECT a.module_code,b.m_view,b.m_add,b.m_edit,b.m_delete,b.m_cancel,b.m_verify,b.m_approve,b.m_print FROM erp_fs_ngg.sys_erp_modules a LEFT JOIN erp_fs_ngg.sys_erp_profile_det b ON b.module_id = a.module_id LEFT JOIN erp_fs_ngg.sys_erp_user_profile c ON c.profile_id = b.profile_id AND c.system_id = a.system_id LEFT JOIN erp_fs_ngg.sys_erp_user d ON d.user_id = c.user_id WHERE a.system_id = 2 AND d.username = 'alas' 
[15:19:58] - SELECT module_code FROM erp_fs_ngg.sys_erp_modules WHERE system_id = 2 
[15:19:58] - select * from lib_erp_journal
[15:19:58] - SELECT a.*,b.company_code,b.company_name,b.address1,b.address2,b.tin,b.rdo_code ,a.currency_id,c.currency_code,c.currency_name,c.symbol  FROM sys_default a  LEFT JOIN erp_fs_ngg.lib_erp_company b ON b.company_id = a.company_id LEFT JOIN erp_fs_ngg.lib_erp_currency c ON c.currency_id = a.currency_id 
[15:19:58] - select a.*,b.module_code from sys_default_det a inner join erp_fs_ngg.sys_erp_modules b on a.module_id = b.module_id
[15:20:00] - SELECT a.book_id,a.book_code,a.book_name FROM lib_erp_book a WHERE a.company_id = '1'
[15:20:00] - SELECT 1 AS id,'January' AS name UNION SELECT 2,'February' UNION SELECT 3,'March' UNION SELECT 4,'April' UNION SELECT 5,'May' UNION SELECT 6,'June' UNION SELECT 7,'July' UNION SELECT 8,'August' UNION SELECT 9,'September' UNION SELECT 10,'October' UNION SELECT 11,'November' UNION SELECT 12,'December' 
[15:20:00] - End of Initialization
[15:20:11] - SELECT b.book_id,b.book_code,b.book_name FROM sys_acc_journal_book a LEFT JOIN lib_erp_book b ON b.book_id = a.book_id WHERE b.book_code IS NOT NULL AND a.journal_id = '3' AND b.company_id = '1' ORDER BY b.book_code 
[15:20:13] - SELECT COUNT(a.approval_id) AS numRow FROM sys_erp_approval a LEFT JOIN sys_erp_modules b ON b.module_id = a.module_id WHERE b.module_code = 'ACC00301'
[15:20:13] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_ap_id,'') AS trans_ap_id,IFNULL(b.si_no,'') AS si_no,IFNULL(b.rr_no,'') AS rr_no,IFNULL(b.po_no,'') AS po_no ,IFNULL(b.terms_id,'') AS terms_id,IFNULL(b.nodays,0) AS nodays,e.terms_name,b.due_date ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_ap b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN erp_fs_ngg.lib_erp_terms e ON b.terms_id = e.terms_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '3' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2019-07' ORDER BY a.trans_no ASC 
[15:20:13] - SELECT a.trans_sub_contract_id,a.trans_id,a.sub_contract_det_id,a.billed_amount,a.billed_amount_based
            ,a.currency_id,f.currency_code,f.currency_name,a.exchange_rate,a.based_rate
            ,b.subconid,e.subconcode,e.subconname,b.cons1,b.cons2,b.amount,b.amount_based,b.po_no
            ,b.trans_date
            ,sc_offset.amount_collected,sc_offset.amount_collected_based
            FROM trans_header_sub_contract a
            LEFT JOIN trans_sub_contract_det b ON b.sub_contract_det_id = a.sub_contract_det_id
            LEFT JOIN trans_sub_contract c ON c.sub_contract_id = b.sub_contract_id
            LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = c.project_id
            LEFT JOIN erp_fs_ngg.lib_subcon e ON e.subConid = b.subconid
            LEFT JOIN erp_fs_ngg.lib_erp_currency f ON f.currency_id = a.currency_id
            LEFT JOIN (
	            SELECT a.trans_sub_contract_id
	            ,SUM(a.amount_collected) AS amount_collected
	            ,SUM(a.amount_collected_based) AS amount_collected_based
	            FROM trans_sub_contract_offset a
	            GROUP BY a.trans_sub_contract_id
            ) sc_offset ON sc_offset.trans_sub_contract_id = a.trans_sub_contract_id
            WHERE a.trans_id='10932'
[15:20:14] - 
                    select a.trans_detailed_particular_id, a.trans_id, a.po_no,a.rr_no,a.dr_no,a.si_no,a.due_date,ROUND(a.trans_header_detailed_amount, 2) as trans_header_detailed_amount 
                    from trans_header_detailed_particular a
                    WHERE trans_id = '10932'
[15:20:14] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 10932
[15:20:14] - SELECT * FROM select_ewt WHERE trans_id = 10932
[15:20:14] - SELECT * FROM select_final_tax WHERE trans_id = 10932
[15:20:14] - SELECT * FROM select_input_vat WHERE trans_id = 10932
[15:20:15] - SELECT * FROM select_output_vat WHERE trans_id = 10932
[15:20:15] - SELECT * FROM select_prepaid WHERE trans_id = 10932
[15:20:15] - SELECT * FROM select_fixed_asset WHERE trans_id = 10932
[15:20:15] - SELECT * FROM select_checks WHERE trans_id = 10932
[15:20:15] - SELECT * FROM trans_header_particular WHERE trans_id = 10932
[15:20:27] - select a.currency_id,a.currency_code,a.currency_name ,b.exchange_rate,b.based_rate from lib_erp_currency a inner join (select a.currency_id,a.exchange_rate,a.based_rate from lib_erp_currency_rate a inner join (SELECT currency_id,max(effectivitydate) as effectivitydate FROM lib_erp_currency_rate where DATE_FORMAT(effectivitydate,'%Y-%m') = '2019-07' group by currency_id) b on a.currency_id = b.currency_id and a.effectivitydate = b.effectivitydate) b on a.currency_id = b.currency_id
[15:20:27] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 3
[15:20:29] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,2,1),a.general_code ASC 
[15:20:30] - select a.currency_id,a.currency_code,a.currency_name ,b.exchange_rate,b.based_rate from lib_erp_currency a inner join (select a.currency_id,a.exchange_rate,a.based_rate from lib_erp_currency_rate a inner join (SELECT currency_id,max(effectivitydate) as effectivitydate FROM lib_erp_currency_rate where left(effectivitydate,7) <= '2019-07' group by currency_id) b on a.currency_id = b.currency_id and a.effectivitydate = b.effectivitydate) b on a.currency_id = b.currency_id
[15:20:33] - SELECT * FROM lib_erp_chart
[15:20:37] - SELECT * FROM lib_erp_project
[15:20:38] - SELECT * FROM lib_erp_department
[15:20:39] - SELECT * FROM lib_erp_department
[15:20:39] - SELECT * FROM lib_erp_book_unit_no WHERE book_id = '11'
[15:20:40] - SELECT * FROM lib_erp_book_unit_no WHERE book_id = '11'
[15:20:48] - SELECT * FROM lib_erp_chart
[15:20:50] - SELECT * FROM lib_erp_project
[15:20:51] - SELECT * FROM lib_erp_department
[15:20:51] - SELECT * FROM lib_erp_department
[15:20:51] - SELECT * FROM lib_erp_book_unit_no WHERE book_id = '11'
[15:20:52] - SELECT * FROM lib_erp_book_unit_no WHERE book_id = '11'
[15:20:55] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,2,1),a.general_code ASC 
[15:20:57] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,2,1),a.general_code ASC 
[15:20:58] - SELECT * FROM lib_erp_terms WHERE terms_type = 1 or terms_type = 3
[15:21:04] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_ap_id,'') AS trans_ap_id,IFNULL(b.si_no,'') AS si_no,IFNULL(b.rr_no,'') AS rr_no,IFNULL(b.po_no,'') AS po_no ,IFNULL(b.terms_id,'') AS terms_id,IFNULL(b.nodays,0) AS nodays,e.terms_name,b.due_date ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_ap b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN erp_fs_ngg.lib_erp_terms e ON b.terms_id = e.terms_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '3' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2019-07' ORDER BY a.trans_no ASC 
[15:21:05] - SELECT a.trans_sub_contract_id,a.trans_id,a.sub_contract_det_id,a.billed_amount,a.billed_amount_based
            ,a.currency_id,f.currency_code,f.currency_name,a.exchange_rate,a.based_rate
            ,b.subconid,e.subconcode,e.subconname,b.cons1,b.cons2,b.amount,b.amount_based,b.po_no
            ,b.trans_date
            ,sc_offset.amount_collected,sc_offset.amount_collected_based
            FROM trans_header_sub_contract a
            LEFT JOIN trans_sub_contract_det b ON b.sub_contract_det_id = a.sub_contract_det_id
            LEFT JOIN trans_sub_contract c ON c.sub_contract_id = b.sub_contract_id
            LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = c.project_id
            LEFT JOIN erp_fs_ngg.lib_subcon e ON e.subConid = b.subconid
            LEFT JOIN erp_fs_ngg.lib_erp_currency f ON f.currency_id = a.currency_id
            LEFT JOIN (
	            SELECT a.trans_sub_contract_id
	            ,SUM(a.amount_collected) AS amount_collected
	            ,SUM(a.amount_collected_based) AS amount_collected_based
	            FROM trans_sub_contract_offset a
	            GROUP BY a.trans_sub_contract_id
            ) sc_offset ON sc_offset.trans_sub_contract_id = a.trans_sub_contract_id
            WHERE a.trans_id='10932'
[15:21:05] - 
                    select a.trans_detailed_particular_id, a.trans_id, a.po_no,a.rr_no,a.dr_no,a.si_no,a.due_date,ROUND(a.trans_header_detailed_amount, 2) as trans_header_detailed_amount 
                    from trans_header_detailed_particular a
                    WHERE trans_id = '10932'
[15:21:05] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 10932
[15:21:06] - SELECT * FROM select_ewt WHERE trans_id = 10932
[15:21:06] - SELECT * FROM select_final_tax WHERE trans_id = 10932
[15:21:06] - SELECT * FROM select_input_vat WHERE trans_id = 10932
[15:21:06] - SELECT * FROM select_output_vat WHERE trans_id = 10932
[15:21:06] - SELECT * FROM select_prepaid WHERE trans_id = 10932
[15:21:06] - SELECT * FROM select_fixed_asset WHERE trans_id = 10932
[15:21:06] - SELECT * FROM select_checks WHERE trans_id = 10932
[15:21:06] - SELECT * FROM trans_header_particular WHERE trans_id = 10932
[15:21:08] - ----- Accounting Close -----
[15:24:25] - ----- Accounting Start -----
[15:24:25] - Main Connection String = Server=192.168.1.4;User Id=root;Password=snoitulos;Database=erp_accounting_ngg;Port=3306;allowzerodatetime=True;convertzerodatetime=True;Connect Timeout=6000000
[15:24:25] - FS Connection String = Server=192.168.1.4;User Id=root;Password=snoitulos;Database=erp_fs_ngg;Port=3306;allowzerodatetime=True;convertzerodatetime=True;Connect Timeout=6000000
[15:24:29] - Login Button Click
[15:24:29] - SELECT user_id FROM erp_fs_ngg.sys_erp_user WHERE username = 'alas' AND password = 'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580' 
[15:24:29] - INSERT INTO sys_log(log_date,user_id,log_code_3,machine_name,machine_user) VALUES('2019-07-23 15:24:29',1,'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580','DESKTOP-PL80BO2','Raymond T. Villegas');
[15:24:29] - SELECT log_id AS id FROM sys_log WHERE log_date = '2019-07-23 15:24:29' AND user_id = 1 AND log_code_3 = 'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580' AND machine_name = 'DESKTOP-PL80BO2' AND machine_user = 'Raymond T. Villegas';
[15:24:29] - SELECT a.stage_id,c.module_code,b.user_id FROM sys_erp_approval a LEFT JOIN sys_erp_approval_user b on b.approval_id = a.approval_id LEFT JOIN sys_erp_modules c ON c.module_id = a.module_id 
[15:24:29] - SELECT a.module_code,b.m_view,b.m_add,b.m_edit,b.m_delete,b.m_cancel,b.m_verify,b.m_approve,b.m_print FROM erp_fs_ngg.sys_erp_modules a LEFT JOIN erp_fs_ngg.sys_erp_profile_det b ON b.module_id = a.module_id LEFT JOIN erp_fs_ngg.sys_erp_user_profile c ON c.profile_id = b.profile_id AND c.system_id = a.system_id LEFT JOIN erp_fs_ngg.sys_erp_user d ON d.user_id = c.user_id WHERE a.system_id = 2 AND d.username = 'alas' 
[15:24:30] - SELECT module_code FROM erp_fs_ngg.sys_erp_modules WHERE system_id = 2 
[15:24:30] - select * from lib_erp_journal
[15:24:30] - SELECT a.*,b.company_code,b.company_name,b.address1,b.address2,b.tin,b.rdo_code ,a.currency_id,c.currency_code,c.currency_name,c.symbol  FROM sys_default a  LEFT JOIN erp_fs_ngg.lib_erp_company b ON b.company_id = a.company_id LEFT JOIN erp_fs_ngg.lib_erp_currency c ON c.currency_id = a.currency_id 
[15:24:30] - select a.*,b.module_code from sys_default_det a inner join erp_fs_ngg.sys_erp_modules b on a.module_id = b.module_id
[15:24:31] - SELECT a.book_id,a.book_code,a.book_name FROM lib_erp_book a WHERE a.company_id = '1'
[15:24:32] - SELECT 1 AS id,'January' AS name UNION SELECT 2,'February' UNION SELECT 3,'March' UNION SELECT 4,'April' UNION SELECT 5,'May' UNION SELECT 6,'June' UNION SELECT 7,'July' UNION SELECT 8,'August' UNION SELECT 9,'September' UNION SELECT 10,'October' UNION SELECT 11,'November' UNION SELECT 12,'December' 
[15:24:32] - End of Initialization
[15:24:34] - SELECT b.book_id,b.book_code,b.book_name FROM sys_acc_journal_book a LEFT JOIN lib_erp_book b ON b.book_id = a.book_id WHERE b.book_code IS NOT NULL AND a.journal_id = '3' AND b.company_id = '1' ORDER BY b.book_code 
[15:24:36] - SELECT COUNT(a.approval_id) AS numRow FROM sys_erp_approval a LEFT JOIN sys_erp_modules b ON b.module_id = a.module_id WHERE b.module_code = 'ACC00301'
[15:24:36] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_ap_id,'') AS trans_ap_id,IFNULL(b.si_no,'') AS si_no,IFNULL(b.rr_no,'') AS rr_no,IFNULL(b.po_no,'') AS po_no ,IFNULL(b.terms_id,'') AS terms_id,IFNULL(b.nodays,0) AS nodays,e.terms_name,b.due_date ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_ap b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN erp_fs_ngg.lib_erp_terms e ON b.terms_id = e.terms_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '3' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2019-07' ORDER BY a.trans_no ASC 
[15:24:36] - SELECT a.trans_sub_contract_id,a.trans_id,a.sub_contract_det_id,a.billed_amount,a.billed_amount_based
            ,a.currency_id,f.currency_code,f.currency_name,a.exchange_rate,a.based_rate
            ,b.subconid,e.subconcode,e.subconname,b.cons1,b.cons2,b.amount,b.amount_based,b.po_no
            ,b.trans_date
            ,sc_offset.amount_collected,sc_offset.amount_collected_based
            FROM trans_header_sub_contract a
            LEFT JOIN trans_sub_contract_det b ON b.sub_contract_det_id = a.sub_contract_det_id
            LEFT JOIN trans_sub_contract c ON c.sub_contract_id = b.sub_contract_id
            LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = c.project_id
            LEFT JOIN erp_fs_ngg.lib_subcon e ON e.subConid = b.subconid
            LEFT JOIN erp_fs_ngg.lib_erp_currency f ON f.currency_id = a.currency_id
            LEFT JOIN (
	            SELECT a.trans_sub_contract_id
	            ,SUM(a.amount_collected) AS amount_collected
	            ,SUM(a.amount_collected_based) AS amount_collected_based
	            FROM trans_sub_contract_offset a
	            GROUP BY a.trans_sub_contract_id
            ) sc_offset ON sc_offset.trans_sub_contract_id = a.trans_sub_contract_id
            WHERE a.trans_id='10932'
[15:24:36] - 
                    select a.trans_detailed_particular_id, a.trans_id, a.po_no,a.rr_no,a.dr_no,a.si_no,a.due_date,ROUND(a.trans_header_detailed_amount, 2) as trans_header_detailed_amount 
                    from trans_header_detailed_particular a
                    WHERE trans_id = '10932'
[15:24:37] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 10932
[15:24:37] - SELECT * FROM select_ewt WHERE trans_id = 10932
[15:24:37] - SELECT * FROM select_final_tax WHERE trans_id = 10932
[15:24:37] - SELECT * FROM select_input_vat WHERE trans_id = 10932
[15:24:37] - SELECT * FROM select_output_vat WHERE trans_id = 10932
[15:24:37] - SELECT * FROM select_prepaid WHERE trans_id = 10932
[15:24:38] - SELECT * FROM select_fixed_asset WHERE trans_id = 10932
[15:24:38] - SELECT * FROM select_checks WHERE trans_id = 10932
[15:24:38] - SELECT * FROM trans_header_particular WHERE trans_id = 10932
[15:24:38] - select a.currency_id,a.currency_code,a.currency_name ,b.exchange_rate,b.based_rate from lib_erp_currency a inner join (select a.currency_id,a.exchange_rate,a.based_rate from lib_erp_currency_rate a inner join (SELECT currency_id,max(effectivitydate) as effectivitydate FROM lib_erp_currency_rate where DATE_FORMAT(effectivitydate,'%Y-%m') = '2019-07' group by currency_id) b on a.currency_id = b.currency_id and a.effectivitydate = b.effectivitydate) b on a.currency_id = b.currency_id
[15:24:38] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 3
[15:24:40] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,2,1),a.general_code ASC 
[15:24:41] - select a.currency_id,a.currency_code,a.currency_name ,b.exchange_rate,b.based_rate from lib_erp_currency a inner join (select a.currency_id,a.exchange_rate,a.based_rate from lib_erp_currency_rate a inner join (SELECT currency_id,max(effectivitydate) as effectivitydate FROM lib_erp_currency_rate where left(effectivitydate,7) <= '2019-07' group by currency_id) b on a.currency_id = b.currency_id and a.effectivitydate = b.effectivitydate) b on a.currency_id = b.currency_id
[15:24:42] - SELECT * FROM lib_erp_chart
[15:24:45] - SELECT * FROM lib_erp_project
[15:24:46] - SELECT * FROM lib_erp_department
[15:24:46] - SELECT * FROM lib_erp_department
[15:24:46] - SELECT * FROM lib_erp_book_unit_no WHERE book_id = '11'
[15:24:47] - SELECT * FROM lib_erp_book_unit_no WHERE book_id = '11'
[15:24:49] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,2,1),a.general_code ASC 
[15:24:49] - SELECT * FROM lib_erp_terms WHERE terms_type = 1 or terms_type = 3
[15:25:50] - SELECT b.book_id,b.book_code,b.book_name FROM sys_acc_journal_book a LEFT JOIN lib_erp_book b ON b.book_id = a.book_id WHERE b.book_code IS NOT NULL AND a.journal_id = '3' AND b.company_id = '1' ORDER BY b.book_code 
[15:25:51] - SELECT COUNT(a.approval_id) AS numRow FROM sys_erp_approval a LEFT JOIN sys_erp_modules b ON b.module_id = a.module_id WHERE b.module_code = 'ACC00301'
[15:25:51] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_ap_id,'') AS trans_ap_id,IFNULL(b.si_no,'') AS si_no,IFNULL(b.rr_no,'') AS rr_no,IFNULL(b.po_no,'') AS po_no ,IFNULL(b.terms_id,'') AS terms_id,IFNULL(b.nodays,0) AS nodays,e.terms_name,b.due_date ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_ap b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN erp_fs_ngg.lib_erp_terms e ON b.terms_id = e.terms_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '3' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2019-07' ORDER BY a.trans_no ASC 
[15:25:52] - SELECT a.trans_sub_contract_id,a.trans_id,a.sub_contract_det_id,a.billed_amount,a.billed_amount_based
            ,a.currency_id,f.currency_code,f.currency_name,a.exchange_rate,a.based_rate
            ,b.subconid,e.subconcode,e.subconname,b.cons1,b.cons2,b.amount,b.amount_based,b.po_no
            ,b.trans_date
            ,sc_offset.amount_collected,sc_offset.amount_collected_based
            FROM trans_header_sub_contract a
            LEFT JOIN trans_sub_contract_det b ON b.sub_contract_det_id = a.sub_contract_det_id
            LEFT JOIN trans_sub_contract c ON c.sub_contract_id = b.sub_contract_id
            LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = c.project_id
            LEFT JOIN erp_fs_ngg.lib_subcon e ON e.subConid = b.subconid
            LEFT JOIN erp_fs_ngg.lib_erp_currency f ON f.currency_id = a.currency_id
            LEFT JOIN (
	            SELECT a.trans_sub_contract_id
	            ,SUM(a.amount_collected) AS amount_collected
	            ,SUM(a.amount_collected_based) AS amount_collected_based
	            FROM trans_sub_contract_offset a
	            GROUP BY a.trans_sub_contract_id
            ) sc_offset ON sc_offset.trans_sub_contract_id = a.trans_sub_contract_id
            WHERE a.trans_id='10932'
[15:25:52] - 
                    select a.trans_detailed_particular_id, a.trans_id, a.po_no,a.rr_no,a.dr_no,a.si_no,a.due_date,ROUND(a.trans_header_detailed_amount, 2) as trans_header_detailed_amount 
                    from trans_header_detailed_particular a
                    WHERE trans_id = '10932'
[15:25:52] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 10932
[15:25:52] - SELECT * FROM select_ewt WHERE trans_id = 10932
[15:25:52] - SELECT * FROM select_final_tax WHERE trans_id = 10932
[15:25:52] - SELECT * FROM select_input_vat WHERE trans_id = 10932
[15:25:52] - SELECT * FROM select_output_vat WHERE trans_id = 10932
[15:25:53] - SELECT * FROM select_prepaid WHERE trans_id = 10932
[15:25:53] - SELECT * FROM select_fixed_asset WHERE trans_id = 10932
[15:25:53] - SELECT * FROM select_checks WHERE trans_id = 10932
[15:25:53] - SELECT * FROM trans_header_particular WHERE trans_id = 10932
[15:25:53] - select a.currency_id,a.currency_code,a.currency_name ,b.exchange_rate,b.based_rate from lib_erp_currency a inner join (select a.currency_id,a.exchange_rate,a.based_rate from lib_erp_currency_rate a inner join (SELECT currency_id,max(effectivitydate) as effectivitydate FROM lib_erp_currency_rate where DATE_FORMAT(effectivitydate,'%Y-%m') = '2019-07' group by currency_id) b on a.currency_id = b.currency_id and a.effectivitydate = b.effectivitydate) b on a.currency_id = b.currency_id
[15:25:54] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 3
[15:25:56] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,2,1),a.general_code ASC 
[15:25:56] - select a.currency_id,a.currency_code,a.currency_name ,b.exchange_rate,b.based_rate from lib_erp_currency a inner join (select a.currency_id,a.exchange_rate,a.based_rate from lib_erp_currency_rate a inner join (SELECT currency_id,max(effectivitydate) as effectivitydate FROM lib_erp_currency_rate where left(effectivitydate,7) <= '2019-07' group by currency_id) b on a.currency_id = b.currency_id and a.effectivitydate = b.effectivitydate) b on a.currency_id = b.currency_id
[15:30:21] - SELECT * FROM lib_erp_chart
[15:30:29] - SELECT * FROM lib_erp_project
[15:30:29] - SELECT * FROM lib_erp_department
[15:30:30] - SELECT * FROM lib_erp_department
[15:30:30] - SELECT * FROM lib_erp_book_unit_no WHERE book_id = '11'
[15:30:30] - SELECT * FROM lib_erp_book_unit_no WHERE book_id = '11'
[15:30:51] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,2,1),a.general_code ASC 
[15:30:51] - SELECT * FROM lib_erp_terms WHERE terms_type = 1 or terms_type = 3
[15:35:23] - ----- Accounting Close -----
[15:35:41] - ----- Accounting Start -----
[15:35:41] - Main Connection String = Server=192.168.1.4;User Id=root;Password=snoitulos;Database=erp_accounting_ngg;Port=3306;allowzerodatetime=True;convertzerodatetime=True;Connect Timeout=6000000
[15:35:41] - FS Connection String = Server=192.168.1.4;User Id=root;Password=snoitulos;Database=erp_fs_ngg;Port=3306;allowzerodatetime=True;convertzerodatetime=True;Connect Timeout=6000000
[15:35:45] - Login Button Click
[15:35:45] - SELECT user_id FROM erp_fs_ngg.sys_erp_user WHERE username = 'alas' AND password = 'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580' 
[15:35:45] - INSERT INTO sys_log(log_date,user_id,log_code_3,machine_name,machine_user) VALUES('2019-07-23 15:35:45',1,'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580','DESKTOP-PL80BO2','Raymond T. Villegas');
[15:35:46] - SELECT log_id AS id FROM sys_log WHERE log_date = '2019-07-23 15:35:45' AND user_id = 1 AND log_code_3 = 'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580' AND machine_name = 'DESKTOP-PL80BO2' AND machine_user = 'Raymond T. Villegas';
[15:35:46] - SELECT a.stage_id,c.module_code,b.user_id FROM sys_erp_approval a LEFT JOIN sys_erp_approval_user b on b.approval_id = a.approval_id LEFT JOIN sys_erp_modules c ON c.module_id = a.module_id 
[15:35:46] - SELECT a.module_code,b.m_view,b.m_add,b.m_edit,b.m_delete,b.m_cancel,b.m_verify,b.m_approve,b.m_print FROM erp_fs_ngg.sys_erp_modules a LEFT JOIN erp_fs_ngg.sys_erp_profile_det b ON b.module_id = a.module_id LEFT JOIN erp_fs_ngg.sys_erp_user_profile c ON c.profile_id = b.profile_id AND c.system_id = a.system_id LEFT JOIN erp_fs_ngg.sys_erp_user d ON d.user_id = c.user_id WHERE a.system_id = 2 AND d.username = 'alas' 
[15:35:46] - SELECT module_code FROM erp_fs_ngg.sys_erp_modules WHERE system_id = 2 
[15:35:46] - select * from lib_erp_journal
[15:35:46] - SELECT a.*,b.company_code,b.company_name,b.address1,b.address2,b.tin,b.rdo_code ,a.currency_id,c.currency_code,c.currency_name,c.symbol  FROM sys_default a  LEFT JOIN erp_fs_ngg.lib_erp_company b ON b.company_id = a.company_id LEFT JOIN erp_fs_ngg.lib_erp_currency c ON c.currency_id = a.currency_id 
[15:35:47] - select a.*,b.module_code from sys_default_det a inner join erp_fs_ngg.sys_erp_modules b on a.module_id = b.module_id
[15:35:48] - SELECT a.book_id,a.book_code,a.book_name FROM lib_erp_book a WHERE a.company_id = '1'
[15:35:48] - SELECT 1 AS id,'January' AS name UNION SELECT 2,'February' UNION SELECT 3,'March' UNION SELECT 4,'April' UNION SELECT 5,'May' UNION SELECT 6,'June' UNION SELECT 7,'July' UNION SELECT 8,'August' UNION SELECT 9,'September' UNION SELECT 10,'October' UNION SELECT 11,'November' UNION SELECT 12,'December' 
[15:35:48] - End of Initialization
[15:36:03] - SELECT b.book_id,b.book_code,b.book_name FROM sys_acc_journal_book a LEFT JOIN lib_erp_book b ON b.book_id = a.book_id WHERE b.book_code IS NOT NULL AND a.journal_id = '3' AND b.company_id = '1' ORDER BY b.book_code 
[15:36:04] - SELECT COUNT(a.approval_id) AS numRow FROM sys_erp_approval a LEFT JOIN sys_erp_modules b ON b.module_id = a.module_id WHERE b.module_code = 'ACC00301'
[15:36:05] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_ap_id,'') AS trans_ap_id,IFNULL(b.si_no,'') AS si_no,IFNULL(b.rr_no,'') AS rr_no,IFNULL(b.po_no,'') AS po_no ,IFNULL(b.terms_id,'') AS terms_id,IFNULL(b.nodays,0) AS nodays,e.terms_name,b.due_date ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_ap b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN erp_fs_ngg.lib_erp_terms e ON b.terms_id = e.terms_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '3' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2019-07' ORDER BY a.trans_no ASC 
[15:36:05] - SELECT a.trans_sub_contract_id,a.trans_id,a.sub_contract_det_id,a.billed_amount,a.billed_amount_based
            ,a.currency_id,f.currency_code,f.currency_name,a.exchange_rate,a.based_rate
            ,b.subconid,e.subconcode,e.subconname,b.cons1,b.cons2,b.amount,b.amount_based,b.po_no
            ,b.trans_date
            ,sc_offset.amount_collected,sc_offset.amount_collected_based
            FROM trans_header_sub_contract a
            LEFT JOIN trans_sub_contract_det b ON b.sub_contract_det_id = a.sub_contract_det_id
            LEFT JOIN trans_sub_contract c ON c.sub_contract_id = b.sub_contract_id
            LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = c.project_id
            LEFT JOIN erp_fs_ngg.lib_subcon e ON e.subConid = b.subconid
            LEFT JOIN erp_fs_ngg.lib_erp_currency f ON f.currency_id = a.currency_id
            LEFT JOIN (
	            SELECT a.trans_sub_contract_id
	            ,SUM(a.amount_collected) AS amount_collected
	            ,SUM(a.amount_collected_based) AS amount_collected_based
	            FROM trans_sub_contract_offset a
	            GROUP BY a.trans_sub_contract_id
            ) sc_offset ON sc_offset.trans_sub_contract_id = a.trans_sub_contract_id
            WHERE a.trans_id='10932'
[15:36:05] - 
                    select a.trans_detailed_particular_id, a.trans_id, a.po_no,a.rr_no,a.dr_no,a.si_no,a.due_date,ROUND(a.trans_header_detailed_amount, 2) as trans_header_detailed_amount 
                    from trans_header_detailed_particular a
                    WHERE trans_id = '10932'
[15:36:05] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 10932
[15:36:06] - SELECT * FROM select_ewt WHERE trans_id = 10932
[15:36:06] - SELECT * FROM select_final_tax WHERE trans_id = 10932
[15:36:06] - SELECT * FROM select_input_vat WHERE trans_id = 10932
[15:36:06] - SELECT * FROM select_output_vat WHERE trans_id = 10932
[15:36:06] - SELECT * FROM select_prepaid WHERE trans_id = 10932
[15:36:06] - SELECT * FROM select_fixed_asset WHERE trans_id = 10932
[15:36:06] - SELECT * FROM select_checks WHERE trans_id = 10932
[15:36:07] - SELECT * FROM trans_header_particular WHERE trans_id = 10932
[15:36:07] - select a.currency_id,a.currency_code,a.currency_name ,b.exchange_rate,b.based_rate from lib_erp_currency a inner join (select a.currency_id,a.exchange_rate,a.based_rate from lib_erp_currency_rate a inner join (SELECT currency_id,max(effectivitydate) as effectivitydate FROM lib_erp_currency_rate where DATE_FORMAT(effectivitydate,'%Y-%m') = '2019-07' group by currency_id) b on a.currency_id = b.currency_id and a.effectivitydate = b.effectivitydate) b on a.currency_id = b.currency_id
[15:36:07] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 3
[15:36:09] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,2,1),a.general_code ASC 
[15:36:10] - select a.currency_id,a.currency_code,a.currency_name ,b.exchange_rate,b.based_rate from lib_erp_currency a inner join (select a.currency_id,a.exchange_rate,a.based_rate from lib_erp_currency_rate a inner join (SELECT currency_id,max(effectivitydate) as effectivitydate FROM lib_erp_currency_rate where left(effectivitydate,7) <= '2019-07' group by currency_id) b on a.currency_id = b.currency_id and a.effectivitydate = b.effectivitydate) b on a.currency_id = b.currency_id
[15:36:12] - SELECT * FROM lib_erp_chart
[15:36:14] - SELECT * FROM lib_erp_project
[15:36:15] - SELECT * FROM lib_erp_department
[15:36:15] - SELECT * FROM lib_erp_department
[15:36:15] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '1'
[15:36:15] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '1'
[15:36:18] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,2,1),a.general_code ASC 
[15:36:18] - SELECT * FROM lib_erp_terms WHERE terms_type = 1 or terms_type = 3
[15:36:21] - SELECT * FROM lib_erp_chart
[15:36:23] - SELECT * FROM lib_erp_project
[15:36:24] - SELECT * FROM lib_erp_department
[15:36:24] - SELECT * FROM lib_erp_department
[15:36:24] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '1'
[15:36:24] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '1'
[15:36:26] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,2,1),a.general_code ASC 
[15:36:26] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,'' AS trans_id,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars 
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id GROUP BY ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2019-7-23' AND a.general_id = '52' AND a.currency_id = '1' AND a.project_id  = 1 AND a.department_id  = 1 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[15:36:31] - SELECT * FROM lib_erp_terms WHERE terms_type = 1 or terms_type = 3
[15:36:37] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_ap_id,'') AS trans_ap_id,IFNULL(b.si_no,'') AS si_no,IFNULL(b.rr_no,'') AS rr_no,IFNULL(b.po_no,'') AS po_no ,IFNULL(b.terms_id,'') AS terms_id,IFNULL(b.nodays,0) AS nodays,e.terms_name,b.due_date ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_ap b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN erp_fs_ngg.lib_erp_terms e ON b.terms_id = e.terms_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '3' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2019-07' ORDER BY a.trans_no ASC 
[15:36:37] - SELECT a.trans_sub_contract_id,a.trans_id,a.sub_contract_det_id,a.billed_amount,a.billed_amount_based
            ,a.currency_id,f.currency_code,f.currency_name,a.exchange_rate,a.based_rate
            ,b.subconid,e.subconcode,e.subconname,b.cons1,b.cons2,b.amount,b.amount_based,b.po_no
            ,b.trans_date
            ,sc_offset.amount_collected,sc_offset.amount_collected_based
            FROM trans_header_sub_contract a
            LEFT JOIN trans_sub_contract_det b ON b.sub_contract_det_id = a.sub_contract_det_id
            LEFT JOIN trans_sub_contract c ON c.sub_contract_id = b.sub_contract_id
            LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = c.project_id
            LEFT JOIN erp_fs_ngg.lib_subcon e ON e.subConid = b.subconid
            LEFT JOIN erp_fs_ngg.lib_erp_currency f ON f.currency_id = a.currency_id
            LEFT JOIN (
	            SELECT a.trans_sub_contract_id
	            ,SUM(a.amount_collected) AS amount_collected
	            ,SUM(a.amount_collected_based) AS amount_collected_based
	            FROM trans_sub_contract_offset a
	            GROUP BY a.trans_sub_contract_id
            ) sc_offset ON sc_offset.trans_sub_contract_id = a.trans_sub_contract_id
            WHERE a.trans_id='10932'
[15:36:37] - 
                    select a.trans_detailed_particular_id, a.trans_id, a.po_no,a.rr_no,a.dr_no,a.si_no,a.due_date,ROUND(a.trans_header_detailed_amount, 2) as trans_header_detailed_amount 
                    from trans_header_detailed_particular a
                    WHERE trans_id = '10932'
[15:36:37] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 10932
[15:36:38] - SELECT * FROM select_ewt WHERE trans_id = 10932
[15:36:38] - SELECT * FROM select_final_tax WHERE trans_id = 10932
[15:36:38] - SELECT * FROM select_input_vat WHERE trans_id = 10932
[15:36:38] - SELECT * FROM select_output_vat WHERE trans_id = 10932
[15:36:38] - SELECT * FROM select_prepaid WHERE trans_id = 10932
[15:36:38] - SELECT * FROM select_fixed_asset WHERE trans_id = 10932
[15:36:38] - SELECT * FROM select_checks WHERE trans_id = 10932
[15:36:38] - SELECT * FROM trans_header_particular WHERE trans_id = 10932
[15:36:40] - ----- Accounting Close -----
[15:43:48] - ----- Accounting Start -----
[15:43:48] - Main Connection String = Server=192.168.1.4;User Id=root;Password=snoitulos;Database=erp_accounting_ngg;Port=3306;allowzerodatetime=True;convertzerodatetime=True;Connect Timeout=6000000
[15:43:48] - FS Connection String = Server=192.168.1.4;User Id=root;Password=snoitulos;Database=erp_fs_ngg;Port=3306;allowzerodatetime=True;convertzerodatetime=True;Connect Timeout=6000000
[15:43:58] - Login Button Click
[15:43:58] - SELECT user_id FROM erp_fs_ngg.sys_erp_user WHERE username = 'alas' AND password = 'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580' 
[15:43:58] - INSERT INTO sys_log(log_date,user_id,log_code_3,machine_name,machine_user) VALUES('2019-07-23 15:43:58',1,'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580','DESKTOP-PL80BO2','Raymond T. Villegas');
[15:43:58] - SELECT log_id AS id FROM sys_log WHERE log_date = '2019-07-23 15:43:58' AND user_id = 1 AND log_code_3 = 'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580' AND machine_name = 'DESKTOP-PL80BO2' AND machine_user = 'Raymond T. Villegas';
[15:43:58] - SELECT a.stage_id,c.module_code,b.user_id FROM sys_erp_approval a LEFT JOIN sys_erp_approval_user b on b.approval_id = a.approval_id LEFT JOIN sys_erp_modules c ON c.module_id = a.module_id 
[15:43:59] - SELECT a.module_code,b.m_view,b.m_add,b.m_edit,b.m_delete,b.m_cancel,b.m_verify,b.m_approve,b.m_print FROM erp_fs_ngg.sys_erp_modules a LEFT JOIN erp_fs_ngg.sys_erp_profile_det b ON b.module_id = a.module_id LEFT JOIN erp_fs_ngg.sys_erp_user_profile c ON c.profile_id = b.profile_id AND c.system_id = a.system_id LEFT JOIN erp_fs_ngg.sys_erp_user d ON d.user_id = c.user_id WHERE a.system_id = 2 AND d.username = 'alas' 
[15:43:59] - SELECT module_code FROM erp_fs_ngg.sys_erp_modules WHERE system_id = 2 
[15:43:59] - select * from lib_erp_journal
[15:43:59] - SELECT a.*,b.company_code,b.company_name,b.address1,b.address2,b.tin,b.rdo_code ,a.currency_id,c.currency_code,c.currency_name,c.symbol  FROM sys_default a  LEFT JOIN erp_fs_ngg.lib_erp_company b ON b.company_id = a.company_id LEFT JOIN erp_fs_ngg.lib_erp_currency c ON c.currency_id = a.currency_id 
[15:44:00] - select a.*,b.module_code from sys_default_det a inner join erp_fs_ngg.sys_erp_modules b on a.module_id = b.module_id
[15:44:01] - SELECT a.book_id,a.book_code,a.book_name FROM lib_erp_book a WHERE a.company_id = '1'
[15:44:01] - SELECT 1 AS id,'January' AS name UNION SELECT 2,'February' UNION SELECT 3,'March' UNION SELECT 4,'April' UNION SELECT 5,'May' UNION SELECT 6,'June' UNION SELECT 7,'July' UNION SELECT 8,'August' UNION SELECT 9,'September' UNION SELECT 10,'October' UNION SELECT 11,'November' UNION SELECT 12,'December' 
[15:44:01] - End of Initialization
[15:44:33] - SELECT b.book_id,b.book_code,b.book_name FROM sys_acc_journal_book a LEFT JOIN lib_erp_book b ON b.book_id = a.book_id WHERE b.book_code IS NOT NULL AND a.journal_id = '3' AND b.company_id = '1' ORDER BY b.book_code 
[15:44:34] - SELECT COUNT(a.approval_id) AS numRow FROM sys_erp_approval a LEFT JOIN sys_erp_modules b ON b.module_id = a.module_id WHERE b.module_code = 'ACC00301'
[15:44:35] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_ap_id,'') AS trans_ap_id,IFNULL(b.si_no,'') AS si_no,IFNULL(b.rr_no,'') AS rr_no,IFNULL(b.po_no,'') AS po_no ,IFNULL(b.terms_id,'') AS terms_id,IFNULL(b.nodays,0) AS nodays,e.terms_name,b.due_date ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_ap b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN erp_fs_ngg.lib_erp_terms e ON b.terms_id = e.terms_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '3' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2019-07' ORDER BY a.trans_no ASC 
[15:44:35] - SELECT a.trans_sub_contract_id,a.trans_id,a.sub_contract_det_id,a.billed_amount,a.billed_amount_based
            ,a.currency_id,f.currency_code,f.currency_name,a.exchange_rate,a.based_rate
            ,b.subconid,e.subconcode,e.subconname,b.cons1,b.cons2,b.amount,b.amount_based,b.po_no
            ,b.trans_date
            ,sc_offset.amount_collected,sc_offset.amount_collected_based
            FROM trans_header_sub_contract a
            LEFT JOIN trans_sub_contract_det b ON b.sub_contract_det_id = a.sub_contract_det_id
            LEFT JOIN trans_sub_contract c ON c.sub_contract_id = b.sub_contract_id
            LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = c.project_id
            LEFT JOIN erp_fs_ngg.lib_subcon e ON e.subConid = b.subconid
            LEFT JOIN erp_fs_ngg.lib_erp_currency f ON f.currency_id = a.currency_id
            LEFT JOIN (
	            SELECT a.trans_sub_contract_id
	            ,SUM(a.amount_collected) AS amount_collected
	            ,SUM(a.amount_collected_based) AS amount_collected_based
	            FROM trans_sub_contract_offset a
	            GROUP BY a.trans_sub_contract_id
            ) sc_offset ON sc_offset.trans_sub_contract_id = a.trans_sub_contract_id
            WHERE a.trans_id='10932'
[15:44:35] - 
                    select a.trans_detailed_particular_id, a.trans_id, a.po_no,a.rr_no,a.dr_no,a.si_no,a.due_date,ROUND(a.trans_header_detailed_amount, 2) as trans_header_detailed_amount 
                    from trans_header_detailed_particular a
                    WHERE trans_id = '10932'
[15:44:35] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 10932
[15:44:36] - SELECT * FROM select_ewt WHERE trans_id = 10932
[15:44:36] - SELECT * FROM select_final_tax WHERE trans_id = 10932
[15:44:36] - SELECT * FROM select_input_vat WHERE trans_id = 10932
[15:44:36] - SELECT * FROM select_output_vat WHERE trans_id = 10932
[15:44:36] - SELECT * FROM select_prepaid WHERE trans_id = 10932
[15:44:36] - SELECT * FROM select_fixed_asset WHERE trans_id = 10932
[15:44:36] - SELECT * FROM select_checks WHERE trans_id = 10932
[15:44:37] - SELECT * FROM trans_header_particular WHERE trans_id = 10932
[15:44:37] - select a.currency_id,a.currency_code,a.currency_name ,b.exchange_rate,b.based_rate from lib_erp_currency a inner join (select a.currency_id,a.exchange_rate,a.based_rate from lib_erp_currency_rate a inner join (SELECT currency_id,max(effectivitydate) as effectivitydate FROM lib_erp_currency_rate where DATE_FORMAT(effectivitydate,'%Y-%m') = '2019-07' group by currency_id) b on a.currency_id = b.currency_id and a.effectivitydate = b.effectivitydate) b on a.currency_id = b.currency_id
[15:44:38] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 3
[15:44:40] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,2,1),a.general_code ASC 
[15:44:41] - select a.currency_id,a.currency_code,a.currency_name ,b.exchange_rate,b.based_rate from lib_erp_currency a inner join (select a.currency_id,a.exchange_rate,a.based_rate from lib_erp_currency_rate a inner join (SELECT currency_id,max(effectivitydate) as effectivitydate FROM lib_erp_currency_rate where left(effectivitydate,7) <= '2019-07' group by currency_id) b on a.currency_id = b.currency_id and a.effectivitydate = b.effectivitydate) b on a.currency_id = b.currency_id
[15:44:43] - SELECT * FROM lib_erp_chart
[15:44:45] - SELECT * FROM lib_erp_project
[15:44:46] - SELECT * FROM lib_erp_department
[15:44:46] - SELECT * FROM lib_erp_department
[15:44:46] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '1'
[15:44:47] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '1'
[15:44:49] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,2,1),a.general_code ASC 
[15:44:50] - SELECT * FROM lib_erp_terms WHERE terms_type = 1 or terms_type = 3
[15:46:18] - SELECT b.book_id,b.book_code,b.book_name FROM sys_acc_journal_book a LEFT JOIN lib_erp_book b ON b.book_id = a.book_id WHERE b.book_code IS NOT NULL AND a.journal_id = '4' AND b.company_id = '1' ORDER BY b.book_code 
[15:46:19] - SELECT COUNT(a.approval_id) AS numRow FROM sys_erp_approval a LEFT JOIN sys_erp_modules b ON b.module_id = a.module_id WHERE b.module_code = 'ACC00401'
[15:46:20] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.*,checks.check_no ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cv_id,'') AS trans_cv_id,IFNULL(b.si_no,'') AS si_no,IFNULL(b.rr_no,'') AS rr_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cv b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id LEFT JOIN (
            SELECT a.trans_id,GROUP_CONCAT(b.check_no) AS check_no
            FROM trans_jbooks a
            LEFT JOIN trans_checks b ON b.jbooks_id = a.jbooks_id
            WHERE IFNULL(b.check_no,'') <> ''
            GROUP BY a.trans_id
        ) checks ON checks.trans_id = a.trans_id WHERE a.journal_id = '4' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2019-07' ORDER BY a.trans_no ASC 
[15:46:20] - SELECT a.offset_sub_contract_id,a.jbooks_id,a.trans_sub_contract_id,a.amount_collected,a.amount_collected_based
            ,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
            FROM trans_sub_contract_offset a
            LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
            WHERE b.trans_id = '10928'
            
[15:46:20] - 
                    select a.trans_detailed_particular_id, a.trans_id, a.po_no,a.rr_no,a.dr_no,a.si_no,a.due_date,ROUND(a.trans_header_detailed_amount, 2) as trans_header_detailed_amount 
                    from trans_header_detailed_particular a
                    WHERE trans_id = '10928'
[15:46:20] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 10928
[15:46:21] - SELECT * FROM select_ewt WHERE trans_id = 10928
[15:46:21] - SELECT * FROM select_final_tax WHERE trans_id = 10928
[15:46:21] - SELECT * FROM select_input_vat WHERE trans_id = 10928
[15:46:21] - SELECT * FROM select_output_vat WHERE trans_id = 10928
[15:46:21] - SELECT * FROM select_prepaid WHERE trans_id = 10928
[15:46:21] - SELECT * FROM select_fixed_asset WHERE trans_id = 10928
[15:46:21] - SELECT * FROM select_checks WHERE trans_id = 10928
[15:46:22] - SELECT * FROM trans_header_particular WHERE trans_id = 10928
[15:46:22] - select a.currency_id,a.currency_code,a.currency_name ,b.exchange_rate,b.based_rate from lib_erp_currency a inner join (select a.currency_id,a.exchange_rate,a.based_rate from lib_erp_currency_rate a inner join (SELECT currency_id,max(effectivitydate) as effectivitydate FROM lib_erp_currency_rate where DATE_FORMAT(effectivitydate,'%Y-%m') = '2019-07' group by currency_id) b on a.currency_id = b.currency_id and a.effectivitydate = b.effectivitydate) b on a.currency_id = b.currency_id
[15:46:22] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 4
[15:46:22] - call getnewtransno(4,11,7,2019)
[15:46:25] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[15:46:25] - select a.currency_id,a.currency_code,a.currency_name ,b.exchange_rate,b.based_rate from lib_erp_currency a inner join (select a.currency_id,a.exchange_rate,a.based_rate from lib_erp_currency_rate a inner join (SELECT currency_id,max(effectivitydate) as effectivitydate FROM lib_erp_currency_rate where left(effectivitydate,7) <= '2019-07' group by currency_id) b on a.currency_id = b.currency_id and a.effectivitydate = b.effectivitydate) b on a.currency_id = b.currency_id
[15:46:30] - SELECT * FROM lib_erp_chart
[15:46:33] - SELECT * FROM lib_erp_project
[15:46:33] - SELECT * FROM lib_erp_department
[15:46:34] - SELECT * FROM lib_erp_department
[15:46:34] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '1'
[15:46:34] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '1'
[15:46:37] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[15:46:38] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[15:46:39] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[15:46:40] - SELECT * FROM lib_erp_terms WHERE terms_type = 1 or terms_type = 3
[15:46:54] - ----- Accounting Close -----
[16:17:21] - ----- Accounting Start -----
[16:17:21] - Main Connection String = Server=192.168.1.4;User Id=root;Password=snoitulos;Database=erp_accounting_ngg;Port=3306;allowzerodatetime=True;convertzerodatetime=True;Connect Timeout=6000000
[16:17:21] - FS Connection String = Server=192.168.1.4;User Id=root;Password=snoitulos;Database=erp_fs_ngg;Port=3306;allowzerodatetime=True;convertzerodatetime=True;Connect Timeout=6000000
[16:17:25] - Login Button Click
[16:17:25] - SELECT user_id FROM erp_fs_ngg.sys_erp_user WHERE username = 'alas' AND password = 'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580' 
[16:17:25] - INSERT INTO sys_log(log_date,user_id,log_code_3,machine_name,machine_user) VALUES('2019-07-23 16:17:25',1,'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580','DESKTOP-PL80BO2','Raymond T. Villegas');
[16:17:26] - SELECT log_id AS id FROM sys_log WHERE log_date = '2019-07-23 16:17:25' AND user_id = 1 AND log_code_3 = 'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580' AND machine_name = 'DESKTOP-PL80BO2' AND machine_user = 'Raymond T. Villegas';
[16:17:26] - SELECT a.stage_id,c.module_code,b.user_id FROM sys_erp_approval a LEFT JOIN sys_erp_approval_user b on b.approval_id = a.approval_id LEFT JOIN sys_erp_modules c ON c.module_id = a.module_id 
[16:17:26] - SELECT a.module_code,b.m_view,b.m_add,b.m_edit,b.m_delete,b.m_cancel,b.m_verify,b.m_approve,b.m_print FROM erp_fs_ngg.sys_erp_modules a LEFT JOIN erp_fs_ngg.sys_erp_profile_det b ON b.module_id = a.module_id LEFT JOIN erp_fs_ngg.sys_erp_user_profile c ON c.profile_id = b.profile_id AND c.system_id = a.system_id LEFT JOIN erp_fs_ngg.sys_erp_user d ON d.user_id = c.user_id WHERE a.system_id = 2 AND d.username = 'alas' 
[16:17:26] - SELECT module_code FROM erp_fs_ngg.sys_erp_modules WHERE system_id = 2 
[16:17:26] - select * from lib_erp_journal
[16:17:26] - SELECT a.*,b.company_code,b.company_name,b.address1,b.address2,b.tin,b.rdo_code ,a.currency_id,c.currency_code,c.currency_name,c.symbol  FROM sys_default a  LEFT JOIN erp_fs_ngg.lib_erp_company b ON b.company_id = a.company_id LEFT JOIN erp_fs_ngg.lib_erp_currency c ON c.currency_id = a.currency_id 
[16:17:26] - select a.*,b.module_code from sys_default_det a inner join erp_fs_ngg.sys_erp_modules b on a.module_id = b.module_id
[16:17:27] - SELECT a.book_id,a.book_code,a.book_name FROM lib_erp_book a WHERE a.company_id = '1'
[16:17:27] - SELECT 1 AS id,'January' AS name UNION SELECT 2,'February' UNION SELECT 3,'March' UNION SELECT 4,'April' UNION SELECT 5,'May' UNION SELECT 6,'June' UNION SELECT 7,'July' UNION SELECT 8,'August' UNION SELECT 9,'September' UNION SELECT 10,'October' UNION SELECT 11,'November' UNION SELECT 12,'December' 
[16:17:27] - End of Initialization
[16:17:36] - SELECT False AS sel,journal_id,journal_code,journal_name FROM lib_erp_journal WHERE journal_id <> 8
[16:17:36] - SELECT False AS sel2,a.project_id AS book_id,a.project_unit_no_codes AS book_unit_no_name,a.project_unit_no_id AS book_unit_no_id
        FROM erp_fs_ngg.lib_erp_project_unit_no a  ORDER BY a.project_unit_no_codes DESC 
[16:17:37] - SELECT False AS sel,b.book_id,c.book_code,c.book_name,d.book_unit_no_name 
FROM erp_fs_ngg.lib_erp_journal a 
LEFT JOIN erp_fs_ngg.sys_acc_journal_book b ON b.journal_id = a.journal_id 
LEFT JOIN erp_fs_ngg.lib_erp_book c ON c.book_id = b.book_id 
LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no d ON d.book_id = c.book_id 
WHERE a.journal_id IN (1,2,3,4,5,6,7) AND c.book_code IS NOT NULL AND c.company_id = '1' GROUP BY c.book_id 
[16:17:41] - SELECT * FROM lib_erp_general 
[16:17:48] - ExecuteWithParameter : get_account_analysis_new
[16:17:48] - parameters : 'erp_accounting_ngg','erp_fs_ngg','762','2','2019-01-01','2019-07-23','','','','1,2,3,4,5,6,7,8','11','','','2','1'
[16:17:48] - Execution Time: 2019-07-23 16:17:48
[16:17:52] - Done Time: 2019-07-23 16:17:52
[16:17:52] - SELECT b.company_name,b.address1 AS address,b.tin,c.currency_name FROM erp_accounting_ngg.sys_default a LEFT JOIN erp_fs_ngg.lib_erp_company b ON b.company_id = a.company_id LEFT JOIN erp_fs_ngg.lib_erp_currency c ON c.currency_id = a.currency_id
[16:18:05] - SELECT * FROM lib_erp_general 
[16:18:11] - SELECT * FROM lib_erp_general 
[16:18:17] - ExecuteWithParameter : get_account_analysis_new
[16:18:17] - parameters : 'erp_accounting_ngg','erp_fs_ngg','1956','2','2019-01-01','2019-07-23','','','','1,2,3,4,5,6,7,8','11','','','2','1'
[16:18:17] - Execution Time: 2019-07-23 16:18:17
[16:18:18] - Done Time: 2019-07-23 16:18:18
[16:18:18] - SELECT b.company_name,b.address1 AS address,b.tin,c.currency_name FROM erp_accounting_ngg.sys_default a LEFT JOIN erp_fs_ngg.lib_erp_company b ON b.company_id = a.company_id LEFT JOIN erp_fs_ngg.lib_erp_currency c ON c.currency_id = a.currency_id
[16:20:48] - SELECT b.book_id,b.book_code,b.book_name FROM sys_acc_journal_book a LEFT JOIN lib_erp_book b ON b.book_id = a.book_id WHERE b.book_code IS NOT NULL AND a.journal_id = '2' AND b.company_id = '1' ORDER BY b.book_code 
[16:20:55] - SELECT * FROM lib_erp_book WHERE company_id = '1'
[16:20:56] - SELECT * FROM lib_erp_currency
[16:20:56] - SELECT trans_id FROM trans_header WHERE currency_id = 1 AND book_id = 11 AND trans_date = '2017-12-31' AND journal_id = 8
[16:20:56] - SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation <> 3 AND b.validation <> 2 UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 3 GROUP BY a.account_id,a.project_id,a.department_id UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 2 GROUP BY a.account_id,a.project_id,a.department_id ORDER BY account_code ASC 
[16:20:56] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:20:56] - SELECT * FROM lib_erp_currency_rate WHERE currency_id = 1 AND effectivitydate <= '2017-12-31' ORDER BY effectivitydate DESC LIMIT 1
[16:20:56] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:20:57] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:20:59] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:20:59] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:20:59] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:20:59] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:20:59] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:20:59] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:21:00] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:21:00] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:21:00] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:21:00] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:21:01] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:21:01] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:21:05] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:21:06] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:21:06] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:21:07] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:21:07] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:21:07] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:21:08] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:21:08] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:21:10] - SELECT * FROM lib_erp_department
[16:21:10] - SELECT * FROM lib_erp_project
[16:21:10] - SELECT * FROM lib_erp_chart WHERE account_id = 46
[16:21:11] - SELECT a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id ,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based ,a.general_id,a.ref_jbooks_id,a.line_remarks ,b.ref_no,b.ref_date,d.general_name,d.general_code ,IF(a.debit > e.credit,'Partially Paid',IF(a.debit = e.credit,'Fully Paid','')) as status ,IF(a.debit > e.credit,e.credit,IF(a.debit = e.credit,a.debit,0)) AS minimum ,f.terms_id,IFNULL(f.nodays,0) AS nodays,f.dr_no,f.si_no,f.po_no ,g.terms_code,g.terms_name ,h.currency_code,h.currency_name ,c.account_code,c.account_name ,a.project_unit_no_id AS unit_id,i.project_unit_no_codes AS unit_code,i.project_unit_no_names AS unit_name FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_chart c ON c.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_general d ON d.general_id = a.general_id LEFT JOIN (    SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.debit) AS debit,SUM(a.credit) AS credit     FROM trans_jbooks a     LEFT JOIN trans_header b ON b.trans_id = a.trans_id     WHERE ref_jbooks_id IS NOT NULL AND (b.status <> 'C' OR b.status IS NULL)     GROUP BY a.ref_jbooks_id ) e ON e.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar f ON f.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms g ON g.terms_id = f.terms_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no i ON i.project_unit_no_id = a.project_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no j ON j.book_unit_no_id = a.book_unit_no_id WHERE c.validation = 2 AND a.trans_id = 30 AND a.account_id = 46
                AND IFNULL(a.project_id,'') = '5' AND IFNULL(a.department_id,'') = '8'
[16:21:11] - SELECT a.currency_code,a.currency_name FROM lib_erp_currency a WHERE a.currency_id = 1
[16:21:33] - SELECT a.trans_no AS ref_no,a.trans_date,d.book_code,e.account_code,e.account_name,b.debit,b.credit FROM trans_header a LEFT JOIN trans_jbooks b ON b.trans_id = a.trans_id LEFT JOIN trans_jbooks_ref c ON c.jbooks_id = b.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_book d ON d.book_id = a.book_id LEFT JOIN erp_fs_ngg.lib_erp_chart e ON e.account_id = b.account_id WHERE b.ref_jbooks_id = '40272' AND (a.status <> 'C' OR a.status IS NULL)
[16:21:33] - ExecuteWithParameter : get_offsetting_schedule
[16:21:33] - parameters : 'erp_accounting_ngg','erp_fs_ngg','40272'
[16:21:34] - Execution Time: 2019-07-23 16:21:34
[16:21:34] - Done Time: 2019-07-23 16:21:34
[16:23:37] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:23:37] - SELECT trans_id FROM trans_header WHERE currency_id = 1 AND book_id = 11 AND trans_date = '2017-12-31' AND journal_id = 8
[16:23:37] - SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation <> 3 AND b.validation <> 2 UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 3 GROUP BY a.account_id,a.project_id,a.department_id UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 2 GROUP BY a.account_id,a.project_id,a.department_id ORDER BY account_code ASC 
[16:23:37] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:23:37] - SELECT * FROM lib_erp_currency_rate WHERE currency_id = 1 AND effectivitydate <= '2017-12-31' ORDER BY effectivitydate DESC LIMIT 1
[16:25:03] - SELECT * FROM lib_erp_chart 
[16:25:20] - ExecuteWithParameter : get_account_analysis_new
[16:25:20] - parameters : 'erp_accounting_ngg','erp_fs_ngg','','1','2019-06-01','2019-06-30','','','','1,2,3,4,5,6,7,8','11','','46','2','1'
[16:25:20] - Execution Time: 2019-07-23 16:25:20
[16:25:20] - Done Time: 2019-07-23 16:25:20
[16:25:20] - SELECT b.company_name,b.address1 AS address,b.tin,c.currency_name FROM erp_accounting_ngg.sys_default a LEFT JOIN erp_fs_ngg.lib_erp_company b ON b.company_id = a.company_id LEFT JOIN erp_fs_ngg.lib_erp_currency c ON c.currency_id = a.currency_id
[16:25:27] - SELECT * FROM lib_erp_chart 
[16:25:32] - ExecuteWithParameter : get_account_analysis_new
[16:25:32] - parameters : 'erp_accounting_ngg','erp_fs_ngg','','1','2019-06-01','2019-06-30','','','','1,2,3,4,5,6,7,8','11','','437','2','1'
[16:25:32] - Execution Time: 2019-07-23 16:25:32
[16:25:33] - Done Time: 2019-07-23 16:25:33
[16:25:33] - SELECT b.company_name,b.address1 AS address,b.tin,c.currency_name FROM erp_accounting_ngg.sys_default a LEFT JOIN erp_fs_ngg.lib_erp_company b ON b.company_id = a.company_id LEFT JOIN erp_fs_ngg.lib_erp_currency c ON c.currency_id = a.currency_id
[16:25:36] - SELECT * FROM lib_erp_chart 
[16:25:42] - ExecuteWithParameter : get_account_analysis_new
[16:25:42] - parameters : 'erp_accounting_ngg','erp_fs_ngg','','1','2019-06-01','2019-06-30','','','','1,2,3,4,5,6,7,8','11','','190','2','1'
[16:25:42] - Execution Time: 2019-07-23 16:25:42
[16:25:42] - Done Time: 2019-07-23 16:25:42
[16:25:42] - SELECT b.company_name,b.address1 AS address,b.tin,c.currency_name FROM erp_accounting_ngg.sys_default a LEFT JOIN erp_fs_ngg.lib_erp_company b ON b.company_id = a.company_id LEFT JOIN erp_fs_ngg.lib_erp_currency c ON c.currency_id = a.currency_id
[16:25:52] - ExecuteWithParameter : get_account_analysis_new
[16:25:52] - parameters : 'erp_accounting_ngg','erp_fs_ngg','','1','2018-06-01','2018-06-30','','','','1,2,3,4,5,6,7,8','11','','190','2','1'
[16:25:52] - Execution Time: 2019-07-23 16:25:52
[16:25:55] - Done Time: 2019-07-23 16:25:55
[16:25:55] - SELECT b.company_name,b.address1 AS address,b.tin,c.currency_name FROM erp_accounting_ngg.sys_default a LEFT JOIN erp_fs_ngg.lib_erp_company b ON b.company_id = a.company_id LEFT JOIN erp_fs_ngg.lib_erp_currency c ON c.currency_id = a.currency_id
[16:26:22] - SELECT * FROM lib_erp_chart 
[16:26:27] - ExecuteWithParameter : get_account_analysis_new
[16:26:27] - parameters : 'erp_accounting_ngg','erp_fs_ngg','','1','2018-06-01','2018-06-30','','','','1,2,3,4,5,6,7,8','11','','46','2','1'
[16:26:28] - Execution Time: 2019-07-23 16:26:28
[16:26:30] - Done Time: 2019-07-23 16:26:30
[16:26:30] - SELECT b.company_name,b.address1 AS address,b.tin,c.currency_name FROM erp_accounting_ngg.sys_default a LEFT JOIN erp_fs_ngg.lib_erp_company b ON b.company_id = a.company_id LEFT JOIN erp_fs_ngg.lib_erp_currency c ON c.currency_id = a.currency_id
[16:27:01] - ExecuteWithParameter : get_account_analysis_new
[16:27:01] - parameters : 'erp_accounting_ngg','erp_fs_ngg','','2','2018-06-01','2018-06-30','','','','1,2,3,4,5,6,7,8','11','','46','2','1'
[16:27:01] - Execution Time: 2019-07-23 16:27:01
[16:27:08] - Done Time: 2019-07-23 16:27:08
[16:27:08] - SELECT b.company_name,b.address1 AS address,b.tin,c.currency_name FROM erp_accounting_ngg.sys_default a LEFT JOIN erp_fs_ngg.lib_erp_company b ON b.company_id = a.company_id LEFT JOIN erp_fs_ngg.lib_erp_currency c ON c.currency_id = a.currency_id
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:11] - Exception from HRESULT: 0x800AC472
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:13] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:14] - Exception from HRESULT: 0x800401A8
[16:27:15] - Exception from HRESULT: 0x800401A8
[16:27:27] - ExecuteWithParameter : get_account_analysis_new
[16:27:27] - parameters : 'erp_accounting_ngg','erp_fs_ngg','','2','2018-06-01','2019-12-31','','','','1,2,3,4,5,6,7,8','11','','46','2','1'
[16:27:27] - Execution Time: 2019-07-23 16:27:27
[16:27:34] - Done Time: 2019-07-23 16:27:34
[16:27:34] - SELECT b.company_name,b.address1 AS address,b.tin,c.currency_name FROM erp_accounting_ngg.sys_default a LEFT JOIN erp_fs_ngg.lib_erp_company b ON b.company_id = a.company_id LEFT JOIN erp_fs_ngg.lib_erp_currency c ON c.currency_id = a.currency_id
[16:31:24] - SELECT b.book_id,b.book_code,b.book_name FROM sys_acc_journal_book a LEFT JOIN lib_erp_book b ON b.book_id = a.book_id WHERE b.book_code IS NOT NULL AND a.journal_id = '2' AND b.company_id = '1' ORDER BY b.book_code 
[16:31:29] - SELECT COUNT(a.approval_id) AS numRow FROM sys_erp_approval a LEFT JOIN sys_erp_modules b ON b.module_id = a.module_id WHERE b.module_code = 'ACC00201'
[16:31:29] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-01' ORDER BY a.trans_no ASC 
[16:31:30] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '1891'
            
[16:31:30] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 1891
[16:31:31] - SELECT * FROM select_ewt WHERE trans_id = 1891
[16:31:31] - SELECT * FROM select_final_tax WHERE trans_id = 1891
[16:31:31] - SELECT * FROM select_input_vat WHERE trans_id = 1891
[16:31:31] - SELECT * FROM select_output_vat WHERE trans_id = 1891
[16:31:31] - SELECT * FROM select_prepaid WHERE trans_id = 1891
[16:31:31] - SELECT * FROM select_fixed_asset WHERE trans_id = 1891
[16:31:31] - SELECT * FROM select_checks WHERE trans_id = 1891
[16:31:31] - SELECT * FROM trans_header_particular WHERE trans_id = 1891
[16:31:34] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-01' ORDER BY a.trans_no ASC 
[16:31:34] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '578'
            
[16:31:35] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 578
[16:31:35] - SELECT * FROM select_ewt WHERE trans_id = 578
[16:31:35] - SELECT * FROM select_final_tax WHERE trans_id = 578
[16:31:35] - SELECT * FROM select_input_vat WHERE trans_id = 578
[16:31:35] - SELECT * FROM select_output_vat WHERE trans_id = 578
[16:31:35] - SELECT * FROM select_prepaid WHERE trans_id = 578
[16:31:36] - SELECT * FROM select_fixed_asset WHERE trans_id = 578
[16:31:36] - SELECT * FROM select_checks WHERE trans_id = 578
[16:31:36] - SELECT * FROM trans_header_particular WHERE trans_id = 578
[16:31:47] - SELECT trans_id FROM trans_header WHERE currency_id = 1 AND book_id = 11 AND trans_date = '2017-12-31' AND journal_id = 8
[16:31:48] - SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation <> 3 AND b.validation <> 2 UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 3 GROUP BY a.account_id,a.project_id,a.department_id UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 2 GROUP BY a.account_id,a.project_id,a.department_id ORDER BY account_code ASC 
[16:31:48] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:31:48] - SELECT * FROM lib_erp_currency_rate WHERE currency_id = 1 AND effectivitydate <= '2017-12-31' ORDER BY effectivitydate DESC LIMIT 1
[16:31:48] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:31:48] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:31:55] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:31:55] - SELECT * FROM lib_erp_chart WHERE account_id = '6'
[16:31:55] - SELECT * FROM lib_erp_chart WHERE account_id = '6'
[16:31:55] - SELECT * FROM lib_erp_chart WHERE account_id = '6'
[16:31:55] - SELECT * FROM lib_erp_chart WHERE account_id = '6'
[16:31:55] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:31:56] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:31:56] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:31:59] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:32:00] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:32:01] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:32:01] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:32:01] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:32:02] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:32:04] - SELECT * FROM lib_erp_department
[16:32:04] - SELECT * FROM lib_erp_project
[16:32:04] - SELECT * FROM lib_erp_chart WHERE account_id = 437
[16:32:04] - SELECT a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id ,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based ,a.general_id,a.ref_jbooks_id,a.line_remarks ,b.ref_no,b.ref_date,d.general_name,d.general_code ,IF(a.debit > e.credit,'Partially Paid',IF(a.debit = e.credit,'Fully Paid','')) as status ,IF(a.debit > e.credit,e.credit,IF(a.debit = e.credit,a.debit,0)) AS minimum ,f.terms_id,IFNULL(f.nodays,0) AS nodays,f.dr_no,f.si_no,f.po_no ,g.terms_code,g.terms_name ,h.currency_code,h.currency_name ,c.account_code,c.account_name ,a.project_unit_no_id AS unit_id,i.project_unit_no_codes AS unit_code,i.project_unit_no_names AS unit_name FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_chart c ON c.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_general d ON d.general_id = a.general_id LEFT JOIN (    SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.debit) AS debit,SUM(a.credit) AS credit     FROM trans_jbooks a     LEFT JOIN trans_header b ON b.trans_id = a.trans_id     WHERE ref_jbooks_id IS NOT NULL AND (b.status <> 'C' OR b.status IS NULL)     GROUP BY a.ref_jbooks_id ) e ON e.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar f ON f.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms g ON g.terms_id = f.terms_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no i ON i.project_unit_no_id = a.project_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no j ON j.book_unit_no_id = a.book_unit_no_id WHERE c.validation = 2 AND a.trans_id = 30 AND a.account_id = 437
                AND IFNULL(a.project_id,'') = '8' AND IFNULL(a.department_id,'') = '8'
[16:32:04] - SELECT a.currency_code,a.currency_name FROM lib_erp_currency a WHERE a.currency_id = 1
[16:32:08] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:32:08] - SELECT trans_id FROM trans_header WHERE currency_id = 1 AND book_id = 11 AND trans_date = '2017-12-31' AND journal_id = 8
[16:32:08] - SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation <> 3 AND b.validation <> 2 UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 3 GROUP BY a.account_id,a.project_id,a.department_id UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 2 GROUP BY a.account_id,a.project_id,a.department_id ORDER BY account_code ASC 
[16:32:09] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:32:09] - SELECT * FROM lib_erp_currency_rate WHERE currency_id = 1 AND effectivitydate <= '2017-12-31' ORDER BY effectivitydate DESC LIMIT 1
[16:32:09] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:32:09] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:32:09] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:32:10] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:32:10] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:32:10] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:32:10] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:32:10] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:32:10] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:32:10] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:32:13] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:32:15] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:32:15] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:32:16] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:32:16] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:32:16] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:32:18] - SELECT * FROM lib_erp_department
[16:32:18] - SELECT * FROM lib_erp_project
[16:32:18] - SELECT * FROM lib_erp_chart WHERE account_id = 190
[16:32:19] - SELECT a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id ,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based ,a.general_id,a.ref_jbooks_id,a.line_remarks ,b.ref_no,b.ref_date,d.general_name,d.general_code ,IF(a.credit > e.debit,'Partially Paid',IF(a.credit = e.debit,'Fully Paid','')) as status ,IF(a.credit > e.debit,e.debit,IF(a.credit = e.debit,a.credit,0)) AS minimum ,f.terms_id,IFNULL(f.nodays,0) AS nodays,f.si_no,f.rr_no,f.po_no ,g.terms_code,g.terms_name ,h.currency_code,h.currency_name ,c.account_code,c.account_name ,a.project_unit_no_id AS unit_id,i.project_unit_no_codes AS unit_code,i.project_unit_no_names AS unit_name FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_chart c ON c.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_general d ON d.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.debit) AS debit,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE ref_jbooks_id IS NOT NULL AND (b.status <> 'C' OR b.status IS NULL) GROUP BY a.ref_jbooks_id ) e ON e.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ap f ON f.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms g ON g.terms_id = f.terms_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no i ON i.project_unit_no_id = a.project_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no j ON j.book_unit_no_id = a.book_unit_no_id WHERE c.validation = 3 AND a.trans_id = 30 AND a.account_id = 190  AND a.project_id = '8' AND a.department_id = '8'
[16:32:19] - SELECT a.currency_code,a.currency_name FROM lib_erp_currency a WHERE a.currency_id = 1
[16:32:25] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:32:25] - SELECT trans_id FROM trans_header WHERE currency_id = 1 AND book_id = 11 AND trans_date = '2017-12-31' AND journal_id = 8
[16:32:25] - SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation <> 3 AND b.validation <> 2 UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 3 GROUP BY a.account_id,a.project_id,a.department_id UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 2 GROUP BY a.account_id,a.project_id,a.department_id ORDER BY account_code ASC 
[16:32:26] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:32:26] - SELECT * FROM lib_erp_currency_rate WHERE currency_id = 1 AND effectivitydate <= '2017-12-31' ORDER BY effectivitydate DESC LIMIT 1
[16:32:26] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:32:26] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:32:26] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:32:26] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:32:26] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:32:27] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:32:29] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:32:30] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:32:33] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:32:34] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:32:34] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:32:35] - SELECT * FROM lib_erp_department
[16:32:36] - SELECT * FROM lib_erp_project
[16:32:36] - SELECT * FROM lib_erp_chart WHERE account_id = 46
[16:32:36] - SELECT a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id ,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based ,a.general_id,a.ref_jbooks_id,a.line_remarks ,b.ref_no,b.ref_date,d.general_name,d.general_code ,IF(a.debit > e.credit,'Partially Paid',IF(a.debit = e.credit,'Fully Paid','')) as status ,IF(a.debit > e.credit,e.credit,IF(a.debit = e.credit,a.debit,0)) AS minimum ,f.terms_id,IFNULL(f.nodays,0) AS nodays,f.dr_no,f.si_no,f.po_no ,g.terms_code,g.terms_name ,h.currency_code,h.currency_name ,c.account_code,c.account_name ,a.project_unit_no_id AS unit_id,i.project_unit_no_codes AS unit_code,i.project_unit_no_names AS unit_name FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_chart c ON c.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_general d ON d.general_id = a.general_id LEFT JOIN (    SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.debit) AS debit,SUM(a.credit) AS credit     FROM trans_jbooks a     LEFT JOIN trans_header b ON b.trans_id = a.trans_id     WHERE ref_jbooks_id IS NOT NULL AND (b.status <> 'C' OR b.status IS NULL)     GROUP BY a.ref_jbooks_id ) e ON e.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar f ON f.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms g ON g.terms_id = f.terms_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no i ON i.project_unit_no_id = a.project_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no j ON j.book_unit_no_id = a.book_unit_no_id WHERE c.validation = 2 AND a.trans_id = 30 AND a.account_id = 46
                AND IFNULL(a.project_id,'') = '8' AND IFNULL(a.department_id,'') = '8'
[16:32:36] - SELECT a.currency_code,a.currency_name FROM lib_erp_currency a WHERE a.currency_id = 1
[16:32:45] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:32:45] - SELECT trans_id FROM trans_header WHERE currency_id = 1 AND book_id = 11 AND trans_date = '2017-12-31' AND journal_id = 8
[16:32:45] - SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation <> 3 AND b.validation <> 2 UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 3 GROUP BY a.account_id,a.project_id,a.department_id UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 2 GROUP BY a.account_id,a.project_id,a.department_id ORDER BY account_code ASC 
[16:32:45] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:32:45] - SELECT * FROM lib_erp_currency_rate WHERE currency_id = 1 AND effectivitydate <= '2017-12-31' ORDER BY effectivitydate DESC LIMIT 1
[16:33:24] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:33:24] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:33:24] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:33:24] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:33:25] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:33:25] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:33:26] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:33:27] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:33:27] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:33:31] - SELECT * FROM lib_erp_department
[16:33:31] - SELECT * FROM lib_erp_project
[16:33:31] - SELECT * FROM lib_erp_chart WHERE account_id = 46
[16:33:31] - SELECT a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id ,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based ,a.general_id,a.ref_jbooks_id,a.line_remarks ,b.ref_no,b.ref_date,d.general_name,d.general_code ,IF(a.debit > e.credit,'Partially Paid',IF(a.debit = e.credit,'Fully Paid','')) as status ,IF(a.debit > e.credit,e.credit,IF(a.debit = e.credit,a.debit,0)) AS minimum ,f.terms_id,IFNULL(f.nodays,0) AS nodays,f.dr_no,f.si_no,f.po_no ,g.terms_code,g.terms_name ,h.currency_code,h.currency_name ,c.account_code,c.account_name ,a.project_unit_no_id AS unit_id,i.project_unit_no_codes AS unit_code,i.project_unit_no_names AS unit_name FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_chart c ON c.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_general d ON d.general_id = a.general_id LEFT JOIN (    SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.debit) AS debit,SUM(a.credit) AS credit     FROM trans_jbooks a     LEFT JOIN trans_header b ON b.trans_id = a.trans_id     WHERE ref_jbooks_id IS NOT NULL AND (b.status <> 'C' OR b.status IS NULL)     GROUP BY a.ref_jbooks_id ) e ON e.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar f ON f.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms g ON g.terms_id = f.terms_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no i ON i.project_unit_no_id = a.project_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no j ON j.book_unit_no_id = a.book_unit_no_id WHERE c.validation = 2 AND a.trans_id = 30 AND a.account_id = 46
                AND IFNULL(a.project_id,'') = '8' AND IFNULL(a.department_id,'') = '8'
[16:33:31] - SELECT a.currency_code,a.currency_name FROM lib_erp_currency a WHERE a.currency_id = 1
[16:33:57] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:33:57] - SELECT trans_id FROM trans_header WHERE currency_id = 1 AND book_id = 11 AND trans_date = '2017-12-31' AND journal_id = 8
[16:33:57] - SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation <> 3 AND b.validation <> 2 UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 3 GROUP BY a.account_id,a.project_id,a.department_id UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 2 GROUP BY a.account_id,a.project_id,a.department_id ORDER BY account_code ASC 
[16:33:58] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:33:58] - SELECT * FROM lib_erp_currency_rate WHERE currency_id = 1 AND effectivitydate <= '2017-12-31' ORDER BY effectivitydate DESC LIMIT 1
[16:34:29] - SELECT a.*,ELT(a.general_type,'Supplier','Client','Both') AS general_type_name,b.category_name,c.terms_name,d.industry_name FROM lib_erp_general a LEFT JOIN lib_erp_category b ON b.category_id = a.category_id LEFT JOIN lib_erp_terms c ON c.terms_id = a.terms_id LEFT JOIN lib_erp_industry d ON d.industry_id = a.industry_id ORDER BY a.general_code,a.general_name ASC 
[16:34:29] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '2'
[16:34:30] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 2
[16:34:30] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '2'
[16:34:30] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 2
[16:34:30] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '2'
[16:34:30] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 2
[16:34:32] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '2'
[16:34:32] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 2
[16:34:32] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '7'
[16:34:32] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 7
[16:34:32] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '7'
[16:34:32] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 7
[16:34:32] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '7'
[16:34:32] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 7
[16:34:33] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '7'
[16:34:33] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 7
[16:34:33] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '114'
[16:34:33] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 114
[16:34:33] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '114'
[16:34:33] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 114
[16:34:33] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '544'
[16:34:33] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 544
[16:34:33] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '544'
[16:34:33] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 544
[16:34:33] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '544'
[16:34:33] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 544
[16:34:35] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '2106'
[16:34:35] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 2106
[16:34:35] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '544'
[16:34:35] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 544
[16:34:36] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '2106'
[16:34:36] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 2106
[16:34:37] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '544'
[16:34:37] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 544
[16:34:37] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '2106'
[16:34:37] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 2106
[16:34:38] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '544'
[16:34:38] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 544
[16:34:52] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '2106'
[16:34:52] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 2106
[16:34:53] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '544'
[16:34:53] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 544
[16:35:41] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-01' ORDER BY a.trans_no ASC 
[16:35:41] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '637'
            
[16:35:41] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 637
[16:35:42] - SELECT * FROM select_ewt WHERE trans_id = 637
[16:35:42] - SELECT * FROM select_final_tax WHERE trans_id = 637
[16:35:42] - SELECT * FROM select_input_vat WHERE trans_id = 637
[16:35:42] - SELECT * FROM select_output_vat WHERE trans_id = 637
[16:35:43] - SELECT * FROM select_prepaid WHERE trans_id = 637
[16:35:43] - SELECT * FROM select_fixed_asset WHERE trans_id = 637
[16:35:43] - SELECT * FROM select_checks WHERE trans_id = 637
[16:35:43] - SELECT * FROM trans_header_particular WHERE trans_id = 637
[16:35:47] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:35:47] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:35:47] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:35:48] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:35:48] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:35:48] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:35:51] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:35:52] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:35:52] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:35:53] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:35:53] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:35:55] - SELECT * FROM lib_erp_department
[16:35:55] - SELECT * FROM lib_erp_project
[16:35:55] - SELECT * FROM lib_erp_chart WHERE account_id = 46
[16:35:55] - SELECT a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id ,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based ,a.general_id,a.ref_jbooks_id,a.line_remarks ,b.ref_no,b.ref_date,d.general_name,d.general_code ,IF(a.debit > e.credit,'Partially Paid',IF(a.debit = e.credit,'Fully Paid','')) as status ,IF(a.debit > e.credit,e.credit,IF(a.debit = e.credit,a.debit,0)) AS minimum ,f.terms_id,IFNULL(f.nodays,0) AS nodays,f.dr_no,f.si_no,f.po_no ,g.terms_code,g.terms_name ,h.currency_code,h.currency_name ,c.account_code,c.account_name ,a.project_unit_no_id AS unit_id,i.project_unit_no_codes AS unit_code,i.project_unit_no_names AS unit_name FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_chart c ON c.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_general d ON d.general_id = a.general_id LEFT JOIN (    SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.debit) AS debit,SUM(a.credit) AS credit     FROM trans_jbooks a     LEFT JOIN trans_header b ON b.trans_id = a.trans_id     WHERE ref_jbooks_id IS NOT NULL AND (b.status <> 'C' OR b.status IS NULL)     GROUP BY a.ref_jbooks_id ) e ON e.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar f ON f.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms g ON g.terms_id = f.terms_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no i ON i.project_unit_no_id = a.project_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no j ON j.book_unit_no_id = a.book_unit_no_id WHERE c.validation = 2 AND a.trans_id = 30 AND a.account_id = 46
                AND IFNULL(a.project_id,'') = '8' AND IFNULL(a.department_id,'') = '8'
[16:35:55] - SELECT a.currency_code,a.currency_name FROM lib_erp_currency a WHERE a.currency_id = 1
[16:36:11] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:36:11] - SELECT trans_id FROM trans_header WHERE currency_id = 1 AND book_id = 11 AND trans_date = '2017-12-31' AND journal_id = 8
[16:36:11] - SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation <> 3 AND b.validation <> 2 UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 3 GROUP BY a.account_id,a.project_id,a.department_id UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 2 GROUP BY a.account_id,a.project_id,a.department_id ORDER BY account_code ASC 
[16:36:11] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:36:11] - SELECT * FROM lib_erp_currency_rate WHERE currency_id = 1 AND effectivitydate <= '2017-12-31' ORDER BY effectivitydate DESC LIMIT 1
[16:36:12] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:36:12] - SELECT * FROM lib_erp_chart WHERE account_id = '6'
[16:36:12] - SELECT * FROM lib_erp_chart WHERE account_id = '6'
[16:36:12] - SELECT * FROM lib_erp_chart WHERE account_id = '6'
[16:36:12] - SELECT * FROM lib_erp_chart WHERE account_id = '6'
[16:36:12] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:36:13] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:36:13] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:36:14] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:36:15] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:36:15] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:36:16] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:36:16] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:36:16] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:36:18] - SELECT * FROM lib_erp_department
[16:36:18] - SELECT * FROM lib_erp_project
[16:36:18] - SELECT * FROM lib_erp_chart WHERE account_id = 437
[16:36:18] - SELECT a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id ,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based ,a.general_id,a.ref_jbooks_id,a.line_remarks ,b.ref_no,b.ref_date,d.general_name,d.general_code ,IF(a.debit > e.credit,'Partially Paid',IF(a.debit = e.credit,'Fully Paid','')) as status ,IF(a.debit > e.credit,e.credit,IF(a.debit = e.credit,a.debit,0)) AS minimum ,f.terms_id,IFNULL(f.nodays,0) AS nodays,f.dr_no,f.si_no,f.po_no ,g.terms_code,g.terms_name ,h.currency_code,h.currency_name ,c.account_code,c.account_name ,a.project_unit_no_id AS unit_id,i.project_unit_no_codes AS unit_code,i.project_unit_no_names AS unit_name FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_chart c ON c.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_general d ON d.general_id = a.general_id LEFT JOIN (    SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.debit) AS debit,SUM(a.credit) AS credit     FROM trans_jbooks a     LEFT JOIN trans_header b ON b.trans_id = a.trans_id     WHERE ref_jbooks_id IS NOT NULL AND (b.status <> 'C' OR b.status IS NULL)     GROUP BY a.ref_jbooks_id ) e ON e.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar f ON f.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms g ON g.terms_id = f.terms_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no i ON i.project_unit_no_id = a.project_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no j ON j.book_unit_no_id = a.book_unit_no_id WHERE c.validation = 2 AND a.trans_id = 30 AND a.account_id = 437
                AND IFNULL(a.project_id,'') = '8' AND IFNULL(a.department_id,'') = '8'
[16:36:19] - SELECT a.currency_code,a.currency_name FROM lib_erp_currency a WHERE a.currency_id = 1
[16:36:21] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:36:21] - SELECT trans_id FROM trans_header WHERE currency_id = 1 AND book_id = 11 AND trans_date = '2017-12-31' AND journal_id = 8
[16:36:21] - SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation <> 3 AND b.validation <> 2 UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 3 GROUP BY a.account_id,a.project_id,a.department_id UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 2 GROUP BY a.account_id,a.project_id,a.department_id ORDER BY account_code ASC 
[16:36:21] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:36:21] - SELECT * FROM lib_erp_currency_rate WHERE currency_id = 1 AND effectivitydate <= '2017-12-31' ORDER BY effectivitydate DESC LIMIT 1
[16:36:22] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:36:22] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:36:22] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:36:22] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:36:22] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:36:23] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:36:23] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:36:23] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:36:23] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:36:23] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:36:24] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:36:25] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:36:25] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:36:25] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:36:30] - SELECT * FROM lib_erp_department
[16:36:30] - SELECT * FROM lib_erp_project
[16:36:30] - SELECT * FROM lib_erp_chart WHERE account_id = 190
[16:36:30] - SELECT a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id ,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based ,a.general_id,a.ref_jbooks_id,a.line_remarks ,b.ref_no,b.ref_date,d.general_name,d.general_code ,IF(a.credit > e.debit,'Partially Paid',IF(a.credit = e.debit,'Fully Paid','')) as status ,IF(a.credit > e.debit,e.debit,IF(a.credit = e.debit,a.credit,0)) AS minimum ,f.terms_id,IFNULL(f.nodays,0) AS nodays,f.si_no,f.rr_no,f.po_no ,g.terms_code,g.terms_name ,h.currency_code,h.currency_name ,c.account_code,c.account_name ,a.project_unit_no_id AS unit_id,i.project_unit_no_codes AS unit_code,i.project_unit_no_names AS unit_name FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_chart c ON c.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_general d ON d.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.debit) AS debit,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE ref_jbooks_id IS NOT NULL AND (b.status <> 'C' OR b.status IS NULL) GROUP BY a.ref_jbooks_id ) e ON e.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ap f ON f.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms g ON g.terms_id = f.terms_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no i ON i.project_unit_no_id = a.project_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no j ON j.book_unit_no_id = a.book_unit_no_id WHERE c.validation = 3 AND a.trans_id = 30 AND a.account_id = 190  AND a.project_id = '8' AND a.department_id = '8'
[16:36:30] - SELECT a.currency_code,a.currency_name FROM lib_erp_currency a WHERE a.currency_id = 1
[16:39:35] - ----- Accounting Start -----
[16:39:35] - Main Connection String = Server=192.168.1.4;User Id=root;Password=snoitulos;Database=erp_accounting_ngg;Port=3306;allowzerodatetime=True;convertzerodatetime=True;Connect Timeout=6000000
[16:39:35] - FS Connection String = Server=192.168.1.4;User Id=root;Password=snoitulos;Database=erp_fs_ngg;Port=3306;allowzerodatetime=True;convertzerodatetime=True;Connect Timeout=6000000
[16:39:39] - Login Button Click
[16:39:39] - SELECT user_id FROM erp_fs_ngg.sys_erp_user WHERE username = 'alas' AND password = 'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580' 
[16:39:39] - INSERT INTO sys_log(log_date,user_id,log_code_3,machine_name,machine_user) VALUES('2019-07-23 16:39:39',1,'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580','DESKTOP-PL80BO2','Raymond T. Villegas');
[16:39:39] - SELECT log_id AS id FROM sys_log WHERE log_date = '2019-07-23 16:39:39' AND user_id = 1 AND log_code_3 = 'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580' AND machine_name = 'DESKTOP-PL80BO2' AND machine_user = 'Raymond T. Villegas';
[16:39:39] - SELECT a.stage_id,c.module_code,b.user_id FROM sys_erp_approval a LEFT JOIN sys_erp_approval_user b on b.approval_id = a.approval_id LEFT JOIN sys_erp_modules c ON c.module_id = a.module_id 
[16:39:39] - SELECT a.module_code,b.m_view,b.m_add,b.m_edit,b.m_delete,b.m_cancel,b.m_verify,b.m_approve,b.m_print FROM erp_fs_ngg.sys_erp_modules a LEFT JOIN erp_fs_ngg.sys_erp_profile_det b ON b.module_id = a.module_id LEFT JOIN erp_fs_ngg.sys_erp_user_profile c ON c.profile_id = b.profile_id AND c.system_id = a.system_id LEFT JOIN erp_fs_ngg.sys_erp_user d ON d.user_id = c.user_id WHERE a.system_id = 2 AND d.username = 'alas' 
[16:39:39] - SELECT module_code FROM erp_fs_ngg.sys_erp_modules WHERE system_id = 2 
[16:39:39] - select * from lib_erp_journal
[16:39:39] - SELECT a.*,b.company_code,b.company_name,b.address1,b.address2,b.tin,b.rdo_code ,a.currency_id,c.currency_code,c.currency_name,c.symbol  FROM sys_default a  LEFT JOIN erp_fs_ngg.lib_erp_company b ON b.company_id = a.company_id LEFT JOIN erp_fs_ngg.lib_erp_currency c ON c.currency_id = a.currency_id 
[16:39:39] - select a.*,b.module_code from sys_default_det a inner join erp_fs_ngg.sys_erp_modules b on a.module_id = b.module_id
[16:39:41] - SELECT a.book_id,a.book_code,a.book_name FROM lib_erp_book a WHERE a.company_id = '1'
[16:39:41] - SELECT 1 AS id,'January' AS name UNION SELECT 2,'February' UNION SELECT 3,'March' UNION SELECT 4,'April' UNION SELECT 5,'May' UNION SELECT 6,'June' UNION SELECT 7,'July' UNION SELECT 8,'August' UNION SELECT 9,'September' UNION SELECT 10,'October' UNION SELECT 11,'November' UNION SELECT 12,'December' 
[16:39:41] - End of Initialization
[16:39:44] - SELECT a.*,ELT(a.general_type,'Supplier','Client','Both') AS general_type_name,b.category_name,c.terms_name,d.industry_name FROM lib_erp_general a LEFT JOIN lib_erp_category b ON b.category_id = a.category_id LEFT JOIN lib_erp_terms c ON c.terms_id = a.terms_id LEFT JOIN lib_erp_industry d ON d.industry_id = a.industry_id ORDER BY a.general_code,a.general_name ASC 
[16:39:44] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '2'
[16:39:44] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 2
[16:39:44] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '2'
[16:39:44] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 2
[16:39:45] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '2'
[16:39:45] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 2
[16:39:45] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '2'
[16:39:45] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 2
[16:39:45] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '2'
[16:39:45] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 2
[16:40:28] - ----- Accounting Close -----
[16:45:00] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:45:00] - SELECT trans_id FROM trans_header WHERE currency_id = 1 AND book_id = 11 AND trans_date = '2017-12-31' AND journal_id = 8
[16:45:00] - SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation <> 3 AND b.validation <> 2 UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 3 GROUP BY a.account_id,a.project_id,a.department_id UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 2 GROUP BY a.account_id,a.project_id,a.department_id ORDER BY account_code ASC 
[16:45:00] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:45:00] - SELECT * FROM lib_erp_currency_rate WHERE currency_id = 1 AND effectivitydate <= '2017-12-31' ORDER BY effectivitydate DESC LIMIT 1
[16:45:02] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:45:02] - SELECT * FROM lib_erp_chart WHERE account_id = '6'
[16:45:02] - SELECT * FROM lib_erp_chart WHERE account_id = '6'
[16:45:03] - SELECT * FROM lib_erp_chart WHERE account_id = '6'
[16:45:03] - SELECT * FROM lib_erp_chart WHERE account_id = '6'
[16:45:03] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:45:03] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:45:03] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:45:07] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:45:25] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-01' ORDER BY a.trans_no ASC 
[16:45:25] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '866'
            
[16:45:26] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 866
[16:45:26] - SELECT * FROM select_ewt WHERE trans_id = 866
[16:45:26] - SELECT * FROM select_final_tax WHERE trans_id = 866
[16:45:26] - SELECT * FROM select_input_vat WHERE trans_id = 866
[16:45:26] - SELECT * FROM select_output_vat WHERE trans_id = 866
[16:45:27] - SELECT * FROM select_prepaid WHERE trans_id = 866
[16:45:27] - SELECT * FROM select_fixed_asset WHERE trans_id = 866
[16:45:27] - SELECT * FROM select_checks WHERE trans_id = 866
[16:45:27] - SELECT * FROM trans_header_particular WHERE trans_id = 866
[16:45:33] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:45:34] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:45:34] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:45:34] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:45:34] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:45:35] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:45:36] - SELECT * FROM lib_erp_department
[16:45:37] - SELECT * FROM lib_erp_project
[16:45:37] - SELECT * FROM lib_erp_chart WHERE account_id = 437
[16:45:37] - SELECT a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id ,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based ,a.general_id,a.ref_jbooks_id,a.line_remarks ,b.ref_no,b.ref_date,d.general_name,d.general_code ,IF(a.debit > e.credit,'Partially Paid',IF(a.debit = e.credit,'Fully Paid','')) as status ,IF(a.debit > e.credit,e.credit,IF(a.debit = e.credit,a.debit,0)) AS minimum ,f.terms_id,IFNULL(f.nodays,0) AS nodays,f.dr_no,f.si_no,f.po_no ,g.terms_code,g.terms_name ,h.currency_code,h.currency_name ,c.account_code,c.account_name ,a.project_unit_no_id AS unit_id,i.project_unit_no_codes AS unit_code,i.project_unit_no_names AS unit_name FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_chart c ON c.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_general d ON d.general_id = a.general_id LEFT JOIN (    SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.debit) AS debit,SUM(a.credit) AS credit     FROM trans_jbooks a     LEFT JOIN trans_header b ON b.trans_id = a.trans_id     WHERE ref_jbooks_id IS NOT NULL AND (b.status <> 'C' OR b.status IS NULL)     GROUP BY a.ref_jbooks_id ) e ON e.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar f ON f.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms g ON g.terms_id = f.terms_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no i ON i.project_unit_no_id = a.project_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no j ON j.book_unit_no_id = a.book_unit_no_id WHERE c.validation = 2 AND a.trans_id = 30 AND a.account_id = 437
                AND IFNULL(a.project_id,'') = '4' AND IFNULL(a.department_id,'') = '8'
[16:45:37] - SELECT a.currency_code,a.currency_name FROM lib_erp_currency a WHERE a.currency_id = 1
[16:45:41] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:45:41] - SELECT trans_id FROM trans_header WHERE currency_id = 1 AND book_id = 11 AND trans_date = '2017-12-31' AND journal_id = 8
[16:45:41] - SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation <> 3 AND b.validation <> 2 UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 3 GROUP BY a.account_id,a.project_id,a.department_id UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 2 GROUP BY a.account_id,a.project_id,a.department_id ORDER BY account_code ASC 
[16:45:41] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:45:41] - SELECT * FROM lib_erp_currency_rate WHERE currency_id = 1 AND effectivitydate <= '2017-12-31' ORDER BY effectivitydate DESC LIMIT 1
[16:45:42] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:45:42] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:45:42] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:45:43] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:45:43] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:45:43] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:45:44] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:45:44] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:45:44] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:45:44] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:45:44] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:45:44] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:45:46] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:45:48] - SELECT * FROM lib_erp_department
[16:45:48] - SELECT * FROM lib_erp_project
[16:45:48] - SELECT * FROM lib_erp_chart WHERE account_id = 46
[16:45:48] - SELECT a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id ,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based ,a.general_id,a.ref_jbooks_id,a.line_remarks ,b.ref_no,b.ref_date,d.general_name,d.general_code ,IF(a.debit > e.credit,'Partially Paid',IF(a.debit = e.credit,'Fully Paid','')) as status ,IF(a.debit > e.credit,e.credit,IF(a.debit = e.credit,a.debit,0)) AS minimum ,f.terms_id,IFNULL(f.nodays,0) AS nodays,f.dr_no,f.si_no,f.po_no ,g.terms_code,g.terms_name ,h.currency_code,h.currency_name ,c.account_code,c.account_name ,a.project_unit_no_id AS unit_id,i.project_unit_no_codes AS unit_code,i.project_unit_no_names AS unit_name FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_chart c ON c.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_general d ON d.general_id = a.general_id LEFT JOIN (    SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.debit) AS debit,SUM(a.credit) AS credit     FROM trans_jbooks a     LEFT JOIN trans_header b ON b.trans_id = a.trans_id     WHERE ref_jbooks_id IS NOT NULL AND (b.status <> 'C' OR b.status IS NULL)     GROUP BY a.ref_jbooks_id ) e ON e.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar f ON f.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms g ON g.terms_id = f.terms_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no i ON i.project_unit_no_id = a.project_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no j ON j.book_unit_no_id = a.book_unit_no_id WHERE c.validation = 2 AND a.trans_id = 30 AND a.account_id = 46
                AND IFNULL(a.project_id,'') = '4' AND IFNULL(a.department_id,'') = '8'
[16:45:48] - SELECT a.currency_code,a.currency_name FROM lib_erp_currency a WHERE a.currency_id = 1
[16:45:52] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:45:52] - SELECT trans_id FROM trans_header WHERE currency_id = 1 AND book_id = 11 AND trans_date = '2017-12-31' AND journal_id = 8
[16:45:52] - SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation <> 3 AND b.validation <> 2 UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 3 GROUP BY a.account_id,a.project_id,a.department_id UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 2 GROUP BY a.account_id,a.project_id,a.department_id ORDER BY account_code ASC 
[16:45:52] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:45:52] - SELECT * FROM lib_erp_currency_rate WHERE currency_id = 1 AND effectivitydate <= '2017-12-31' ORDER BY effectivitydate DESC LIMIT 1
[16:45:54] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:45:54] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:45:54] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:45:54] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:45:54] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:45:54] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:45:54] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:45:54] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:45:55] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:45:55] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:45:55] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:45:57] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:45:58] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:45:59] - SELECT * FROM lib_erp_department
[16:45:59] - SELECT * FROM lib_erp_project
[16:45:59] - SELECT * FROM lib_erp_chart WHERE account_id = 190
[16:45:59] - SELECT a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id ,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based ,a.general_id,a.ref_jbooks_id,a.line_remarks ,b.ref_no,b.ref_date,d.general_name,d.general_code ,IF(a.credit > e.debit,'Partially Paid',IF(a.credit = e.debit,'Fully Paid','')) as status ,IF(a.credit > e.debit,e.debit,IF(a.credit = e.debit,a.credit,0)) AS minimum ,f.terms_id,IFNULL(f.nodays,0) AS nodays,f.si_no,f.rr_no,f.po_no ,g.terms_code,g.terms_name ,h.currency_code,h.currency_name ,c.account_code,c.account_name ,a.project_unit_no_id AS unit_id,i.project_unit_no_codes AS unit_code,i.project_unit_no_names AS unit_name FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_chart c ON c.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_general d ON d.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.debit) AS debit,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE ref_jbooks_id IS NOT NULL AND (b.status <> 'C' OR b.status IS NULL) GROUP BY a.ref_jbooks_id ) e ON e.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ap f ON f.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms g ON g.terms_id = f.terms_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no i ON i.project_unit_no_id = a.project_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no j ON j.book_unit_no_id = a.book_unit_no_id WHERE c.validation = 3 AND a.trans_id = 30 AND a.account_id = 190  AND a.project_id = '4' AND a.department_id = '8'
[16:46:00] - SELECT a.currency_code,a.currency_name FROM lib_erp_currency a WHERE a.currency_id = 1
[16:46:45] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:46:45] - SELECT trans_id FROM trans_header WHERE currency_id = 1 AND book_id = 11 AND trans_date = '2017-12-31' AND journal_id = 8
[16:46:45] - SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation <> 3 AND b.validation <> 2 UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 3 GROUP BY a.account_id,a.project_id,a.department_id UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 2 GROUP BY a.account_id,a.project_id,a.department_id ORDER BY account_code ASC 
[16:46:45] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:46:45] - SELECT * FROM lib_erp_currency_rate WHERE currency_id = 1 AND effectivitydate <= '2017-12-31' ORDER BY effectivitydate DESC LIMIT 1
[16:46:46] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:46:46] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:46:46] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:46:46] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:46:46] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:46:47] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:46:47] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:46:47] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:46:47] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:46:47] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:46:48] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:47:00] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-01' ORDER BY a.trans_no ASC 
[16:47:01] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '886'
            
[16:47:01] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 886
[16:47:01] - SELECT * FROM select_ewt WHERE trans_id = 886
[16:47:01] - SELECT * FROM select_final_tax WHERE trans_id = 886
[16:47:02] - SELECT * FROM select_input_vat WHERE trans_id = 886
[16:47:02] - SELECT * FROM select_output_vat WHERE trans_id = 886
[16:47:02] - SELECT * FROM select_prepaid WHERE trans_id = 886
[16:47:02] - SELECT * FROM select_fixed_asset WHERE trans_id = 886
[16:47:02] - SELECT * FROM select_checks WHERE trans_id = 886
[16:47:02] - SELECT * FROM trans_header_particular WHERE trans_id = 886
[16:47:05] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:47:07] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:47:08] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:47:08] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:47:08] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:47:10] - SELECT * FROM lib_erp_department
[16:47:10] - SELECT * FROM lib_erp_project
[16:47:10] - SELECT * FROM lib_erp_chart WHERE account_id = 190
[16:47:10] - SELECT a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id ,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based ,a.general_id,a.ref_jbooks_id,a.line_remarks ,b.ref_no,b.ref_date,d.general_name,d.general_code ,IF(a.credit > e.debit,'Partially Paid',IF(a.credit = e.debit,'Fully Paid','')) as status ,IF(a.credit > e.debit,e.debit,IF(a.credit = e.debit,a.credit,0)) AS minimum ,f.terms_id,IFNULL(f.nodays,0) AS nodays,f.si_no,f.rr_no,f.po_no ,g.terms_code,g.terms_name ,h.currency_code,h.currency_name ,c.account_code,c.account_name ,a.project_unit_no_id AS unit_id,i.project_unit_no_codes AS unit_code,i.project_unit_no_names AS unit_name FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_chart c ON c.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_general d ON d.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.debit) AS debit,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE ref_jbooks_id IS NOT NULL AND (b.status <> 'C' OR b.status IS NULL) GROUP BY a.ref_jbooks_id ) e ON e.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ap f ON f.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms g ON g.terms_id = f.terms_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no i ON i.project_unit_no_id = a.project_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no j ON j.book_unit_no_id = a.book_unit_no_id WHERE c.validation = 3 AND a.trans_id = 30 AND a.account_id = 190  AND a.project_id = '8' AND a.department_id = '8'
[16:47:10] - SELECT a.currency_code,a.currency_name FROM lib_erp_currency a WHERE a.currency_id = 1
[16:47:18] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:47:18] - SELECT trans_id FROM trans_header WHERE currency_id = 1 AND book_id = 11 AND trans_date = '2017-12-31' AND journal_id = 8
[16:47:18] - SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation <> 3 AND b.validation <> 2 UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 3 GROUP BY a.account_id,a.project_id,a.department_id UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 2 GROUP BY a.account_id,a.project_id,a.department_id ORDER BY account_code ASC 
[16:47:18] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:47:18] - SELECT * FROM lib_erp_currency_rate WHERE currency_id = 1 AND effectivitydate <= '2017-12-31' ORDER BY effectivitydate DESC LIMIT 1
[16:47:19] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:47:19] - SELECT * FROM lib_erp_chart WHERE account_id = '6'
[16:47:19] - SELECT * FROM lib_erp_chart WHERE account_id = '6'
[16:47:20] - SELECT * FROM lib_erp_chart WHERE account_id = '6'
[16:47:20] - SELECT * FROM lib_erp_chart WHERE account_id = '6'
[16:47:20] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:47:20] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:47:20] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:47:21] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:47:22] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:47:22] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:47:23] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:47:24] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:47:25] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:47:27] - SELECT * FROM lib_erp_department
[16:47:27] - SELECT * FROM lib_erp_project
[16:47:27] - SELECT * FROM lib_erp_chart WHERE account_id = 437
[16:47:27] - SELECT a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id ,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based ,a.general_id,a.ref_jbooks_id,a.line_remarks ,b.ref_no,b.ref_date,d.general_name,d.general_code ,IF(a.debit > e.credit,'Partially Paid',IF(a.debit = e.credit,'Fully Paid','')) as status ,IF(a.debit > e.credit,e.credit,IF(a.debit = e.credit,a.debit,0)) AS minimum ,f.terms_id,IFNULL(f.nodays,0) AS nodays,f.dr_no,f.si_no,f.po_no ,g.terms_code,g.terms_name ,h.currency_code,h.currency_name ,c.account_code,c.account_name ,a.project_unit_no_id AS unit_id,i.project_unit_no_codes AS unit_code,i.project_unit_no_names AS unit_name FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_chart c ON c.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_general d ON d.general_id = a.general_id LEFT JOIN (    SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.debit) AS debit,SUM(a.credit) AS credit     FROM trans_jbooks a     LEFT JOIN trans_header b ON b.trans_id = a.trans_id     WHERE ref_jbooks_id IS NOT NULL AND (b.status <> 'C' OR b.status IS NULL)     GROUP BY a.ref_jbooks_id ) e ON e.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar f ON f.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms g ON g.terms_id = f.terms_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no i ON i.project_unit_no_id = a.project_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no j ON j.book_unit_no_id = a.book_unit_no_id WHERE c.validation = 2 AND a.trans_id = 30 AND a.account_id = 437
                AND IFNULL(a.project_id,'') = '8' AND IFNULL(a.department_id,'') = '8'
[16:47:27] - SELECT a.currency_code,a.currency_name FROM lib_erp_currency a WHERE a.currency_id = 1
[16:47:30] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:47:30] - SELECT trans_id FROM trans_header WHERE currency_id = 1 AND book_id = 11 AND trans_date = '2017-12-31' AND journal_id = 8
[16:47:30] - SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation <> 3 AND b.validation <> 2 UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 3 GROUP BY a.account_id,a.project_id,a.department_id UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 2 GROUP BY a.account_id,a.project_id,a.department_id ORDER BY account_code ASC 
[16:47:30] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:47:30] - SELECT * FROM lib_erp_currency_rate WHERE currency_id = 1 AND effectivitydate <= '2017-12-31' ORDER BY effectivitydate DESC LIMIT 1
[16:47:31] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:47:31] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:47:31] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:47:32] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:47:32] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:47:32] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:47:32] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:47:32] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:47:32] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:47:33] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:47:33] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:47:33] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:47:33] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:47:33] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:47:34] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:47:35] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:47:35] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:47:35] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:47:38] - SELECT * FROM lib_erp_department
[16:47:38] - SELECT * FROM lib_erp_project
[16:47:38] - SELECT * FROM lib_erp_chart WHERE account_id = 190
[16:47:38] - SELECT a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id ,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based ,a.general_id,a.ref_jbooks_id,a.line_remarks ,b.ref_no,b.ref_date,d.general_name,d.general_code ,IF(a.credit > e.debit,'Partially Paid',IF(a.credit = e.debit,'Fully Paid','')) as status ,IF(a.credit > e.debit,e.debit,IF(a.credit = e.debit,a.credit,0)) AS minimum ,f.terms_id,IFNULL(f.nodays,0) AS nodays,f.si_no,f.rr_no,f.po_no ,g.terms_code,g.terms_name ,h.currency_code,h.currency_name ,c.account_code,c.account_name ,a.project_unit_no_id AS unit_id,i.project_unit_no_codes AS unit_code,i.project_unit_no_names AS unit_name FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_chart c ON c.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_general d ON d.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.debit) AS debit,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE ref_jbooks_id IS NOT NULL AND (b.status <> 'C' OR b.status IS NULL) GROUP BY a.ref_jbooks_id ) e ON e.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ap f ON f.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms g ON g.terms_id = f.terms_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no i ON i.project_unit_no_id = a.project_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no j ON j.book_unit_no_id = a.book_unit_no_id WHERE c.validation = 3 AND a.trans_id = 30 AND a.account_id = 190  AND a.project_id = '8' AND a.department_id = '8'
[16:47:38] - SELECT a.currency_code,a.currency_name FROM lib_erp_currency a WHERE a.currency_id = 1
[16:47:48] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:47:48] - SELECT trans_id FROM trans_header WHERE currency_id = 1 AND book_id = 11 AND trans_date = '2017-12-31' AND journal_id = 8
[16:47:48] - SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation <> 3 AND b.validation <> 2 UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 3 GROUP BY a.account_id,a.project_id,a.department_id UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 2 GROUP BY a.account_id,a.project_id,a.department_id ORDER BY account_code ASC 
[16:47:48] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:47:48] - SELECT * FROM lib_erp_currency_rate WHERE currency_id = 1 AND effectivitydate <= '2017-12-31' ORDER BY effectivitydate DESC LIMIT 1
[16:47:49] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:47:49] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:47:49] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:47:50] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:47:50] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:47:50] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:47:53] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:47:54] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:47:54] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:47:56] - SELECT * FROM lib_erp_department
[16:47:56] - SELECT * FROM lib_erp_project
[16:47:56] - SELECT * FROM lib_erp_chart WHERE account_id = 46
[16:47:56] - SELECT a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id ,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based ,a.general_id,a.ref_jbooks_id,a.line_remarks ,b.ref_no,b.ref_date,d.general_name,d.general_code ,IF(a.debit > e.credit,'Partially Paid',IF(a.debit = e.credit,'Fully Paid','')) as status ,IF(a.debit > e.credit,e.credit,IF(a.debit = e.credit,a.debit,0)) AS minimum ,f.terms_id,IFNULL(f.nodays,0) AS nodays,f.dr_no,f.si_no,f.po_no ,g.terms_code,g.terms_name ,h.currency_code,h.currency_name ,c.account_code,c.account_name ,a.project_unit_no_id AS unit_id,i.project_unit_no_codes AS unit_code,i.project_unit_no_names AS unit_name FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_chart c ON c.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_general d ON d.general_id = a.general_id LEFT JOIN (    SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.debit) AS debit,SUM(a.credit) AS credit     FROM trans_jbooks a     LEFT JOIN trans_header b ON b.trans_id = a.trans_id     WHERE ref_jbooks_id IS NOT NULL AND (b.status <> 'C' OR b.status IS NULL)     GROUP BY a.ref_jbooks_id ) e ON e.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar f ON f.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms g ON g.terms_id = f.terms_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no i ON i.project_unit_no_id = a.project_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no j ON j.book_unit_no_id = a.book_unit_no_id WHERE c.validation = 2 AND a.trans_id = 30 AND a.account_id = 46
                AND IFNULL(a.project_id,'') = '8' AND IFNULL(a.department_id,'') = '8'
[16:47:57] - SELECT a.currency_code,a.currency_name FROM lib_erp_currency a WHERE a.currency_id = 1
[16:48:09] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:48:09] - SELECT trans_id FROM trans_header WHERE currency_id = 1 AND book_id = 11 AND trans_date = '2017-12-31' AND journal_id = 8
[16:48:09] - SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation <> 3 AND b.validation <> 2 UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 3 GROUP BY a.account_id,a.project_id,a.department_id UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 2 GROUP BY a.account_id,a.project_id,a.department_id ORDER BY account_code ASC 
[16:48:09] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:48:09] - SELECT * FROM lib_erp_currency_rate WHERE currency_id = 1 AND effectivitydate <= '2017-12-31' ORDER BY effectivitydate DESC LIMIT 1
[16:48:10] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:48:10] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:48:11] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:48:11] - SELECT * FROM lib_erp_chart WHERE account_id = '84'
[16:48:11] - SELECT * FROM lib_erp_chart WHERE account_id = '84'
[16:48:11] - SELECT * FROM lib_erp_chart WHERE account_id = '84'
[16:48:11] - SELECT * FROM lib_erp_chart WHERE account_id = '84'
[16:48:11] - SELECT * FROM lib_erp_chart WHERE account_id = '84'
[16:48:11] - SELECT * FROM lib_erp_chart WHERE account_id = '84'
[16:48:11] - SELECT * FROM lib_erp_chart WHERE account_id = '84'
[16:48:11] - SELECT * FROM lib_erp_chart WHERE account_id = '84'
[16:48:12] - SELECT * FROM lib_erp_chart WHERE account_id = '84'
[16:48:12] - SELECT * FROM lib_erp_chart WHERE account_id = '84'
[16:48:12] - SELECT * FROM lib_erp_chart WHERE account_id = '84'
[16:48:12] - SELECT * FROM lib_erp_chart WHERE account_id = '84'
[16:48:12] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:48:12] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:48:12] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:48:12] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:48:13] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:48:14] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:48:15] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:48:16] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:48:16] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:48:16] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:48:16] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:48:16] - SELECT * FROM lib_erp_chart WHERE account_id = '192'
[16:48:16] - SELECT * FROM lib_erp_chart WHERE account_id = '193'
[16:48:16] - SELECT * FROM lib_erp_chart WHERE account_id = '193'
[16:48:16] - SELECT * FROM lib_erp_chart WHERE account_id = '193'
[16:48:16] - SELECT * FROM lib_erp_chart WHERE account_id = '193'
[16:48:16] - SELECT * FROM lib_erp_chart WHERE account_id = '193'
[16:48:17] - SELECT * FROM lib_erp_chart WHERE account_id = '193'
[16:48:17] - SELECT * FROM lib_erp_chart WHERE account_id = '193'
[16:48:17] - SELECT * FROM lib_erp_chart WHERE account_id = '193'
[16:48:17] - SELECT * FROM lib_erp_chart WHERE account_id = '193'
[16:48:17] - SELECT * FROM lib_erp_chart WHERE account_id = '192'
[16:48:17] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:48:18] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:48:18] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:48:18] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:48:18] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:48:18] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:48:18] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:48:19] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:48:19] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:48:19] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:48:20] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:48:20] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:48:22] - SELECT * FROM lib_erp_department
[16:48:22] - SELECT * FROM lib_erp_project
[16:48:22] - SELECT * FROM lib_erp_chart WHERE account_id = 190
[16:48:22] - SELECT a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id ,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based ,a.general_id,a.ref_jbooks_id,a.line_remarks ,b.ref_no,b.ref_date,d.general_name,d.general_code ,IF(a.credit > e.debit,'Partially Paid',IF(a.credit = e.debit,'Fully Paid','')) as status ,IF(a.credit > e.debit,e.debit,IF(a.credit = e.debit,a.credit,0)) AS minimum ,f.terms_id,IFNULL(f.nodays,0) AS nodays,f.si_no,f.rr_no,f.po_no ,g.terms_code,g.terms_name ,h.currency_code,h.currency_name ,c.account_code,c.account_name ,a.project_unit_no_id AS unit_id,i.project_unit_no_codes AS unit_code,i.project_unit_no_names AS unit_name FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_chart c ON c.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_general d ON d.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.debit) AS debit,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE ref_jbooks_id IS NOT NULL AND (b.status <> 'C' OR b.status IS NULL) GROUP BY a.ref_jbooks_id ) e ON e.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ap f ON f.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms g ON g.terms_id = f.terms_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no i ON i.project_unit_no_id = a.project_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no j ON j.book_unit_no_id = a.book_unit_no_id WHERE c.validation = 3 AND a.trans_id = 30 AND a.account_id = 190  AND a.project_id = '8' AND a.department_id = '8'
[16:48:22] - SELECT a.currency_code,a.currency_name FROM lib_erp_currency a WHERE a.currency_id = 1
[16:48:29] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:48:29] - SELECT trans_id FROM trans_header WHERE currency_id = 1 AND book_id = 11 AND trans_date = '2017-12-31' AND journal_id = 8
[16:48:29] - SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation <> 3 AND b.validation <> 2 UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 3 GROUP BY a.account_id,a.project_id,a.department_id UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 2 GROUP BY a.account_id,a.project_id,a.department_id ORDER BY account_code ASC 
[16:48:29] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:48:29] - SELECT * FROM lib_erp_currency_rate WHERE currency_id = 1 AND effectivitydate <= '2017-12-31' ORDER BY effectivitydate DESC LIMIT 1
[16:48:34] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:48:34] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:48:34] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:48:34] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:48:34] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:48:34] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:48:34] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:48:34] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:48:34] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:48:35] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:48:35] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:48:38] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:48:39] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:48:39] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:48:41] - SELECT * FROM lib_erp_department
[16:48:41] - SELECT * FROM lib_erp_project
[16:48:41] - SELECT * FROM lib_erp_chart WHERE account_id = 190
[16:48:44] - SELECT a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id ,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based ,a.general_id,a.ref_jbooks_id,a.line_remarks ,b.ref_no,b.ref_date,d.general_name,d.general_code ,IF(a.credit > e.debit,'Partially Paid',IF(a.credit = e.debit,'Fully Paid','')) as status ,IF(a.credit > e.debit,e.debit,IF(a.credit = e.debit,a.credit,0)) AS minimum ,f.terms_id,IFNULL(f.nodays,0) AS nodays,f.si_no,f.rr_no,f.po_no ,g.terms_code,g.terms_name ,h.currency_code,h.currency_name ,c.account_code,c.account_name ,a.project_unit_no_id AS unit_id,i.project_unit_no_codes AS unit_code,i.project_unit_no_names AS unit_name FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_chart c ON c.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_general d ON d.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.debit) AS debit,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE ref_jbooks_id IS NOT NULL AND (b.status <> 'C' OR b.status IS NULL) GROUP BY a.ref_jbooks_id ) e ON e.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ap f ON f.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms g ON g.terms_id = f.terms_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no i ON i.project_unit_no_id = a.project_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no j ON j.book_unit_no_id = a.book_unit_no_id WHERE c.validation = 3 AND a.trans_id = 30 AND a.account_id = 190  AND a.project_id = '8' AND a.department_id = '8'
[16:48:44] - SELECT a.currency_code,a.currency_name FROM lib_erp_currency a WHERE a.currency_id = 1
[16:48:51] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:48:51] - SELECT trans_id FROM trans_header WHERE currency_id = 1 AND book_id = 11 AND trans_date = '2017-12-31' AND journal_id = 8
[16:48:52] - SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation <> 3 AND b.validation <> 2 UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 3 GROUP BY a.account_id,a.project_id,a.department_id UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 2 GROUP BY a.account_id,a.project_id,a.department_id ORDER BY account_code ASC 
[16:48:52] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:48:52] - SELECT * FROM lib_erp_currency_rate WHERE currency_id = 1 AND effectivitydate <= '2017-12-31' ORDER BY effectivitydate DESC LIMIT 1
[16:48:55] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '544'
[16:48:55] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 544
[16:48:55] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '7'
[16:48:55] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 7
[16:48:56] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '7'
[16:48:56] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 7
[16:48:56] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '156'
[16:48:56] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 156
[16:48:56] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '156'
[16:48:56] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 156
[16:48:56] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '424'
[16:48:56] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 424
[16:48:56] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '424'
[16:48:56] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 424
[16:48:56] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '424'
[16:48:56] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 424
[16:48:56] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '424'
[16:48:57] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 424
[16:48:57] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '424'
[16:48:57] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 424
[16:48:58] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '610'
[16:48:58] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 610
[16:49:11] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:49:11] - SELECT * FROM lib_erp_chart WHERE account_id = '6'
[16:49:11] - SELECT * FROM lib_erp_chart WHERE account_id = '6'
[16:49:11] - SELECT * FROM lib_erp_chart WHERE account_id = '6'
[16:49:11] - SELECT * FROM lib_erp_chart WHERE account_id = '6'
[16:49:11] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:49:11] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:49:12] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:49:15] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:49:16] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:49:16] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:49:17] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:49:17] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:49:18] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:49:19] - SELECT * FROM lib_erp_department
[16:49:20] - SELECT * FROM lib_erp_project
[16:49:20] - SELECT * FROM lib_erp_chart WHERE account_id = 437
[16:49:20] - SELECT a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id ,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based ,a.general_id,a.ref_jbooks_id,a.line_remarks ,b.ref_no,b.ref_date,d.general_name,d.general_code ,IF(a.debit > e.credit,'Partially Paid',IF(a.debit = e.credit,'Fully Paid','')) as status ,IF(a.debit > e.credit,e.credit,IF(a.debit = e.credit,a.debit,0)) AS minimum ,f.terms_id,IFNULL(f.nodays,0) AS nodays,f.dr_no,f.si_no,f.po_no ,g.terms_code,g.terms_name ,h.currency_code,h.currency_name ,c.account_code,c.account_name ,a.project_unit_no_id AS unit_id,i.project_unit_no_codes AS unit_code,i.project_unit_no_names AS unit_name FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_chart c ON c.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_general d ON d.general_id = a.general_id LEFT JOIN (    SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.debit) AS debit,SUM(a.credit) AS credit     FROM trans_jbooks a     LEFT JOIN trans_header b ON b.trans_id = a.trans_id     WHERE ref_jbooks_id IS NOT NULL AND (b.status <> 'C' OR b.status IS NULL)     GROUP BY a.ref_jbooks_id ) e ON e.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar f ON f.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms g ON g.terms_id = f.terms_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no i ON i.project_unit_no_id = a.project_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no j ON j.book_unit_no_id = a.book_unit_no_id WHERE c.validation = 2 AND a.trans_id = 30 AND a.account_id = 437
                AND IFNULL(a.project_id,'') = '8' AND IFNULL(a.department_id,'') = '8'
[16:49:20] - SELECT a.currency_code,a.currency_name FROM lib_erp_currency a WHERE a.currency_id = 1
[16:49:25] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:49:25] - SELECT trans_id FROM trans_header WHERE currency_id = 1 AND book_id = 11 AND trans_date = '2017-12-31' AND journal_id = 8
[16:49:25] - SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation <> 3 AND b.validation <> 2 UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 3 GROUP BY a.account_id,a.project_id,a.department_id UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 2 GROUP BY a.account_id,a.project_id,a.department_id ORDER BY account_code ASC 
[16:49:25] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:49:26] - SELECT * FROM lib_erp_currency_rate WHERE currency_id = 1 AND effectivitydate <= '2017-12-31' ORDER BY effectivitydate DESC LIMIT 1
[16:49:41] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:49:41] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:49:41] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:49:42] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:49:42] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:49:42] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:49:45] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:49:46] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:49:47] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:49:49] - SELECT * FROM lib_erp_department
[16:49:49] - SELECT * FROM lib_erp_project
[16:49:49] - SELECT * FROM lib_erp_chart WHERE account_id = 46
[16:49:49] - SELECT a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id ,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based ,a.general_id,a.ref_jbooks_id,a.line_remarks ,b.ref_no,b.ref_date,d.general_name,d.general_code ,IF(a.debit > e.credit,'Partially Paid',IF(a.debit = e.credit,'Fully Paid','')) as status ,IF(a.debit > e.credit,e.credit,IF(a.debit = e.credit,a.debit,0)) AS minimum ,f.terms_id,IFNULL(f.nodays,0) AS nodays,f.dr_no,f.si_no,f.po_no ,g.terms_code,g.terms_name ,h.currency_code,h.currency_name ,c.account_code,c.account_name ,a.project_unit_no_id AS unit_id,i.project_unit_no_codes AS unit_code,i.project_unit_no_names AS unit_name FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_chart c ON c.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_general d ON d.general_id = a.general_id LEFT JOIN (    SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.debit) AS debit,SUM(a.credit) AS credit     FROM trans_jbooks a     LEFT JOIN trans_header b ON b.trans_id = a.trans_id     WHERE ref_jbooks_id IS NOT NULL AND (b.status <> 'C' OR b.status IS NULL)     GROUP BY a.ref_jbooks_id ) e ON e.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar f ON f.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms g ON g.terms_id = f.terms_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no i ON i.project_unit_no_id = a.project_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no j ON j.book_unit_no_id = a.book_unit_no_id WHERE c.validation = 2 AND a.trans_id = 30 AND a.account_id = 46
                AND IFNULL(a.project_id,'') = '8' AND IFNULL(a.department_id,'') = '8'
[16:49:49] - SELECT a.currency_code,a.currency_name FROM lib_erp_currency a WHERE a.currency_id = 1
[16:50:09] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:50:09] - SELECT trans_id FROM trans_header WHERE currency_id = 1 AND book_id = 11 AND trans_date = '2017-12-31' AND journal_id = 8
[16:50:09] - SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation <> 3 AND b.validation <> 2 UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 3 GROUP BY a.account_id,a.project_id,a.department_id UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 2 GROUP BY a.account_id,a.project_id,a.department_id ORDER BY account_code ASC 
[16:50:09] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:50:09] - SELECT * FROM lib_erp_currency_rate WHERE currency_id = 1 AND effectivitydate <= '2017-12-31' ORDER BY effectivitydate DESC LIMIT 1
[16:50:14] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '424'
[16:50:14] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 424
[16:50:16] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '2109'
[16:50:16] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 2109
[16:50:21] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:50:21] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:50:21] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:50:22] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:50:22] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:50:22] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:50:23] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:50:24] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:50:24] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:50:26] - SELECT * FROM lib_erp_department
[16:50:26] - SELECT * FROM lib_erp_project
[16:50:26] - SELECT * FROM lib_erp_chart WHERE account_id = 46
[16:50:26] - SELECT a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id ,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based ,a.general_id,a.ref_jbooks_id,a.line_remarks ,b.ref_no,b.ref_date,d.general_name,d.general_code ,IF(a.debit > e.credit,'Partially Paid',IF(a.debit = e.credit,'Fully Paid','')) as status ,IF(a.debit > e.credit,e.credit,IF(a.debit = e.credit,a.debit,0)) AS minimum ,f.terms_id,IFNULL(f.nodays,0) AS nodays,f.dr_no,f.si_no,f.po_no ,g.terms_code,g.terms_name ,h.currency_code,h.currency_name ,c.account_code,c.account_name ,a.project_unit_no_id AS unit_id,i.project_unit_no_codes AS unit_code,i.project_unit_no_names AS unit_name FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_chart c ON c.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_general d ON d.general_id = a.general_id LEFT JOIN (    SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.debit) AS debit,SUM(a.credit) AS credit     FROM trans_jbooks a     LEFT JOIN trans_header b ON b.trans_id = a.trans_id     WHERE ref_jbooks_id IS NOT NULL AND (b.status <> 'C' OR b.status IS NULL)     GROUP BY a.ref_jbooks_id ) e ON e.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar f ON f.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms g ON g.terms_id = f.terms_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no i ON i.project_unit_no_id = a.project_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no j ON j.book_unit_no_id = a.book_unit_no_id WHERE c.validation = 2 AND a.trans_id = 30 AND a.account_id = 46
                AND IFNULL(a.project_id,'') = '8' AND IFNULL(a.department_id,'') = '8'
[16:50:27] - SELECT a.currency_code,a.currency_name FROM lib_erp_currency a WHERE a.currency_id = 1
[16:52:02] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:52:02] - SELECT trans_id FROM trans_header WHERE currency_id = 1 AND book_id = 11 AND trans_date = '2017-12-31' AND journal_id = 8
[16:52:02] - SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation <> 3 AND b.validation <> 2 UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 3 GROUP BY a.account_id,a.project_id,a.department_id UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 2 GROUP BY a.account_id,a.project_id,a.department_id ORDER BY account_code ASC 
[16:52:03] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:52:03] - SELECT * FROM lib_erp_currency_rate WHERE currency_id = 1 AND effectivitydate <= '2017-12-31' ORDER BY effectivitydate DESC LIMIT 1
[16:52:06] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-02' ORDER BY a.trans_no ASC 
[16:52:06] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '1890'
            
[16:52:06] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 1890
[16:52:07] - SELECT * FROM select_ewt WHERE trans_id = 1890
[16:52:07] - SELECT * FROM select_final_tax WHERE trans_id = 1890
[16:52:07] - SELECT * FROM select_input_vat WHERE trans_id = 1890
[16:52:07] - SELECT * FROM select_output_vat WHERE trans_id = 1890
[16:52:07] - SELECT * FROM select_prepaid WHERE trans_id = 1890
[16:52:07] - SELECT * FROM select_fixed_asset WHERE trans_id = 1890
[16:52:07] - SELECT * FROM select_checks WHERE trans_id = 1890
[16:52:07] - SELECT * FROM trans_header_particular WHERE trans_id = 1890
[16:52:17] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-02' ORDER BY a.trans_no ASC 
[16:52:17] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '188'
            
[16:52:17] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 188
[16:52:18] - SELECT * FROM select_ewt WHERE trans_id = 188
[16:52:18] - SELECT * FROM select_final_tax WHERE trans_id = 188
[16:52:18] - SELECT * FROM select_input_vat WHERE trans_id = 188
[16:52:18] - SELECT * FROM select_output_vat WHERE trans_id = 188
[16:52:18] - SELECT * FROM select_prepaid WHERE trans_id = 188
[16:52:18] - SELECT * FROM select_fixed_asset WHERE trans_id = 188
[16:52:18] - SELECT * FROM select_checks WHERE trans_id = 188
[16:52:18] - SELECT * FROM trans_header_particular WHERE trans_id = 188
[16:52:24] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:52:24] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:52:24] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:52:24] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:52:25] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:52:25] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:52:27] - SELECT * FROM lib_erp_department
[16:52:27] - SELECT * FROM lib_erp_project
[16:52:27] - SELECT * FROM lib_erp_chart WHERE account_id = 46
[16:52:28] - SELECT a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id ,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based ,a.general_id,a.ref_jbooks_id,a.line_remarks ,b.ref_no,b.ref_date,d.general_name,d.general_code ,IF(a.debit > e.credit,'Partially Paid',IF(a.debit = e.credit,'Fully Paid','')) as status ,IF(a.debit > e.credit,e.credit,IF(a.debit = e.credit,a.debit,0)) AS minimum ,f.terms_id,IFNULL(f.nodays,0) AS nodays,f.dr_no,f.si_no,f.po_no ,g.terms_code,g.terms_name ,h.currency_code,h.currency_name ,c.account_code,c.account_name ,a.project_unit_no_id AS unit_id,i.project_unit_no_codes AS unit_code,i.project_unit_no_names AS unit_name FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_chart c ON c.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_general d ON d.general_id = a.general_id LEFT JOIN (    SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.debit) AS debit,SUM(a.credit) AS credit     FROM trans_jbooks a     LEFT JOIN trans_header b ON b.trans_id = a.trans_id     WHERE ref_jbooks_id IS NOT NULL AND (b.status <> 'C' OR b.status IS NULL)     GROUP BY a.ref_jbooks_id ) e ON e.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar f ON f.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms g ON g.terms_id = f.terms_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no i ON i.project_unit_no_id = a.project_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no j ON j.book_unit_no_id = a.book_unit_no_id WHERE c.validation = 2 AND a.trans_id = 30 AND a.account_id = 46
                AND IFNULL(a.project_id,'') = '9' AND IFNULL(a.department_id,'') = '8'
[16:52:28] - SELECT a.currency_code,a.currency_name FROM lib_erp_currency a WHERE a.currency_id = 1
[16:52:35] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[16:52:35] - SELECT trans_id FROM trans_header WHERE currency_id = 1 AND book_id = 11 AND trans_date = '2017-12-31' AND journal_id = 8
[16:52:35] - SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation <> 3 AND b.validation <> 2 UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 3 GROUP BY a.account_id,a.project_id,a.department_id UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 2 GROUP BY a.account_id,a.project_id,a.department_id ORDER BY account_code ASC 
[16:52:35] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:52:35] - SELECT * FROM lib_erp_currency_rate WHERE currency_id = 1 AND effectivitydate <= '2017-12-31' ORDER BY effectivitydate DESC LIMIT 1
[16:52:37] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:52:37] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:52:38] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:52:38] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:52:38] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:52:38] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:52:38] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:52:38] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:52:38] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:52:38] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:52:39] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:52:41] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:52:41] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:52:41] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:52:42] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:52:42] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:52:44] - SELECT * FROM lib_erp_department
[16:52:44] - SELECT * FROM lib_erp_project
[16:52:44] - SELECT * FROM lib_erp_chart WHERE account_id = 190
[16:52:44] - SELECT a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id ,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based ,a.general_id,a.ref_jbooks_id,a.line_remarks ,b.ref_no,b.ref_date,d.general_name,d.general_code ,IF(a.credit > e.debit,'Partially Paid',IF(a.credit = e.debit,'Fully Paid','')) as status ,IF(a.credit > e.debit,e.debit,IF(a.credit = e.debit,a.credit,0)) AS minimum ,f.terms_id,IFNULL(f.nodays,0) AS nodays,f.si_no,f.rr_no,f.po_no ,g.terms_code,g.terms_name ,h.currency_code,h.currency_name ,c.account_code,c.account_name ,a.project_unit_no_id AS unit_id,i.project_unit_no_codes AS unit_code,i.project_unit_no_names AS unit_name FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_chart c ON c.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_general d ON d.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.debit) AS debit,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE ref_jbooks_id IS NOT NULL AND (b.status <> 'C' OR b.status IS NULL) GROUP BY a.ref_jbooks_id ) e ON e.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ap f ON f.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms g ON g.terms_id = f.terms_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no i ON i.project_unit_no_id = a.project_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no j ON j.book_unit_no_id = a.book_unit_no_id WHERE c.validation = 3 AND a.trans_id = 30 AND a.account_id = 190  AND a.project_id = '9' AND a.department_id = '8'
[16:52:45] - SELECT a.currency_code,a.currency_name FROM lib_erp_currency a WHERE a.currency_id = 1
[16:53:43] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:53:43] - SELECT trans_id FROM trans_header WHERE currency_id = 1 AND book_id = 11 AND trans_date = '2017-12-31' AND journal_id = 8
[16:53:44] - SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation <> 3 AND b.validation <> 2 UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 3 GROUP BY a.account_id,a.project_id,a.department_id UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 2 GROUP BY a.account_id,a.project_id,a.department_id ORDER BY account_code ASC 
[16:53:44] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:53:44] - SELECT * FROM lib_erp_currency_rate WHERE currency_id = 1 AND effectivitydate <= '2017-12-31' ORDER BY effectivitydate DESC LIMIT 1
[16:53:47] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-03' ORDER BY a.trans_no ASC 
[16:53:47] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '1893'
            
[16:53:47] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 1893
[16:53:48] - SELECT * FROM select_ewt WHERE trans_id = 1893
[16:53:48] - SELECT * FROM select_final_tax WHERE trans_id = 1893
[16:53:48] - SELECT * FROM select_input_vat WHERE trans_id = 1893
[16:53:48] - SELECT * FROM select_output_vat WHERE trans_id = 1893
[16:53:48] - SELECT * FROM select_prepaid WHERE trans_id = 1893
[16:53:48] - SELECT * FROM select_fixed_asset WHERE trans_id = 1893
[16:53:48] - SELECT * FROM select_checks WHERE trans_id = 1893
[16:53:49] - SELECT * FROM trans_header_particular WHERE trans_id = 1893
[16:53:55] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-03' ORDER BY a.trans_no ASC 
[16:53:55] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '225'
            
[16:53:55] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 225
[16:53:56] - SELECT * FROM select_ewt WHERE trans_id = 225
[16:53:56] - SELECT * FROM select_final_tax WHERE trans_id = 225
[16:53:56] - SELECT * FROM select_input_vat WHERE trans_id = 225
[16:53:56] - SELECT * FROM select_output_vat WHERE trans_id = 225
[16:53:56] - SELECT * FROM select_prepaid WHERE trans_id = 225
[16:53:56] - SELECT * FROM select_fixed_asset WHERE trans_id = 225
[16:53:56] - SELECT * FROM select_checks WHERE trans_id = 225
[16:53:56] - SELECT * FROM trans_header_particular WHERE trans_id = 225
[16:54:07] - SELECT * FROM lib_erp_chart WHERE account_id = '4'
[16:54:08] - SELECT * FROM lib_erp_chart WHERE account_id = '4'
[16:54:09] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:54:09] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:54:09] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:54:09] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:54:09] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:54:09] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:54:09] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:54:09] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:54:09] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:54:10] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:54:11] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:54:11] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:54:11] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:54:12] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:54:12] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:54:13] - SELECT * FROM lib_erp_department
[16:54:14] - SELECT * FROM lib_erp_project
[16:54:14] - SELECT * FROM lib_erp_chart WHERE account_id = 190
[16:54:14] - SELECT a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id ,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based ,a.general_id,a.ref_jbooks_id,a.line_remarks ,b.ref_no,b.ref_date,d.general_name,d.general_code ,IF(a.credit > e.debit,'Partially Paid',IF(a.credit = e.debit,'Fully Paid','')) as status ,IF(a.credit > e.debit,e.debit,IF(a.credit = e.debit,a.credit,0)) AS minimum ,f.terms_id,IFNULL(f.nodays,0) AS nodays,f.si_no,f.rr_no,f.po_no ,g.terms_code,g.terms_name ,h.currency_code,h.currency_name ,c.account_code,c.account_name ,a.project_unit_no_id AS unit_id,i.project_unit_no_codes AS unit_code,i.project_unit_no_names AS unit_name FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_chart c ON c.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_general d ON d.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.debit) AS debit,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE ref_jbooks_id IS NOT NULL AND (b.status <> 'C' OR b.status IS NULL) GROUP BY a.ref_jbooks_id ) e ON e.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ap f ON f.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms g ON g.terms_id = f.terms_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no i ON i.project_unit_no_id = a.project_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no j ON j.book_unit_no_id = a.book_unit_no_id WHERE c.validation = 3 AND a.trans_id = 30 AND a.account_id = 190  AND a.project_id = '9' AND a.department_id = '8'
[16:54:14] - SELECT a.currency_code,a.currency_name FROM lib_erp_currency a WHERE a.currency_id = 1
[16:55:05] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:55:05] - SELECT trans_id FROM trans_header WHERE currency_id = 1 AND book_id = 11 AND trans_date = '2017-12-31' AND journal_id = 8
[16:55:05] - SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation <> 3 AND b.validation <> 2 UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 3 GROUP BY a.account_id,a.project_id,a.department_id UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 2 GROUP BY a.account_id,a.project_id,a.department_id ORDER BY account_code ASC 
[16:55:06] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:55:06] - SELECT * FROM lib_erp_currency_rate WHERE currency_id = 1 AND effectivitydate <= '2017-12-31' ORDER BY effectivitydate DESC LIMIT 1
[16:55:14] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-03' ORDER BY a.trans_no ASC 
[16:55:14] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '2877'
            
[16:55:14] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 2877
[16:55:15] - SELECT * FROM select_ewt WHERE trans_id = 2877
[16:55:15] - SELECT * FROM select_final_tax WHERE trans_id = 2877
[16:55:15] - SELECT * FROM select_input_vat WHERE trans_id = 2877
[16:55:15] - SELECT * FROM select_output_vat WHERE trans_id = 2877
[16:55:15] - SELECT * FROM select_prepaid WHERE trans_id = 2877
[16:55:15] - SELECT * FROM select_fixed_asset WHERE trans_id = 2877
[16:55:16] - SELECT * FROM select_checks WHERE trans_id = 2877
[16:55:16] - SELECT * FROM trans_header_particular WHERE trans_id = 2877
[16:55:47] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:55:47] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:55:47] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:55:47] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:55:47] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:55:47] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:55:47] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:55:48] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:55:48] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:55:48] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:55:49] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:55:50] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:55:50] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:55:50] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:55:51] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:55:51] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:55:53] - SELECT * FROM lib_erp_department
[16:55:53] - SELECT * FROM lib_erp_project
[16:55:53] - SELECT * FROM lib_erp_chart WHERE account_id = 190
[16:55:53] - SELECT a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id ,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based ,a.general_id,a.ref_jbooks_id,a.line_remarks ,b.ref_no,b.ref_date,d.general_name,d.general_code ,IF(a.credit > e.debit,'Partially Paid',IF(a.credit = e.debit,'Fully Paid','')) as status ,IF(a.credit > e.debit,e.debit,IF(a.credit = e.debit,a.credit,0)) AS minimum ,f.terms_id,IFNULL(f.nodays,0) AS nodays,f.si_no,f.rr_no,f.po_no ,g.terms_code,g.terms_name ,h.currency_code,h.currency_name ,c.account_code,c.account_name ,a.project_unit_no_id AS unit_id,i.project_unit_no_codes AS unit_code,i.project_unit_no_names AS unit_name FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_chart c ON c.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_general d ON d.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.debit) AS debit,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE ref_jbooks_id IS NOT NULL AND (b.status <> 'C' OR b.status IS NULL) GROUP BY a.ref_jbooks_id ) e ON e.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ap f ON f.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms g ON g.terms_id = f.terms_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no i ON i.project_unit_no_id = a.project_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no j ON j.book_unit_no_id = a.book_unit_no_id WHERE c.validation = 3 AND a.trans_id = 30 AND a.account_id = 190  AND a.project_id = '9' AND a.department_id = '8'
[16:55:54] - SELECT a.currency_code,a.currency_name FROM lib_erp_currency a WHERE a.currency_id = 1
[16:55:58] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:55:58] - SELECT trans_id FROM trans_header WHERE currency_id = 1 AND book_id = 11 AND trans_date = '2017-12-31' AND journal_id = 8
[16:55:58] - SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation <> 3 AND b.validation <> 2 UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 3 GROUP BY a.account_id,a.project_id,a.department_id UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 2 GROUP BY a.account_id,a.project_id,a.department_id ORDER BY account_code ASC 
[16:55:58] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:55:58] - SELECT * FROM lib_erp_currency_rate WHERE currency_id = 1 AND effectivitydate <= '2017-12-31' ORDER BY effectivitydate DESC LIMIT 1
[16:55:59] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:55:59] - SELECT * FROM lib_erp_chart WHERE account_id = '6'
[16:55:59] - SELECT * FROM lib_erp_chart WHERE account_id = '6'
[16:56:00] - SELECT * FROM lib_erp_chart WHERE account_id = '6'
[16:56:00] - SELECT * FROM lib_erp_chart WHERE account_id = '6'
[16:56:00] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:56:00] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:56:00] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:56:01] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:56:02] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:56:03] - SELECT * FROM lib_erp_department
[16:56:03] - SELECT * FROM lib_erp_project
[16:56:03] - SELECT * FROM lib_erp_chart WHERE account_id = 437
[16:56:04] - SELECT a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id ,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based ,a.general_id,a.ref_jbooks_id,a.line_remarks ,b.ref_no,b.ref_date,d.general_name,d.general_code ,IF(a.debit > e.credit,'Partially Paid',IF(a.debit = e.credit,'Fully Paid','')) as status ,IF(a.debit > e.credit,e.credit,IF(a.debit = e.credit,a.debit,0)) AS minimum ,f.terms_id,IFNULL(f.nodays,0) AS nodays,f.dr_no,f.si_no,f.po_no ,g.terms_code,g.terms_name ,h.currency_code,h.currency_name ,c.account_code,c.account_name ,a.project_unit_no_id AS unit_id,i.project_unit_no_codes AS unit_code,i.project_unit_no_names AS unit_name FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_chart c ON c.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_general d ON d.general_id = a.general_id LEFT JOIN (    SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.debit) AS debit,SUM(a.credit) AS credit     FROM trans_jbooks a     LEFT JOIN trans_header b ON b.trans_id = a.trans_id     WHERE ref_jbooks_id IS NOT NULL AND (b.status <> 'C' OR b.status IS NULL)     GROUP BY a.ref_jbooks_id ) e ON e.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar f ON f.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms g ON g.terms_id = f.terms_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no i ON i.project_unit_no_id = a.project_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no j ON j.book_unit_no_id = a.book_unit_no_id WHERE c.validation = 2 AND a.trans_id = 30 AND a.account_id = 437
                AND IFNULL(a.project_id,'') = '9' AND IFNULL(a.department_id,'') = '8'
[16:56:04] - SELECT a.currency_code,a.currency_name FROM lib_erp_currency a WHERE a.currency_id = 1
[16:56:10] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[16:56:10] - SELECT trans_id FROM trans_header WHERE currency_id = 1 AND book_id = 11 AND trans_date = '2017-12-31' AND journal_id = 8
[16:56:10] - SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation <> 3 AND b.validation <> 2 UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 3 GROUP BY a.account_id,a.project_id,a.department_id UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 2 GROUP BY a.account_id,a.project_id,a.department_id ORDER BY account_code ASC 
[16:56:11] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:56:11] - SELECT * FROM lib_erp_currency_rate WHERE currency_id = 1 AND effectivitydate <= '2017-12-31' ORDER BY effectivitydate DESC LIMIT 1
[16:56:11] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:56:11] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:56:11] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:56:11] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:56:11] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:56:12] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:56:12] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:56:12] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:56:12] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:56:12] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:56:13] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:56:15] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:56:16] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:56:16] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:56:17] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:56:17] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:56:18] - SELECT * FROM lib_erp_department
[16:56:18] - SELECT * FROM lib_erp_project
[16:56:19] - SELECT * FROM lib_erp_chart WHERE account_id = 190
[16:56:19] - SELECT a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id ,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based ,a.general_id,a.ref_jbooks_id,a.line_remarks ,b.ref_no,b.ref_date,d.general_name,d.general_code ,IF(a.credit > e.debit,'Partially Paid',IF(a.credit = e.debit,'Fully Paid','')) as status ,IF(a.credit > e.debit,e.debit,IF(a.credit = e.debit,a.credit,0)) AS minimum ,f.terms_id,IFNULL(f.nodays,0) AS nodays,f.si_no,f.rr_no,f.po_no ,g.terms_code,g.terms_name ,h.currency_code,h.currency_name ,c.account_code,c.account_name ,a.project_unit_no_id AS unit_id,i.project_unit_no_codes AS unit_code,i.project_unit_no_names AS unit_name FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_chart c ON c.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_general d ON d.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.debit) AS debit,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE ref_jbooks_id IS NOT NULL AND (b.status <> 'C' OR b.status IS NULL) GROUP BY a.ref_jbooks_id ) e ON e.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ap f ON f.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms g ON g.terms_id = f.terms_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no i ON i.project_unit_no_id = a.project_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no j ON j.book_unit_no_id = a.book_unit_no_id WHERE c.validation = 3 AND a.trans_id = 30 AND a.account_id = 190  AND a.project_id = '9' AND a.department_id = '8'
[16:56:19] - SELECT a.currency_code,a.currency_name FROM lib_erp_currency a WHERE a.currency_id = 1
[16:57:03] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:57:03] - SELECT trans_id FROM trans_header WHERE currency_id = 1 AND book_id = 11 AND trans_date = '2017-12-31' AND journal_id = 8
[16:57:03] - SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation <> 3 AND b.validation <> 2 UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 3 GROUP BY a.account_id,a.project_id,a.department_id UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 2 GROUP BY a.account_id,a.project_id,a.department_id ORDER BY account_code ASC 
[16:57:03] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:57:03] - SELECT * FROM lib_erp_currency_rate WHERE currency_id = 1 AND effectivitydate <= '2017-12-31' ORDER BY effectivitydate DESC LIMIT 1
[16:57:07] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-02' ORDER BY a.trans_no ASC 
[16:57:08] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '1890'
            
[16:57:08] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 1890
[16:57:08] - SELECT * FROM select_ewt WHERE trans_id = 1890
[16:57:08] - SELECT * FROM select_final_tax WHERE trans_id = 1890
[16:57:08] - SELECT * FROM select_input_vat WHERE trans_id = 1890
[16:57:09] - SELECT * FROM select_output_vat WHERE trans_id = 1890
[16:57:09] - SELECT * FROM select_prepaid WHERE trans_id = 1890
[16:57:09] - SELECT * FROM select_fixed_asset WHERE trans_id = 1890
[16:57:09] - SELECT * FROM select_checks WHERE trans_id = 1890
[16:57:09] - SELECT * FROM trans_header_particular WHERE trans_id = 1890
[16:57:17] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-02' ORDER BY a.trans_no ASC 
[16:57:17] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '2996'
            
[16:57:17] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 2996
[16:57:18] - SELECT * FROM select_ewt WHERE trans_id = 2996
[16:57:18] - SELECT * FROM select_final_tax WHERE trans_id = 2996
[16:57:18] - SELECT * FROM select_input_vat WHERE trans_id = 2996
[16:57:18] - SELECT * FROM select_output_vat WHERE trans_id = 2996
[16:57:18] - SELECT * FROM select_prepaid WHERE trans_id = 2996
[16:57:18] - SELECT * FROM select_fixed_asset WHERE trans_id = 2996
[16:57:18] - SELECT * FROM select_checks WHERE trans_id = 2996
[16:57:18] - SELECT * FROM trans_header_particular WHERE trans_id = 2996
[16:57:36] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:57:36] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:57:36] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:57:36] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:57:36] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[16:57:36] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:57:37] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:57:37] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:57:37] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:57:37] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[16:57:38] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:57:40] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:57:40] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:57:40] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:57:42] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:57:42] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[16:57:44] - SELECT * FROM lib_erp_department
[16:57:44] - SELECT * FROM lib_erp_project
[16:57:44] - SELECT * FROM lib_erp_chart WHERE account_id = 190
[16:57:44] - SELECT a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id ,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based ,a.general_id,a.ref_jbooks_id,a.line_remarks ,b.ref_no,b.ref_date,d.general_name,d.general_code ,IF(a.credit > e.debit,'Partially Paid',IF(a.credit = e.debit,'Fully Paid','')) as status ,IF(a.credit > e.debit,e.debit,IF(a.credit = e.debit,a.credit,0)) AS minimum ,f.terms_id,IFNULL(f.nodays,0) AS nodays,f.si_no,f.rr_no,f.po_no ,g.terms_code,g.terms_name ,h.currency_code,h.currency_name ,c.account_code,c.account_name ,a.project_unit_no_id AS unit_id,i.project_unit_no_codes AS unit_code,i.project_unit_no_names AS unit_name FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_chart c ON c.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_general d ON d.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.debit) AS debit,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE ref_jbooks_id IS NOT NULL AND (b.status <> 'C' OR b.status IS NULL) GROUP BY a.ref_jbooks_id ) e ON e.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ap f ON f.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms g ON g.terms_id = f.terms_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no i ON i.project_unit_no_id = a.project_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no j ON j.book_unit_no_id = a.book_unit_no_id WHERE c.validation = 3 AND a.trans_id = 30 AND a.account_id = 190  AND a.project_id = '9' AND a.department_id = '8'
[16:57:45] - SELECT a.currency_code,a.currency_name FROM lib_erp_currency a WHERE a.currency_id = 1
[17:03:06] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[17:03:06] - SELECT trans_id FROM trans_header WHERE currency_id = 1 AND book_id = 11 AND trans_date = '2017-12-31' AND journal_id = 8
[17:03:06] - SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation <> 3 AND b.validation <> 2 UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 3 GROUP BY a.account_id,a.project_id,a.department_id UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 2 GROUP BY a.account_id,a.project_id,a.department_id ORDER BY account_code ASC 
[17:03:06] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:03:06] - SELECT * FROM lib_erp_currency_rate WHERE currency_id = 1 AND effectivitydate <= '2017-12-31' ORDER BY effectivitydate DESC LIMIT 1
[17:03:10] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:03:10] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:03:10] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:03:10] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:03:11] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:03:11] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[17:03:11] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[17:03:11] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[17:03:11] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[17:03:11] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[17:03:12] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[17:03:14] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[17:03:14] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[17:03:14] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[17:03:14] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[17:03:15] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[17:03:16] - SELECT * FROM lib_erp_department
[17:03:16] - SELECT * FROM lib_erp_project
[17:03:16] - SELECT * FROM lib_erp_chart WHERE account_id = 190
[17:03:16] - SELECT a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id ,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based ,a.general_id,a.ref_jbooks_id,a.line_remarks ,b.ref_no,b.ref_date,d.general_name,d.general_code ,IF(a.credit > e.debit,'Partially Paid',IF(a.credit = e.debit,'Fully Paid','')) as status ,IF(a.credit > e.debit,e.debit,IF(a.credit = e.debit,a.credit,0)) AS minimum ,f.terms_id,IFNULL(f.nodays,0) AS nodays,f.si_no,f.rr_no,f.po_no ,g.terms_code,g.terms_name ,h.currency_code,h.currency_name ,c.account_code,c.account_name ,a.project_unit_no_id AS unit_id,i.project_unit_no_codes AS unit_code,i.project_unit_no_names AS unit_name FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_chart c ON c.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_general d ON d.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.debit) AS debit,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE ref_jbooks_id IS NOT NULL AND (b.status <> 'C' OR b.status IS NULL) GROUP BY a.ref_jbooks_id ) e ON e.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ap f ON f.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms g ON g.terms_id = f.terms_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no i ON i.project_unit_no_id = a.project_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no j ON j.book_unit_no_id = a.book_unit_no_id WHERE c.validation = 3 AND a.trans_id = 30 AND a.account_id = 190  AND a.project_id = '9' AND a.department_id = '8'
[17:03:17] - SELECT a.currency_code,a.currency_name FROM lib_erp_currency a WHERE a.currency_id = 1
[17:05:27] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[17:05:27] - SELECT trans_id FROM trans_header WHERE currency_id = 1 AND book_id = 11 AND trans_date = '2017-12-31' AND journal_id = 8
[17:05:27] - SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation <> 3 AND b.validation <> 2 UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 3 GROUP BY a.account_id,a.project_id,a.department_id UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 2 GROUP BY a.account_id,a.project_id,a.department_id ORDER BY account_code ASC 
[17:05:27] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:05:28] - SELECT * FROM lib_erp_currency_rate WHERE currency_id = 1 AND effectivitydate <= '2017-12-31' ORDER BY effectivitydate DESC LIMIT 1
[17:05:38] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-11' ORDER BY a.trans_no ASC 
[17:05:38] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '9668'
            
[17:05:38] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 9668
[17:05:39] - SELECT * FROM select_ewt WHERE trans_id = 9668
[17:05:39] - SELECT * FROM select_final_tax WHERE trans_id = 9668
[17:05:39] - SELECT * FROM select_input_vat WHERE trans_id = 9668
[17:05:39] - SELECT * FROM select_output_vat WHERE trans_id = 9668
[17:05:39] - SELECT * FROM select_prepaid WHERE trans_id = 9668
[17:05:40] - SELECT * FROM select_fixed_asset WHERE trans_id = 9668
[17:05:40] - SELECT * FROM select_checks WHERE trans_id = 9668
[17:05:40] - SELECT * FROM trans_header_particular WHERE trans_id = 9668
[17:05:40] - SELECT * FROM lib_erp_chart WHERE account_id = '5'
[17:05:48] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-11' ORDER BY a.trans_no ASC 
[17:05:48] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '9676'
            
[17:05:48] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 9676
[17:05:49] - SELECT * FROM select_ewt WHERE trans_id = 9676
[17:05:49] - SELECT * FROM select_final_tax WHERE trans_id = 9676
[17:05:49] - SELECT * FROM select_input_vat WHERE trans_id = 9676
[17:05:49] - SELECT * FROM select_output_vat WHERE trans_id = 9676
[17:05:49] - SELECT * FROM select_prepaid WHERE trans_id = 9676
[17:05:49] - SELECT * FROM select_fixed_asset WHERE trans_id = 9676
[17:05:49] - SELECT * FROM select_checks WHERE trans_id = 9676
[17:05:50] - SELECT * FROM trans_header_particular WHERE trans_id = 9676
[17:05:56] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:05:58] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:05:58] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:05:58] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:05:58] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:05:58] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:05:58] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[17:05:58] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[17:05:58] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[17:05:59] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[17:05:59] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[17:06:01] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[17:06:03] - SELECT * FROM lib_erp_department
[17:06:03] - SELECT * FROM lib_erp_project
[17:06:03] - SELECT * FROM lib_erp_chart WHERE account_id = 190
[17:06:12] - SELECT a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id ,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based ,a.general_id,a.ref_jbooks_id,a.line_remarks ,b.ref_no,b.ref_date,d.general_name,d.general_code ,IF(a.credit > e.debit,'Partially Paid',IF(a.credit = e.debit,'Fully Paid','')) as status ,IF(a.credit > e.debit,e.debit,IF(a.credit = e.debit,a.credit,0)) AS minimum ,f.terms_id,IFNULL(f.nodays,0) AS nodays,f.si_no,f.rr_no,f.po_no ,g.terms_code,g.terms_name ,h.currency_code,h.currency_name ,c.account_code,c.account_name ,a.project_unit_no_id AS unit_id,i.project_unit_no_codes AS unit_code,i.project_unit_no_names AS unit_name FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_chart c ON c.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_general d ON d.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.debit) AS debit,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE ref_jbooks_id IS NOT NULL AND (b.status <> 'C' OR b.status IS NULL) GROUP BY a.ref_jbooks_id ) e ON e.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ap f ON f.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms g ON g.terms_id = f.terms_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no i ON i.project_unit_no_id = a.project_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no j ON j.book_unit_no_id = a.book_unit_no_id WHERE c.validation = 3 AND a.trans_id = 30 AND a.account_id = 190  AND a.project_id = '5' AND a.department_id = '8'
[17:06:13] - SELECT a.currency_code,a.currency_name FROM lib_erp_currency a WHERE a.currency_id = 1
[17:06:16] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[17:06:16] - SELECT trans_id FROM trans_header WHERE currency_id = 1 AND book_id = 11 AND trans_date = '2017-12-31' AND journal_id = 8
[17:06:16] - SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation <> 3 AND b.validation <> 2 UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 3 GROUP BY a.account_id,a.project_id,a.department_id UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 2 GROUP BY a.account_id,a.project_id,a.department_id ORDER BY account_code ASC 
[17:06:17] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:06:17] - SELECT * FROM lib_erp_currency_rate WHERE currency_id = 1 AND effectivitydate <= '2017-12-31' ORDER BY effectivitydate DESC LIMIT 1
[17:06:19] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:06:19] - SELECT * FROM lib_erp_chart WHERE account_id = '6'
[17:06:19] - SELECT * FROM lib_erp_chart WHERE account_id = '6'
[17:06:19] - SELECT * FROM lib_erp_chart WHERE account_id = '6'
[17:06:19] - SELECT * FROM lib_erp_chart WHERE account_id = '6'
[17:06:20] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[17:06:20] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[17:06:20] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[17:06:25] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '2109'
[17:06:26] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 2109
[17:06:26] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '2'
[17:06:26] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 2
[17:06:26] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '4'
[17:06:26] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 4
[17:06:26] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '4'
[17:06:26] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 4
[17:06:26] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '131'
[17:06:26] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 131
[17:06:26] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '159'
[17:06:26] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 159
[17:06:27] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '159'
[17:06:27] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 159
[17:06:27] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '1453'
[17:06:27] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 1453
[17:06:27] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '60'
[17:06:27] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 60
[17:06:27] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '60'
[17:06:27] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 60
[17:06:27] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '1453'
[17:06:27] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 1453
[17:06:27] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '757'
[17:06:28] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 757
[17:06:28] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '757'
[17:06:28] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 757
[17:06:28] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '757'
[17:06:28] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 757
[17:06:32] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '757'
[17:06:32] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 757
[17:06:32] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '92'
[17:06:32] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 92
[17:06:32] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '92'
[17:06:32] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 92
[17:06:32] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '1748'
[17:06:32] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 1748
[17:06:32] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '1748'
[17:06:32] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 1748
[17:06:32] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '757'
[17:06:33] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 757
[17:06:33] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '757'
[17:06:33] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 757
[17:06:33] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '757'
[17:06:33] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 757
[17:06:33] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '757'
[17:06:33] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 757
[17:06:33] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '757'
[17:06:33] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 757
[17:06:33] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '757'
[17:06:33] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 757
[17:06:33] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '757'
[17:06:34] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 757
[17:06:43] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[17:06:44] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[17:06:44] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[17:06:44] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[17:06:45] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[17:06:48] - SELECT * FROM lib_erp_department
[17:06:48] - SELECT * FROM lib_erp_project
[17:06:48] - SELECT * FROM lib_erp_chart WHERE account_id = 437
[17:06:48] - SELECT a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id ,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based ,a.general_id,a.ref_jbooks_id,a.line_remarks ,b.ref_no,b.ref_date,d.general_name,d.general_code ,IF(a.debit > e.credit,'Partially Paid',IF(a.debit = e.credit,'Fully Paid','')) as status ,IF(a.debit > e.credit,e.credit,IF(a.debit = e.credit,a.debit,0)) AS minimum ,f.terms_id,IFNULL(f.nodays,0) AS nodays,f.dr_no,f.si_no,f.po_no ,g.terms_code,g.terms_name ,h.currency_code,h.currency_name ,c.account_code,c.account_name ,a.project_unit_no_id AS unit_id,i.project_unit_no_codes AS unit_code,i.project_unit_no_names AS unit_name FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_chart c ON c.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_general d ON d.general_id = a.general_id LEFT JOIN (    SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.debit) AS debit,SUM(a.credit) AS credit     FROM trans_jbooks a     LEFT JOIN trans_header b ON b.trans_id = a.trans_id     WHERE ref_jbooks_id IS NOT NULL AND (b.status <> 'C' OR b.status IS NULL)     GROUP BY a.ref_jbooks_id ) e ON e.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar f ON f.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms g ON g.terms_id = f.terms_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no i ON i.project_unit_no_id = a.project_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no j ON j.book_unit_no_id = a.book_unit_no_id WHERE c.validation = 2 AND a.trans_id = 30 AND a.account_id = 437
                AND IFNULL(a.project_id,'') = '5' AND IFNULL(a.department_id,'') = '8'
[17:06:49] - SELECT a.currency_code,a.currency_name FROM lib_erp_currency a WHERE a.currency_id = 1
[17:06:53] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[17:06:53] - SELECT trans_id FROM trans_header WHERE currency_id = 1 AND book_id = 11 AND trans_date = '2017-12-31' AND journal_id = 8
[17:06:53] - SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation <> 3 AND b.validation <> 2 UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 3 GROUP BY a.account_id,a.project_id,a.department_id UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 2 GROUP BY a.account_id,a.project_id,a.department_id ORDER BY account_code ASC 
[17:06:53] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:06:53] - SELECT * FROM lib_erp_currency_rate WHERE currency_id = 1 AND effectivitydate <= '2017-12-31' ORDER BY effectivitydate DESC LIMIT 1
[17:06:54] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:06:54] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:06:54] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:06:54] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:06:54] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:06:54] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:07:00] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:07:00] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:07:01] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:07:01] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:07:01] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:07:03] - SELECT * FROM lib_erp_department
[17:07:03] - SELECT * FROM lib_erp_project
[17:07:03] - SELECT * FROM lib_erp_chart WHERE account_id = 46
[17:07:04] - SELECT a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id ,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based ,a.general_id,a.ref_jbooks_id,a.line_remarks ,b.ref_no,b.ref_date,d.general_name,d.general_code ,IF(a.debit > e.credit,'Partially Paid',IF(a.debit = e.credit,'Fully Paid','')) as status ,IF(a.debit > e.credit,e.credit,IF(a.debit = e.credit,a.debit,0)) AS minimum ,f.terms_id,IFNULL(f.nodays,0) AS nodays,f.dr_no,f.si_no,f.po_no ,g.terms_code,g.terms_name ,h.currency_code,h.currency_name ,c.account_code,c.account_name ,a.project_unit_no_id AS unit_id,i.project_unit_no_codes AS unit_code,i.project_unit_no_names AS unit_name FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_chart c ON c.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_general d ON d.general_id = a.general_id LEFT JOIN (    SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.debit) AS debit,SUM(a.credit) AS credit     FROM trans_jbooks a     LEFT JOIN trans_header b ON b.trans_id = a.trans_id     WHERE ref_jbooks_id IS NOT NULL AND (b.status <> 'C' OR b.status IS NULL)     GROUP BY a.ref_jbooks_id ) e ON e.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar f ON f.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms g ON g.terms_id = f.terms_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no i ON i.project_unit_no_id = a.project_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no j ON j.book_unit_no_id = a.book_unit_no_id WHERE c.validation = 2 AND a.trans_id = 30 AND a.account_id = 46
                AND IFNULL(a.project_id,'') = '5' AND IFNULL(a.department_id,'') = '8'
[17:07:04] - SELECT a.currency_code,a.currency_name FROM lib_erp_currency a WHERE a.currency_id = 1
[17:07:30] - SELECT a.trans_no AS ref_no,a.trans_date,d.book_code,e.account_code,e.account_name,b.debit,b.credit FROM trans_header a LEFT JOIN trans_jbooks b ON b.trans_id = a.trans_id LEFT JOIN trans_jbooks_ref c ON c.jbooks_id = b.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_book d ON d.book_id = a.book_id LEFT JOIN erp_fs_ngg.lib_erp_chart e ON e.account_id = b.account_id WHERE b.ref_jbooks_id = '40268' AND (a.status <> 'C' OR a.status IS NULL)
[17:07:30] - ExecuteWithParameter : get_offsetting_schedule
[17:07:30] - parameters : 'erp_accounting_ngg','erp_fs_ngg','40268'
[17:07:30] - Execution Time: 2019-07-23 17:07:30
[17:07:30] - Done Time: 2019-07-23 17:07:30
[17:07:46] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:07:46] - SELECT trans_id FROM trans_header WHERE currency_id = 1 AND book_id = 11 AND trans_date = '2017-12-31' AND journal_id = 8
[17:07:46] - SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation <> 3 AND b.validation <> 2 UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 3 GROUP BY a.account_id,a.project_id,a.department_id UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 2 GROUP BY a.account_id,a.project_id,a.department_id ORDER BY account_code ASC 
[17:07:46] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:07:46] - SELECT * FROM lib_erp_currency_rate WHERE currency_id = 1 AND effectivitydate <= '2017-12-31' ORDER BY effectivitydate DESC LIMIT 1
[17:07:50] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '9673'
            
[17:07:50] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 9673
[17:07:51] - SELECT * FROM select_ewt WHERE trans_id = 9673
[17:07:51] - SELECT * FROM select_final_tax WHERE trans_id = 9673
[17:07:51] - SELECT * FROM select_input_vat WHERE trans_id = 9673
[17:07:51] - SELECT * FROM select_output_vat WHERE trans_id = 9673
[17:07:51] - SELECT * FROM select_prepaid WHERE trans_id = 9673
[17:07:51] - SELECT * FROM select_fixed_asset WHERE trans_id = 9673
[17:07:51] - SELECT * FROM select_checks WHERE trans_id = 9673
[17:07:52] - SELECT * FROM trans_header_particular WHERE trans_id = 9673
[17:07:52] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '9676'
            
[17:07:52] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 9676
[17:07:52] - SELECT * FROM select_ewt WHERE trans_id = 9676
[17:07:52] - SELECT * FROM select_final_tax WHERE trans_id = 9676
[17:07:52] - SELECT * FROM select_input_vat WHERE trans_id = 9676
[17:07:53] - SELECT * FROM select_output_vat WHERE trans_id = 9676
[17:07:53] - SELECT * FROM select_prepaid WHERE trans_id = 9676
[17:07:53] - SELECT * FROM select_fixed_asset WHERE trans_id = 9676
[17:07:53] - SELECT * FROM select_checks WHERE trans_id = 9676
[17:07:53] - SELECT * FROM trans_header_particular WHERE trans_id = 9676
[17:07:56] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[17:07:58] - SELECT * FROM lib_erp_chart
[17:07:59] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 9676 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-11-20' AND a.trans_id <> 9676 AND a.general_id = 757 AND a.currency_id = 1 AND a.project_id  = 5 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[17:08:04] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-11' ORDER BY a.trans_no ASC 
[17:08:04] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '9676'
            
[17:08:04] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 9676
[17:08:04] - SELECT * FROM select_ewt WHERE trans_id = 9676
[17:08:05] - SELECT * FROM select_final_tax WHERE trans_id = 9676
[17:08:05] - SELECT * FROM select_input_vat WHERE trans_id = 9676
[17:08:05] - SELECT * FROM select_output_vat WHERE trans_id = 9676
[17:08:05] - SELECT * FROM select_prepaid WHERE trans_id = 9676
[17:08:05] - SELECT * FROM select_fixed_asset WHERE trans_id = 9676
[17:08:05] - SELECT * FROM select_checks WHERE trans_id = 9676
[17:08:05] - SELECT * FROM trans_header_particular WHERE trans_id = 9676
[17:08:29] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:08:29] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:08:29] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:08:29] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:08:29] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:08:30] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:08:30] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:08:30] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:08:30] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:08:30] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:08:33] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:08:33] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:08:33] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:08:34] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:08:35] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:08:36] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:08:36] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:08:37] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:08:37] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:08:37] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:08:37] - SELECT * FROM lib_erp_chart WHERE account_id = '437'
[17:08:38] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:08:38] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:08:39] - SELECT * FROM lib_erp_department
[17:08:40] - SELECT * FROM lib_erp_project
[17:08:40] - SELECT * FROM lib_erp_chart WHERE account_id = 46
[17:08:40] - SELECT a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id ,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based ,a.general_id,a.ref_jbooks_id,a.line_remarks ,b.ref_no,b.ref_date,d.general_name,d.general_code ,IF(a.debit > e.credit,'Partially Paid',IF(a.debit = e.credit,'Fully Paid','')) as status ,IF(a.debit > e.credit,e.credit,IF(a.debit = e.credit,a.debit,0)) AS minimum ,f.terms_id,IFNULL(f.nodays,0) AS nodays,f.dr_no,f.si_no,f.po_no ,g.terms_code,g.terms_name ,h.currency_code,h.currency_name ,c.account_code,c.account_name ,a.project_unit_no_id AS unit_id,i.project_unit_no_codes AS unit_code,i.project_unit_no_names AS unit_name FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_chart c ON c.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_general d ON d.general_id = a.general_id LEFT JOIN (    SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.debit) AS debit,SUM(a.credit) AS credit     FROM trans_jbooks a     LEFT JOIN trans_header b ON b.trans_id = a.trans_id     WHERE ref_jbooks_id IS NOT NULL AND (b.status <> 'C' OR b.status IS NULL)     GROUP BY a.ref_jbooks_id ) e ON e.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar f ON f.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms g ON g.terms_id = f.terms_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no i ON i.project_unit_no_id = a.project_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no j ON j.book_unit_no_id = a.book_unit_no_id WHERE c.validation = 2 AND a.trans_id = 30 AND a.account_id = 46
                AND IFNULL(a.project_id,'') = '5' AND IFNULL(a.department_id,'') = '8'
[17:08:40] - SELECT a.currency_code,a.currency_name FROM lib_erp_currency a WHERE a.currency_id = 1
[17:22:15] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:22:15] - SELECT trans_id FROM trans_header WHERE currency_id = 1 AND book_id = 11 AND trans_date = '2017-12-31' AND journal_id = 8
[17:22:15] - SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation <> 3 AND b.validation <> 2 UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 3 GROUP BY a.account_id,a.project_id,a.department_id UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 2 GROUP BY a.account_id,a.project_id,a.department_id ORDER BY account_code ASC 
[17:22:15] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:22:16] - SELECT * FROM lib_erp_currency_rate WHERE currency_id = 1 AND effectivitydate <= '2017-12-31' ORDER BY effectivitydate DESC LIMIT 1
[17:22:20] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-01' ORDER BY a.trans_no ASC 
[17:22:20] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '1891'
            
[17:22:20] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 1891
[17:22:21] - SELECT * FROM select_ewt WHERE trans_id = 1891
[17:22:21] - SELECT * FROM select_final_tax WHERE trans_id = 1891
[17:22:21] - SELECT * FROM select_input_vat WHERE trans_id = 1891
[17:22:21] - SELECT * FROM select_output_vat WHERE trans_id = 1891
[17:22:21] - SELECT * FROM select_prepaid WHERE trans_id = 1891
[17:22:21] - SELECT * FROM select_fixed_asset WHERE trans_id = 1891
[17:22:22] - SELECT * FROM select_checks WHERE trans_id = 1891
[17:22:22] - SELECT * FROM trans_header_particular WHERE trans_id = 1891
[17:22:29] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-01' ORDER BY a.trans_no ASC 
[17:22:29] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '637'
            
[17:22:29] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 637
[17:22:30] - SELECT * FROM select_ewt WHERE trans_id = 637
[17:22:30] - SELECT * FROM select_final_tax WHERE trans_id = 637
[17:22:30] - SELECT * FROM select_input_vat WHERE trans_id = 637
[17:22:30] - SELECT * FROM select_output_vat WHERE trans_id = 637
[17:22:30] - SELECT * FROM select_prepaid WHERE trans_id = 637
[17:22:31] - SELECT * FROM select_fixed_asset WHERE trans_id = 637
[17:22:31] - SELECT * FROM select_checks WHERE trans_id = 637
[17:22:31] - SELECT * FROM trans_header_particular WHERE trans_id = 637
[17:22:33] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[17:22:36] - SELECT * FROM lib_erp_chart
[17:22:38] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[17:22:38] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 637 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-1-30' AND a.trans_id <> 637 AND a.general_id = 1259 AND a.currency_id = 1 AND a.project_id  = 8 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[17:22:45] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-01' ORDER BY a.trans_no ASC 
[17:22:46] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '637'
            
[17:22:46] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 637
[17:22:46] - SELECT * FROM select_ewt WHERE trans_id = 637
[17:22:46] - SELECT * FROM select_final_tax WHERE trans_id = 637
[17:22:46] - SELECT * FROM select_input_vat WHERE trans_id = 637
[17:22:46] - SELECT * FROM select_output_vat WHERE trans_id = 637
[17:22:47] - SELECT * FROM select_prepaid WHERE trans_id = 637
[17:22:47] - SELECT * FROM select_fixed_asset WHERE trans_id = 637
[17:22:47] - SELECT * FROM select_checks WHERE trans_id = 637
[17:22:47] - SELECT * FROM trans_header_particular WHERE trans_id = 637
[17:22:53] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-01' ORDER BY a.trans_no ASC 
[17:22:53] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '578'
            
[17:22:53] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 578
[17:22:54] - SELECT * FROM select_ewt WHERE trans_id = 578
[17:22:54] - SELECT * FROM select_final_tax WHERE trans_id = 578
[17:22:54] - SELECT * FROM select_input_vat WHERE trans_id = 578
[17:22:54] - SELECT * FROM select_output_vat WHERE trans_id = 578
[17:22:54] - SELECT * FROM select_prepaid WHERE trans_id = 578
[17:22:54] - SELECT * FROM select_fixed_asset WHERE trans_id = 578
[17:22:54] - SELECT * FROM select_checks WHERE trans_id = 578
[17:22:55] - SELECT * FROM trans_header_particular WHERE trans_id = 578
[17:22:55] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[17:22:56] - SELECT * FROM lib_erp_chart
[17:23:00] - SELECT * FROM lib_erp_chart
[17:23:03] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[17:23:03] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 578 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-1-22' AND a.trans_id <> 578 AND a.general_id = 544 AND a.currency_id = 1 AND a.project_id  = 8 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[17:23:48] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-01' ORDER BY a.trans_no ASC 
[17:23:48] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '578'
            
[17:23:48] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 578
[17:23:49] - SELECT * FROM select_ewt WHERE trans_id = 578
[17:23:49] - SELECT * FROM select_final_tax WHERE trans_id = 578
[17:23:49] - SELECT * FROM select_input_vat WHERE trans_id = 578
[17:23:49] - SELECT * FROM select_output_vat WHERE trans_id = 578
[17:23:49] - SELECT * FROM select_prepaid WHERE trans_id = 578
[17:23:49] - SELECT * FROM select_fixed_asset WHERE trans_id = 578
[17:23:50] - SELECT * FROM select_checks WHERE trans_id = 578
[17:23:50] - SELECT * FROM trans_header_particular WHERE trans_id = 578
[17:23:56] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[17:23:57] - SELECT * FROM lib_erp_chart
[17:24:00] - SELECT * FROM lib_erp_chart
[17:24:04] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[17:24:05] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 578 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-1-22' AND a.trans_id <> 578 AND a.general_id = 544 AND a.currency_id = 1 AND a.project_id  = 8 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[17:24:12] - SEL: jbooks_id = '' AND ref_jbooks_id = '40258' , FOUND: 0
[17:24:13] - SELECT MAX(IFNULL(isLock,False)) AS isLock FROM transaction_locking WHERE journal_id = '2' AND '2018-01-22' BETWEEN date_from AND date_to
[17:24:13] - SELECT trans_no AS existing FROM trans_header WHERE trans_no = '98446' AND trans_id <> '578' AND journal_id = '2'
[17:24:24] - SELECT MAX(IFNULL(isLock,False)) AS isLock FROM transaction_locking WHERE journal_id = '2' AND '2018-01-22' BETWEEN date_from AND date_to
[17:24:24] - SELECT trans_no AS existing FROM trans_header WHERE trans_no = '98446' AND trans_id <> '578' AND journal_id = '2'
[17:24:24] - CALL SaveTransaction('Update','trans_header','trans_id,trans_no,trans_date,book_id,journal_id,general_id,currency_id,exchange_rate,based_rate,amount,amount_based,description','578|98446|2018-01-22|11|2|544|1|1.0000000000|1.0000000000|13581.4700000000|13581.4700000000|MA FOR JAN 2018|','trans_id','578','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:24:24] - CALL SaveTransaction('Update','trans_header_cr','trans_cr_id,trans_id,si_no','355|578||','trans_cr_id','355','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:24:24] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','3373|578|8|8||||3|MA FOR JAN 2018|13581.4700000000|0.0000000000|1|1.0000000000|1.0000000000|13581.4700000000|0.0000000000|||','jbooks_id','3373','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:24:24] - CALL SaveTransaction('Remove','trans_jbooks','','3374|','jbooks_id','3374|','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:24:25] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','3375|578|8|8||||416|MA FOR JAN 2018|0.0000000000|7631.2700000000|1|1.0000000000|1.0000000000|0.0000000000|7631.2700000000|||','jbooks_id','3375','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:24:25] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','6880|578|8|8||||223||0.0000000000|69.4800000000|1|1.0000000000|1.0000000000|0.0000000000|69.4800000000|10|5839|','jbooks_id','6880','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:24:25] - CALL SaveTransaction('Insert','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','|578|8|8|||1885|46||0.0|5880.72|1|1.0000000000|1.0000000000|0|5880.72|544|40258|','jbooks_id','','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:24:25] - SELECT jbooks_id AS id FROM trans_jbooks WHERE   ROUND(trans_id,2) = ROUND(578,2)  AND  ROUND(project_id,2) = ROUND(8,2)  AND  ROUND(department_id,2) = ROUND(8,2)  AND  ROUND(project_unit_no_id,2) = ROUND(1885,2)  AND  ROUND(account_id,2) = ROUND(46,2)  AND  ROUND(debit,2) = ROUND(0.0,2)  AND  ROUND(credit,2) = ROUND(5880.72,2)  AND  ROUND(currency_id,2) = ROUND(1,2)  AND  ROUND(exchange_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(based_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(credit_based,2) = ROUND(5880.72,2)  AND  ROUND(general_id,2) = ROUND(544,2)  AND  ROUND(ref_jbooks_id,2) = ROUND(40258,2) 
[17:24:25] - CALL SaveTransaction('Update','trans_checks','check_id,jbooks_id,general_id,check_no,check_date,check_amount,check_amount_based,bank_id,bank_code,bank_name,cleared,released,cancelled,crossed,replacement_check_no,cleared_date,deposit_date,cancel_date,replaced,currency_id,exchange_rate,based_rate','2109|3373|544|7151610|2018-01-20|13581.4700000000|13581.4700000000|54|||0|0|0|0||2018-01-22|2018-01-22|2018-01-22|0|1|1.0000000000|1.0000000000|','check_id','2109','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:24:25] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-01' ORDER BY a.trans_no ASC 
[17:24:26] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '578'
            
[17:24:26] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 578
[17:24:26] - SELECT * FROM select_ewt WHERE trans_id = 578
[17:24:26] - SELECT * FROM select_final_tax WHERE trans_id = 578
[17:24:26] - SELECT * FROM select_input_vat WHERE trans_id = 578
[17:24:27] - SELECT * FROM select_output_vat WHERE trans_id = 578
[17:24:27] - SELECT * FROM select_prepaid WHERE trans_id = 578
[17:24:27] - SELECT * FROM select_fixed_asset WHERE trans_id = 578
[17:24:27] - SELECT * FROM select_checks WHERE trans_id = 578
[17:24:27] - SELECT * FROM trans_header_particular WHERE trans_id = 578
[17:24:39] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[17:24:40] - SELECT * FROM lib_erp_chart
[17:24:45] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '8'
[17:24:45] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '8'
[17:24:47] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 578 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-1-22' AND a.trans_id <> 578 AND a.general_id = 544 AND a.currency_id = 1 AND a.project_id  = 8 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[17:24:50] - SEL: jbooks_id = '49569' AND ref_jbooks_id = '40258' , FOUND: 1
[17:24:58] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-01' ORDER BY a.trans_no ASC 
[17:24:59] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '578'
            
[17:24:59] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 578
[17:24:59] - SELECT * FROM select_ewt WHERE trans_id = 578
[17:24:59] - SELECT * FROM select_final_tax WHERE trans_id = 578
[17:24:59] - SELECT * FROM select_input_vat WHERE trans_id = 578
[17:25:00] - SELECT * FROM select_output_vat WHERE trans_id = 578
[17:25:00] - SELECT * FROM select_prepaid WHERE trans_id = 578
[17:25:00] - SELECT * FROM select_fixed_asset WHERE trans_id = 578
[17:25:00] - SELECT * FROM select_checks WHERE trans_id = 578
[17:25:00] - SELECT * FROM trans_header_particular WHERE trans_id = 578
[17:25:00] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[17:25:08] - SELECT * FROM lib_erp_chart
[17:25:13] - SELECT * FROM lib_erp_project
[17:25:17] - SELECT * FROM lib_erp_department
[17:25:18] - SELECT * FROM lib_erp_department
[17:25:19] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:20] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:21] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:22] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:23] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:24] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:24] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:26] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:26] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:26] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:26] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:26] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:27] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:27] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:27] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:27] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:27] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:27] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:27] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:27] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:27] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:28] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:28] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:28] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:28] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:28] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:28] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:28] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:28] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:28] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:28] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:29] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:36] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:38] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:38] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:39] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:39] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:39] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:39] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:39] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:39] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:39] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:39] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:40] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:40] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:40] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:40] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:40] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:40] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:40] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:40] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:41] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:41] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:41] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:41] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:41] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:41] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:41] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:41] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:42] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:42] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:42] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:42] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:42] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:25:44] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-01' ORDER BY a.trans_no ASC 
[17:25:45] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '578'
            
[17:25:45] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 578
[17:25:45] - SELECT * FROM select_ewt WHERE trans_id = 578
[17:25:45] - SELECT * FROM select_final_tax WHERE trans_id = 578
[17:25:45] - SELECT * FROM select_input_vat WHERE trans_id = 578
[17:25:45] - SELECT * FROM select_output_vat WHERE trans_id = 578
[17:25:46] - SELECT * FROM select_prepaid WHERE trans_id = 578
[17:25:46] - SELECT * FROM select_fixed_asset WHERE trans_id = 578
[17:25:46] - SELECT * FROM select_checks WHERE trans_id = 578
[17:25:46] - SELECT * FROM trans_header_particular WHERE trans_id = 578
[17:26:04] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:26:04] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:26:04] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:26:04] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:26:04] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:26:04] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:26:05] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:26:05] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:26:05] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:26:05] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:26:05] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:26:05] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:26:07] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:26:08] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:26:08] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:26:08] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:26:09] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:26:10] - SELECT * FROM lib_erp_department
[17:26:10] - SELECT * FROM lib_erp_project
[17:26:10] - SELECT * FROM lib_erp_chart WHERE account_id = 46
[17:26:10] - SELECT a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id ,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based ,a.general_id,a.ref_jbooks_id,a.line_remarks ,b.ref_no,b.ref_date,d.general_name,d.general_code ,IF(a.debit > e.credit,'Partially Paid',IF(a.debit = e.credit,'Fully Paid','')) as status ,IF(a.debit > e.credit,e.credit,IF(a.debit = e.credit,a.debit,0)) AS minimum ,f.terms_id,IFNULL(f.nodays,0) AS nodays,f.dr_no,f.si_no,f.po_no ,g.terms_code,g.terms_name ,h.currency_code,h.currency_name ,c.account_code,c.account_name ,a.project_unit_no_id AS unit_id,i.project_unit_no_codes AS unit_code,i.project_unit_no_names AS unit_name FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_chart c ON c.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_general d ON d.general_id = a.general_id LEFT JOIN (    SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.debit) AS debit,SUM(a.credit) AS credit     FROM trans_jbooks a     LEFT JOIN trans_header b ON b.trans_id = a.trans_id     WHERE ref_jbooks_id IS NOT NULL AND (b.status <> 'C' OR b.status IS NULL)     GROUP BY a.ref_jbooks_id ) e ON e.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar f ON f.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms g ON g.terms_id = f.terms_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no i ON i.project_unit_no_id = a.project_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no j ON j.book_unit_no_id = a.book_unit_no_id WHERE c.validation = 2 AND a.trans_id = 30 AND a.account_id = 46
                AND IFNULL(a.project_id,'') = '8' AND IFNULL(a.department_id,'') = '8'
[17:26:11] - SELECT a.currency_code,a.currency_name FROM lib_erp_currency a WHERE a.currency_id = 1
[17:26:24] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:26:24] - SELECT trans_id FROM trans_header WHERE currency_id = 1 AND book_id = 11 AND trans_date = '2017-12-31' AND journal_id = 8
[17:26:24] - SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation <> 3 AND b.validation <> 2 UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 3 GROUP BY a.account_id,a.project_id,a.department_id UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 2 GROUP BY a.account_id,a.project_id,a.department_id ORDER BY account_code ASC 
[17:26:25] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:26:25] - SELECT * FROM lib_erp_currency_rate WHERE currency_id = 1 AND effectivitydate <= '2017-12-31' ORDER BY effectivitydate DESC LIMIT 1
[17:26:27] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[17:26:28] - SELECT * FROM lib_erp_chart
[17:26:34] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '8'
[17:26:34] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '8'
[17:26:35] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 578 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-1-22' AND a.trans_id <> 578 AND a.general_id = 544 AND a.currency_id = 1 AND a.project_id  = 8 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[17:26:39] - SEL: jbooks_id = '49569' AND ref_jbooks_id = '40258' , FOUND: 1
[17:26:43] - SELECT MAX(IFNULL(isLock,False)) AS isLock FROM transaction_locking WHERE journal_id = '2' AND '2018-01-22' BETWEEN date_from AND date_to
[17:26:44] - SELECT trans_no AS existing FROM trans_header WHERE trans_no = '98446' AND trans_id <> '578' AND journal_id = '2'
[17:26:44] - CALL SaveTransaction('Update','trans_header','trans_id,trans_no,trans_date,book_id,journal_id,general_id,currency_id,exchange_rate,based_rate,amount,amount_based,description','578|98446|2018-01-22|11|2|544|1|1.0000000000|1.0000000000|13581.4700000000|13581.4700000000|MA FOR JAN 2018|','trans_id','578','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:26:44] - CALL SaveTransaction('Update','trans_header_cr','trans_cr_id,trans_id,si_no','355|578||','trans_cr_id','355','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:26:44] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','3373|578|8|8||||3|MA FOR JAN 2018|13581.4700000000|0.0000000000|1|1.0000000000|1.0000000000|13581.4700000000|0.0000000000|||','jbooks_id','3373','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:26:44] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','3375|578|8|8||||416|MA FOR JAN 2018|0.0000000000|7631.2700000000|1|1.0000000000|1.0000000000|0.0000000000|7631.2700000000|||','jbooks_id','3375','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:26:44] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','6880|578|8|8||||223||0.0000000000|69.4800000000|1|1.0000000000|1.0000000000|0.0000000000|69.4800000000|10|5839|','jbooks_id','6880','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:26:44] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','49569|578|8|8|||1885|46||0.0000000000|5880.7200000000|1|1.0000000000|1.0000000000|0.0000000000|5880.7200000000|544||','jbooks_id','49569','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:26:44] - CALL SaveTransaction('Update','trans_checks','check_id,jbooks_id,general_id,check_no,check_date,check_amount,check_amount_based,bank_id,bank_code,bank_name,cleared,released,cancelled,crossed,replacement_check_no,cleared_date,deposit_date,cancel_date,replaced,currency_id,exchange_rate,based_rate','2109|3373|544|7151610|2018-01-20|13581.4700000000|13581.4700000000|54|||0|0|0|0||2018-01-22|2018-01-22|2018-01-22|0|1|1.0000000000|1.0000000000|','check_id','2109','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:26:44] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-01' ORDER BY a.trans_no ASC 
[17:26:45] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '578'
            
[17:26:45] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 578
[17:26:45] - SELECT * FROM select_ewt WHERE trans_id = 578
[17:26:46] - SELECT * FROM select_final_tax WHERE trans_id = 578
[17:26:46] - SELECT * FROM select_input_vat WHERE trans_id = 578
[17:26:46] - SELECT * FROM select_output_vat WHERE trans_id = 578
[17:26:46] - SELECT * FROM select_prepaid WHERE trans_id = 578
[17:26:46] - SELECT * FROM select_fixed_asset WHERE trans_id = 578
[17:26:46] - SELECT * FROM select_checks WHERE trans_id = 578
[17:26:46] - SELECT * FROM trans_header_particular WHERE trans_id = 578
[17:26:47] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[17:26:49] - SELECT * FROM lib_erp_chart
[17:26:56] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '8'
[17:26:56] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '8'
[17:26:58] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 578 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-1-22' AND a.trans_id <> 578 AND a.general_id = 544 AND a.currency_id = 1 AND a.project_id  = 8 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[17:27:05] - SEL: jbooks_id = '' AND ref_jbooks_id = '40258' , FOUND: 0
[17:27:18] - SELECT MAX(IFNULL(isLock,False)) AS isLock FROM transaction_locking WHERE journal_id = '2' AND '2018-01-22' BETWEEN date_from AND date_to
[17:27:18] - SELECT trans_no AS existing FROM trans_header WHERE trans_no = '98446' AND trans_id <> '578' AND journal_id = '2'
[17:27:18] - CALL SaveTransaction('Update','trans_header','trans_id,trans_no,trans_date,book_id,journal_id,general_id,currency_id,exchange_rate,based_rate,amount,amount_based,description','578|98446|2018-01-22|11|2|544|1|1.0000000000|1.0000000000|13581.4700000000|13581.4700000000|MA FOR JAN 2018|','trans_id','578','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:27:18] - CALL SaveTransaction('Update','trans_header_cr','trans_cr_id,trans_id,si_no','355|578||','trans_cr_id','355','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:27:18] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','3373|578|8|8||||3|MA FOR JAN 2018|13581.4700000000|0.0000000000|1|1.0000000000|1.0000000000|13581.4700000000|0.0000000000|||','jbooks_id','3373','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:27:19] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','3375|578|8|8||||416|MA FOR JAN 2018|0.0000000000|7631.2700000000|1|1.0000000000|1.0000000000|0.0000000000|7631.2700000000|||','jbooks_id','3375','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:27:19] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','6880|578|8|8||||223||0.0000000000|69.4800000000|1|1.0000000000|1.0000000000|0.0000000000|69.4800000000|10|5839|','jbooks_id','6880','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:27:19] - CALL SaveTransaction('Remove','trans_jbooks','','49569|','jbooks_id','49569|','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:27:19] - CALL SaveTransaction('Insert','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','|578|8|8|||1885|46||0.0|5880.72|1|1.0000000000|1.0000000000|0|5880.72|544|40258|','jbooks_id','','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:27:19] - SELECT jbooks_id AS id FROM trans_jbooks WHERE   ROUND(trans_id,2) = ROUND(578,2)  AND  ROUND(project_id,2) = ROUND(8,2)  AND  ROUND(department_id,2) = ROUND(8,2)  AND  ROUND(project_unit_no_id,2) = ROUND(1885,2)  AND  ROUND(account_id,2) = ROUND(46,2)  AND  ROUND(debit,2) = ROUND(0.0,2)  AND  ROUND(credit,2) = ROUND(5880.72,2)  AND  ROUND(currency_id,2) = ROUND(1,2)  AND  ROUND(exchange_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(based_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(credit_based,2) = ROUND(5880.72,2)  AND  ROUND(general_id,2) = ROUND(544,2)  AND  ROUND(ref_jbooks_id,2) = ROUND(40258,2) 
[17:27:19] - CALL SaveTransaction('Update','trans_checks','check_id,jbooks_id,general_id,check_no,check_date,check_amount,check_amount_based,bank_id,bank_code,bank_name,cleared,released,cancelled,crossed,replacement_check_no,cleared_date,deposit_date,cancel_date,replaced,currency_id,exchange_rate,based_rate','2109|3373|544|7151610|2018-01-20|13581.4700000000|13581.4700000000|54|||0|0|0|0||2018-01-22|2018-01-22|2018-01-22|0|1|1.0000000000|1.0000000000|','check_id','2109','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:27:19] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-01' ORDER BY a.trans_no ASC 
[17:27:20] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '578'
            
[17:27:20] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 578
[17:27:20] - SELECT * FROM select_ewt WHERE trans_id = 578
[17:27:20] - SELECT * FROM select_final_tax WHERE trans_id = 578
[17:27:21] - SELECT * FROM select_input_vat WHERE trans_id = 578
[17:27:21] - SELECT * FROM select_output_vat WHERE trans_id = 578
[17:27:21] - SELECT * FROM select_prepaid WHERE trans_id = 578
[17:27:21] - SELECT * FROM select_fixed_asset WHERE trans_id = 578
[17:27:21] - SELECT * FROM select_checks WHERE trans_id = 578
[17:27:21] - SELECT * FROM trans_header_particular WHERE trans_id = 578
[17:27:34] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '646'
            
[17:27:34] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 646
[17:27:35] - SELECT * FROM select_ewt WHERE trans_id = 646
[17:27:35] - SELECT * FROM select_final_tax WHERE trans_id = 646
[17:27:35] - SELECT * FROM select_input_vat WHERE trans_id = 646
[17:27:35] - SELECT * FROM select_output_vat WHERE trans_id = 646
[17:27:35] - SELECT * FROM select_prepaid WHERE trans_id = 646
[17:27:35] - SELECT * FROM select_fixed_asset WHERE trans_id = 646
[17:27:35] - SELECT * FROM select_checks WHERE trans_id = 646
[17:27:36] - SELECT * FROM trans_header_particular WHERE trans_id = 646
[17:28:07] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-01' ORDER BY a.trans_no ASC 
[17:28:07] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '637'
            
[17:28:07] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 637
[17:28:08] - SELECT * FROM select_ewt WHERE trans_id = 637
[17:28:08] - SELECT * FROM select_final_tax WHERE trans_id = 637
[17:28:08] - SELECT * FROM select_input_vat WHERE trans_id = 637
[17:28:08] - SELECT * FROM select_output_vat WHERE trans_id = 637
[17:28:08] - SELECT * FROM select_prepaid WHERE trans_id = 637
[17:28:08] - SELECT * FROM select_fixed_asset WHERE trans_id = 637
[17:28:09] - SELECT * FROM select_checks WHERE trans_id = 637
[17:28:09] - SELECT * FROM trans_header_particular WHERE trans_id = 637
[17:28:27] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[17:28:28] - SELECT * FROM lib_erp_chart
[17:28:35] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '8'
[17:28:35] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '8'
[17:28:36] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 637 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-1-30' AND a.trans_id <> 637 AND a.general_id = 1259 AND a.currency_id = 1 AND a.project_id  = 8 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[17:28:42] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-01' ORDER BY a.trans_no ASC 
[17:28:42] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '637'
            
[17:28:43] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 637
[17:28:43] - SELECT * FROM select_ewt WHERE trans_id = 637
[17:28:43] - SELECT * FROM select_final_tax WHERE trans_id = 637
[17:28:43] - SELECT * FROM select_input_vat WHERE trans_id = 637
[17:28:43] - SELECT * FROM select_output_vat WHERE trans_id = 637
[17:28:44] - SELECT * FROM select_prepaid WHERE trans_id = 637
[17:28:44] - SELECT * FROM select_fixed_asset WHERE trans_id = 637
[17:28:44] - SELECT * FROM select_checks WHERE trans_id = 637
[17:28:44] - SELECT * FROM trans_header_particular WHERE trans_id = 637
[17:28:54] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:28:54] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:28:54] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:28:54] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:28:54] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:28:54] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:28:54] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:28:54] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:28:55] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:28:55] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:28:55] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:28:55] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:29:01] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:29:03] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:29:03] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:29:03] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:29:03] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:29:05] - SELECT * FROM lib_erp_department
[17:29:05] - SELECT * FROM lib_erp_project
[17:29:05] - SELECT * FROM lib_erp_chart WHERE account_id = 46
[17:29:08] - SELECT a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id ,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based ,a.general_id,a.ref_jbooks_id,a.line_remarks ,b.ref_no,b.ref_date,d.general_name,d.general_code ,IF(a.debit > e.credit,'Partially Paid',IF(a.debit = e.credit,'Fully Paid','')) as status ,IF(a.debit > e.credit,e.credit,IF(a.debit = e.credit,a.debit,0)) AS minimum ,f.terms_id,IFNULL(f.nodays,0) AS nodays,f.dr_no,f.si_no,f.po_no ,g.terms_code,g.terms_name ,h.currency_code,h.currency_name ,c.account_code,c.account_name ,a.project_unit_no_id AS unit_id,i.project_unit_no_codes AS unit_code,i.project_unit_no_names AS unit_name FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_chart c ON c.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_general d ON d.general_id = a.general_id LEFT JOIN (    SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.debit) AS debit,SUM(a.credit) AS credit     FROM trans_jbooks a     LEFT JOIN trans_header b ON b.trans_id = a.trans_id     WHERE ref_jbooks_id IS NOT NULL AND (b.status <> 'C' OR b.status IS NULL)     GROUP BY a.ref_jbooks_id ) e ON e.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar f ON f.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms g ON g.terms_id = f.terms_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no i ON i.project_unit_no_id = a.project_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no j ON j.book_unit_no_id = a.book_unit_no_id WHERE c.validation = 2 AND a.trans_id = 30 AND a.account_id = 46
                AND IFNULL(a.project_id,'') = '8' AND IFNULL(a.department_id,'') = '8'
[17:29:08] - SELECT a.currency_code,a.currency_name FROM lib_erp_currency a WHERE a.currency_id = 1
[17:29:21] - SELECT ref_no FROM trans_jbooks_ref WHERE ref_no = '1-2001-B24-L13' AND jbooks_id <> '39473'
[17:29:29] - SELECT * FROM lib_erp_general ORDER BY FIELD(category_id,1,2),general_code ASC 
[17:29:29] - SELECT a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id ,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based ,a.general_id,a.ref_jbooks_id,a.line_remarks ,b.ref_no,b.ref_date,d.general_name,d.general_code ,IF(a.debit > e.credit,'Partially Paid',IF(a.debit = e.credit,'Fully Paid','')) as status ,IF(a.debit > e.credit,e.credit,IF(a.debit = e.credit,a.debit,0)) AS minimum ,f.terms_id,IFNULL(f.nodays,0) AS nodays,f.dr_no,f.si_no,f.po_no ,g.terms_code,g.terms_name ,h.currency_code,h.currency_name ,c.account_code,c.account_name ,a.project_unit_no_id AS unit_id,i.project_unit_no_codes AS unit_code,i.project_unit_no_names AS unit_name FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_chart c ON c.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_general d ON d.general_id = a.general_id LEFT JOIN (    SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.debit) AS debit,SUM(a.credit) AS credit     FROM trans_jbooks a     LEFT JOIN trans_header b ON b.trans_id = a.trans_id     WHERE ref_jbooks_id IS NOT NULL AND (b.status <> 'C' OR b.status IS NULL)     GROUP BY a.ref_jbooks_id ) e ON e.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar f ON f.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms g ON g.terms_id = f.terms_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no i ON i.project_unit_no_id = a.project_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no j ON j.book_unit_no_id = a.book_unit_no_id WHERE c.validation = 2 AND a.trans_id = 30 AND a.account_id = 46
                AND IFNULL(a.project_id,'') = '8' AND IFNULL(a.department_id,'') = '8'
[17:29:29] - SELECT a.currency_code,a.currency_name FROM lib_erp_currency a WHERE a.currency_id = 1
[17:30:00] - SELECT ref_no FROM trans_jbooks_ref WHERE ref_no = '1-2001-B1-L4' AND jbooks_id <> '40068'
[17:30:00] - SELECT a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id ,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based ,a.general_id,a.ref_jbooks_id,a.line_remarks ,b.ref_no,b.ref_date,d.general_name,d.general_code ,IF(a.debit > e.credit,'Partially Paid',IF(a.debit = e.credit,'Fully Paid','')) as status ,IF(a.debit > e.credit,e.credit,IF(a.debit = e.credit,a.debit,0)) AS minimum ,f.terms_id,IFNULL(f.nodays,0) AS nodays,f.dr_no,f.si_no,f.po_no ,g.terms_code,g.terms_name ,h.currency_code,h.currency_name ,c.account_code,c.account_name ,a.project_unit_no_id AS unit_id,i.project_unit_no_codes AS unit_code,i.project_unit_no_names AS unit_name FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_chart c ON c.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_general d ON d.general_id = a.general_id LEFT JOIN (    SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.debit) AS debit,SUM(a.credit) AS credit     FROM trans_jbooks a     LEFT JOIN trans_header b ON b.trans_id = a.trans_id     WHERE ref_jbooks_id IS NOT NULL AND (b.status <> 'C' OR b.status IS NULL)     GROUP BY a.ref_jbooks_id ) e ON e.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar f ON f.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms g ON g.terms_id = f.terms_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no i ON i.project_unit_no_id = a.project_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no j ON j.book_unit_no_id = a.book_unit_no_id WHERE c.validation = 2 AND a.trans_id = 30 AND a.account_id = 46
                AND IFNULL(a.project_id,'') = '8' AND IFNULL(a.department_id,'') = '8'
[17:30:01] - SELECT a.currency_code,a.currency_name FROM lib_erp_currency a WHERE a.currency_id = 1
[17:30:03] - SELECT * FROM lib_erp_chart WHERE account_id = '46'
[17:30:03] - SELECT trans_id FROM trans_header WHERE currency_id = 1 AND book_id = 11 AND trans_date = '2017-12-31' AND journal_id = 8
[17:30:03] - SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation <> 3 AND b.validation <> 2 UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 3 GROUP BY a.account_id,a.project_id,a.department_id UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 2 GROUP BY a.account_id,a.project_id,a.department_id ORDER BY account_code ASC 
[17:30:03] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[17:30:03] - SELECT * FROM lib_erp_currency_rate WHERE currency_id = 1 AND effectivitydate <= '2017-12-31' ORDER BY effectivitydate DESC LIMIT 1
[17:30:06] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[17:30:07] - SELECT * FROM lib_erp_chart
[17:30:14] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '8'
[17:30:14] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '8'
[17:30:14] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 637 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-1-30' AND a.trans_id <> 637 AND a.general_id = 1259 AND a.currency_id = 1 AND a.project_id  = 8 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[17:30:31] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-01' ORDER BY a.trans_no ASC 
[17:30:32] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '637'
            
[17:30:32] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 637
[17:30:32] - SELECT * FROM select_ewt WHERE trans_id = 637
[17:30:32] - SELECT * FROM select_final_tax WHERE trans_id = 637
[17:30:32] - SELECT * FROM select_input_vat WHERE trans_id = 637
[17:30:32] - SELECT * FROM select_output_vat WHERE trans_id = 637
[17:30:33] - SELECT * FROM select_prepaid WHERE trans_id = 637
[17:30:33] - SELECT * FROM select_fixed_asset WHERE trans_id = 637
[17:30:33] - SELECT * FROM select_checks WHERE trans_id = 637
[17:30:33] - SELECT * FROM trans_header_particular WHERE trans_id = 637
[17:30:33] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[17:30:40] - SELECT * FROM lib_erp_chart
[17:30:41] - SELECT * FROM lib_erp_project
[17:30:45] - SELECT * FROM lib_erp_department
[17:30:46] - SELECT * FROM lib_erp_department
[17:30:48] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:30:49] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:30:50] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:30:51] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:30:51] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:30:51] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:30:51] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:30:51] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:30:51] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:30:51] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:30:51] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:30:52] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:30:52] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:30:52] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:30:52] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:30:52] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:30:52] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:30:52] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:30:52] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:30:52] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:30:53] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:30:53] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:30:53] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:30:53] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:30:53] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:30:53] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:30:53] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:30:53] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:30:53] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:30:54] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:31:01] - SELECT * FROM lib_erp_project
[17:31:05] - SELECT * FROM lib_erp_department
[17:31:12] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '8'
[17:31:12] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '8'
[17:31:14] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[17:31:15] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 637 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-1-30' AND a.trans_id <> 637 AND a.general_id = 1259 AND a.currency_id = 1 AND a.project_id  = 8 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[17:31:24] - SEL: jbooks_id = '' AND ref_jbooks_id = '39473' , FOUND: 0
[17:31:25] - SELECT MAX(IFNULL(isLock,False)) AS isLock FROM transaction_locking WHERE journal_id = '2' AND '2018-01-30' BETWEEN date_from AND date_to
[17:31:25] - SELECT trans_no AS existing FROM trans_header WHERE trans_no = '99760' AND trans_id <> '637' AND journal_id = '2'
[17:31:25] - CALL SaveTransaction('Update','trans_header','trans_id,trans_no,trans_date,book_id,journal_id,general_id,currency_id,exchange_rate,based_rate,amount,amount_based,description','637|99760|2018-01-30|11|2|1259|1|1.0000000000|1.0000000000|17031.7900000000|17031.7900000000|MA FOR JAN 2018|','trans_id','637','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:31:25] - CALL SaveTransaction('Update','trans_header_cr','trans_cr_id,trans_id,si_no','394|637||','trans_cr_id','394','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:31:26] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','3596|637|8|8||||31|MA FOR JAN 2018|17031.7900000000|0.0000000000|1|1.0000000000|1.0000000000|17031.7900000000|0.0000000000|||','jbooks_id','3596','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:31:26] - CALL SaveTransaction('Remove','trans_jbooks','','3597|','jbooks_id','3597|','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:31:26] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','3598|637|8|8||||416|MA FOR JAN 2018|0.0000000000|14194.2800000000|1|1.0000000000|1.0000000000|0.0000000000|14194.2800000000|||','jbooks_id','3598','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:31:26] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','7235|637|8|8||||223||0.0000000000|448.0000000000|1|1.0000000000|1.0000000000|0.0000000000|448.0000000000|10|5839|','jbooks_id','7235','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:31:26] - CALL SaveTransaction('Insert','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','|637|8|8|||2254|46||0.0|2389.51|1|1.0000000000|1.0000000000|0|2389.51|1259|39473|','jbooks_id','','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:31:26] - SELECT jbooks_id AS id FROM trans_jbooks WHERE   ROUND(trans_id,2) = ROUND(637,2)  AND  ROUND(project_id,2) = ROUND(8,2)  AND  ROUND(department_id,2) = ROUND(8,2)  AND  ROUND(project_unit_no_id,2) = ROUND(2254,2)  AND  ROUND(account_id,2) = ROUND(46,2)  AND  ROUND(debit,2) = ROUND(0.0,2)  AND  ROUND(credit,2) = ROUND(2389.51,2)  AND  ROUND(currency_id,2) = ROUND(1,2)  AND  ROUND(exchange_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(based_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(credit_based,2) = ROUND(2389.51,2)  AND  ROUND(general_id,2) = ROUND(1259,2)  AND  ROUND(ref_jbooks_id,2) = ROUND(39473,2) 
[17:31:30] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-01' ORDER BY a.trans_no ASC 
[17:31:31] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '637'
            
[17:31:31] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 637
[17:31:31] - SELECT * FROM select_ewt WHERE trans_id = 637
[17:31:32] - SELECT * FROM select_final_tax WHERE trans_id = 637
[17:31:32] - SELECT * FROM select_input_vat WHERE trans_id = 637
[17:31:32] - SELECT * FROM select_output_vat WHERE trans_id = 637
[17:31:32] - SELECT * FROM select_prepaid WHERE trans_id = 637
[17:31:32] - SELECT * FROM select_fixed_asset WHERE trans_id = 637
[17:31:32] - SELECT * FROM select_checks WHERE trans_id = 637
[17:31:32] - SELECT * FROM trans_header_particular WHERE trans_id = 637
[17:31:58] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-01' ORDER BY a.trans_no ASC 
[17:31:58] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '640'
            
[17:31:59] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 640
[17:31:59] - SELECT * FROM select_ewt WHERE trans_id = 640
[17:31:59] - SELECT * FROM select_final_tax WHERE trans_id = 640
[17:31:59] - SELECT * FROM select_input_vat WHERE trans_id = 640
[17:31:59] - SELECT * FROM select_output_vat WHERE trans_id = 640
[17:31:59] - SELECT * FROM select_prepaid WHERE trans_id = 640
[17:32:00] - SELECT * FROM select_fixed_asset WHERE trans_id = 640
[17:32:00] - SELECT * FROM select_checks WHERE trans_id = 640
[17:32:00] - SELECT * FROM trans_header_particular WHERE trans_id = 640
[17:32:02] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[17:32:15] - SELECT * FROM lib_erp_chart
[17:32:17] - SELECT * FROM lib_erp_project
[17:32:23] - SELECT * FROM lib_erp_department
[17:32:25] - SELECT * FROM lib_erp_department
[17:32:27] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '8'
[17:32:44] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '8'
[17:32:54] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[17:32:54] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 640 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-1-3' AND a.trans_id <> 640 AND a.general_id = 1259 AND a.currency_id = 1 AND a.project_id  = 8 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[17:33:01] - SEL: jbooks_id = '' AND ref_jbooks_id = '39473' , FOUND: 0
[17:33:03] - SELECT MAX(IFNULL(isLock,False)) AS isLock FROM transaction_locking WHERE journal_id = '2' AND '2018-01-03' BETWEEN date_from AND date_to
[17:33:03] - SELECT trans_no AS existing FROM trans_header WHERE trans_no = '97613' AND trans_id <> '640' AND journal_id = '2'
[17:33:03] - CALL SaveTransaction('Update','trans_header','trans_id,trans_no,trans_date,book_id,journal_id,general_id,currency_id,exchange_rate,based_rate,amount,amount_based,description','640|97613|2018-01-03|11|2|1259|1|1.0000000000|1.0000000000|17031.7900000000|17031.7900000000|MA FOR DEC 2018|','trans_id','640','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:33:03] - CALL SaveTransaction('Update','trans_header_cr','trans_cr_id,trans_id,si_no','396|640||','trans_cr_id','396','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:33:04] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','3606|640|8|8||||31||17031.7900000000|0.0000000000|1|1.0000000000|1.0000000000|17031.7900000000|0.0000000000|||','jbooks_id','3606','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:33:04] - CALL SaveTransaction('Remove','trans_jbooks','','3607|','jbooks_id','3607|','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:33:04] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','3608|640|8|8||||416|MA FOR DEC 2018|0.0000000000|14221.8300000000|1|1.0000000000|1.0000000000|0.0000000000|14221.8300000000|||','jbooks_id','3608','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:33:04] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','7229|640|8|8||||223||0.0000000000|448.0000000000|1|1.0000000000|1.0000000000|0.0000000000|448.0000000000|10|5839|','jbooks_id','7229','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:33:04] - CALL SaveTransaction('Insert','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','|640|8|8|||2254|46||0.0|2361.96|1|1.0000000000|1.0000000000|0|2361.96|1259|39473|','jbooks_id','','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:33:04] - SELECT jbooks_id AS id FROM trans_jbooks WHERE   ROUND(trans_id,2) = ROUND(640,2)  AND  ROUND(project_id,2) = ROUND(8,2)  AND  ROUND(department_id,2) = ROUND(8,2)  AND  ROUND(project_unit_no_id,2) = ROUND(2254,2)  AND  ROUND(account_id,2) = ROUND(46,2)  AND  ROUND(debit,2) = ROUND(0.0,2)  AND  ROUND(credit,2) = ROUND(2361.96,2)  AND  ROUND(currency_id,2) = ROUND(1,2)  AND  ROUND(exchange_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(based_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(credit_based,2) = ROUND(2361.96,2)  AND  ROUND(general_id,2) = ROUND(1259,2)  AND  ROUND(ref_jbooks_id,2) = ROUND(39473,2) 
[17:33:04] - CALL SaveTransaction('Update','trans_checks','check_id,jbooks_id,general_id,check_no,check_date,check_amount,check_amount_based,bank_id,bank_code,bank_name,cleared,released,cancelled,crossed,replacement_check_no,cleared_date,deposit_date,cancel_date,replaced,currency_id,exchange_rate,based_rate','2173|3606|1259|5012458|2017-12-30|17031.7900000000|17031.7900000000|51|||0|0|0|0||2018-01-03|2018-01-03|2018-01-03|0|1|1.0000000000|1.0000000000|','check_id','2173','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:33:04] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-01' ORDER BY a.trans_no ASC 
[17:33:05] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '640'
            
[17:33:05] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 640
[17:33:05] - SELECT * FROM select_ewt WHERE trans_id = 640
[17:33:06] - SELECT * FROM select_final_tax WHERE trans_id = 640
[17:33:06] - SELECT * FROM select_input_vat WHERE trans_id = 640
[17:33:06] - SELECT * FROM select_output_vat WHERE trans_id = 640
[17:33:06] - SELECT * FROM select_prepaid WHERE trans_id = 640
[17:33:06] - SELECT * FROM select_fixed_asset WHERE trans_id = 640
[17:33:06] - SELECT * FROM select_checks WHERE trans_id = 640
[17:33:06] - SELECT * FROM trans_header_particular WHERE trans_id = 640
[17:43:09] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-01' ORDER BY a.trans_no ASC 
[17:43:10] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '674'
            
[17:43:10] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 674
[17:43:10] - SELECT * FROM select_ewt WHERE trans_id = 674
[17:43:11] - SELECT * FROM select_final_tax WHERE trans_id = 674
[17:43:11] - SELECT * FROM select_input_vat WHERE trans_id = 674
[17:43:11] - SELECT * FROM select_output_vat WHERE trans_id = 674
[17:43:11] - SELECT * FROM select_prepaid WHERE trans_id = 674
[17:43:11] - SELECT * FROM select_fixed_asset WHERE trans_id = 674
[17:43:11] - SELECT * FROM select_checks WHERE trans_id = 674
[17:43:11] - SELECT * FROM trans_header_particular WHERE trans_id = 674
[17:43:15] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[17:43:24] - SELECT * FROM lib_erp_chart
[17:43:24] - SELECT * FROM lib_erp_project
[17:43:28] - SELECT * FROM lib_erp_department
[17:43:29] - SELECT * FROM lib_erp_department
[17:43:31] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:43:32] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:43:33] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:43:33] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:43:34] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:43:34] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:43:34] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:43:34] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:43:34] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:43:34] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:43:34] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:43:34] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:43:35] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:43:35] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:43:35] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:43:35] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:43:35] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:43:35] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:43:35] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:43:35] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:43:35] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:43:35] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:43:36] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:43:36] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:43:36] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:43:36] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:43:36] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:43:36] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:43:36] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:43:36] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:43:36] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:43:36] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:43:38] - SELECT * FROM lib_erp_project
[17:43:44] - SELECT * FROM lib_erp_department
[17:43:44] - SELECT * FROM lib_erp_department
[17:43:44] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '8'
[17:43:52] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '8'
[17:43:53] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '8'
[17:43:57] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[17:43:58] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 674 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-1-2' AND a.trans_id <> 674 AND a.general_id = 1033 AND a.currency_id = 1 AND a.project_id  = 8 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[17:44:20] - SEL: jbooks_id = '' AND ref_jbooks_id = '39461' , FOUND: 0
[17:44:24] - SELECT MAX(IFNULL(isLock,False)) AS isLock FROM transaction_locking WHERE journal_id = '2' AND '2018-01-02' BETWEEN date_from AND date_to
[17:44:24] - SELECT trans_no AS existing FROM trans_header WHERE trans_no = '97571' AND trans_id <> '674' AND journal_id = '2'
[17:44:24] - CALL SaveTransaction('Update','trans_header','trans_id,trans_no,trans_date,book_id,journal_id,general_id,currency_id,exchange_rate,based_rate,amount,amount_based,description','674|97571|2018-01-02|11|2|1033|1|1.0000000000|1.0000000000|17646.4000000000|17646.4000000000|MA FOR DEC 2017|','trans_id','674','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:44:24] - CALL SaveTransaction('Update','trans_header_cr','trans_cr_id,trans_id,si_no','416|674||','trans_cr_id','416','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:44:24] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','3725|674|8|8||||26|MA FOR DEC 2017|17646.4000000000|0.0000000000|1|1.0000000000|1.0000000000|17646.4000000000|0.0000000000|||','jbooks_id','3725','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:44:24] - CALL SaveTransaction('Remove','trans_jbooks','','3726|','jbooks_id','3726|','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:44:25] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','3727|674|8|8||||416|MA FOR DEC 2017|0.0000000000|10919.1000000000|1|1.0000000000|1.0000000000|0.0000000000|10919.1000000000|||','jbooks_id','3727','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:44:25] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','7296|674|8|8||||223||0.0000000000|433.0000000000|1|1.0000000000|1.0000000000|0.0000000000|433.0000000000|10|5839|','jbooks_id','7296','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:44:25] - CALL SaveTransaction('Insert','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','|674|8|8|||2270|46||0.0|6294.3|1|1.0000000000|1.0000000000|0|6294.3|1033|39461|','jbooks_id','','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:44:25] - SELECT jbooks_id AS id FROM trans_jbooks WHERE   ROUND(trans_id,2) = ROUND(674,2)  AND  ROUND(project_id,2) = ROUND(8,2)  AND  ROUND(department_id,2) = ROUND(8,2)  AND  ROUND(project_unit_no_id,2) = ROUND(2270,2)  AND  ROUND(account_id,2) = ROUND(46,2)  AND  ROUND(debit,2) = ROUND(0.0,2)  AND  ROUND(credit,2) = ROUND(6294.3,2)  AND  ROUND(currency_id,2) = ROUND(1,2)  AND  ROUND(exchange_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(based_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(credit_based,2) = ROUND(6294.3,2)  AND  ROUND(general_id,2) = ROUND(1033,2)  AND  ROUND(ref_jbooks_id,2) = ROUND(39461,2) 
[17:44:25] - CALL SaveTransaction('Update','trans_checks','check_id,jbooks_id,general_id,check_no,check_date,check_amount,check_amount_based,bank_id,bank_code,bank_name,cleared,released,cancelled,crossed,replacement_check_no,cleared_date,deposit_date,cancel_date,replaced,currency_id,exchange_rate,based_rate','2207|3725|1033|66858|2018-01-02|17646.4000000000|17646.4000000000|77|||0|0|0|0||2018-01-02|2018-01-02|2018-01-02|0|1|1.0000000000|1.0000000000|','check_id','2207','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:44:25] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-01' ORDER BY a.trans_no ASC 
[17:44:26] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '674'
            
[17:44:26] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 674
[17:44:26] - SELECT * FROM select_ewt WHERE trans_id = 674
[17:44:26] - SELECT * FROM select_final_tax WHERE trans_id = 674
[17:44:27] - SELECT * FROM select_input_vat WHERE trans_id = 674
[17:44:27] - SELECT * FROM select_output_vat WHERE trans_id = 674
[17:44:27] - SELECT * FROM select_prepaid WHERE trans_id = 674
[17:44:27] - SELECT * FROM select_fixed_asset WHERE trans_id = 674
[17:44:27] - SELECT * FROM select_checks WHERE trans_id = 674
[17:44:27] - SELECT * FROM trans_header_particular WHERE trans_id = 674
[17:44:47] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-01' ORDER BY a.trans_no ASC 
[17:44:47] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '681'
            
[17:44:47] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 681
[17:44:48] - SELECT * FROM select_ewt WHERE trans_id = 681
[17:44:48] - SELECT * FROM select_final_tax WHERE trans_id = 681
[17:44:48] - SELECT * FROM select_input_vat WHERE trans_id = 681
[17:44:48] - SELECT * FROM select_output_vat WHERE trans_id = 681
[17:44:48] - SELECT * FROM select_prepaid WHERE trans_id = 681
[17:44:49] - SELECT * FROM select_fixed_asset WHERE trans_id = 681
[17:44:49] - SELECT * FROM select_checks WHERE trans_id = 681
[17:44:49] - SELECT * FROM trans_header_particular WHERE trans_id = 681
[17:44:55] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[17:45:02] - SELECT * FROM lib_erp_chart
[17:45:03] - SELECT * FROM lib_erp_project
[17:45:11] - SELECT * FROM lib_erp_department
[17:45:11] - SELECT * FROM lib_erp_department
[17:45:11] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '8'
[17:45:12] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '8'
[17:45:13] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '8'
[17:45:16] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[17:45:16] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 681 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-1-15' AND a.trans_id <> 681 AND a.general_id = 1034 AND a.currency_id = 1 AND a.project_id  = 8 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[17:45:25] - SEL: jbooks_id = '' AND ref_jbooks_id = '39463' , FOUND: 0
[17:45:26] - SELECT MAX(IFNULL(isLock,False)) AS isLock FROM transaction_locking WHERE journal_id = '2' AND '2018-01-15' BETWEEN date_from AND date_to
[17:45:26] - SELECT trans_no AS existing FROM trans_header WHERE trans_no = '98347' AND trans_id <> '681' AND journal_id = '2'
[17:45:26] - CALL SaveTransaction('Update','trans_header','trans_id,trans_no,trans_date,book_id,journal_id,general_id,currency_id,exchange_rate,based_rate,amount,amount_based,description','681|98347|2018-01-15|11|2|1034|1|1.0000000000|1.0000000000|23094.3500000000|23094.3500000000|MA FOR JAN 2018|','trans_id','681','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:45:26] - CALL SaveTransaction('Update','trans_header_cr','trans_cr_id,trans_id,si_no','421|681||','trans_cr_id','421','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:45:26] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','3749|681|8|8||||3|MA FOR JAN 2018|23094.3500000000|0.0000000000|1|1.0000000000|1.0000000000|23094.3500000000|0.0000000000|||','jbooks_id','3749','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:45:27] - CALL SaveTransaction('Remove','trans_jbooks','','3750|','jbooks_id','3750|','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:45:27] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','3751|681|8|8||||416|MA FOR JAN 2018|0.0000000000|19358.3100000000|1|1.0000000000|1.0000000000|0.0000000000|19358.3100000000|||','jbooks_id','3751','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:45:27] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','7326|681|8|8||||223||0.0000000000|597.0000000000|1|1.0000000000|1.0000000000|0.0000000000|597.0000000000|10|5839|','jbooks_id','7326','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:45:27] - CALL SaveTransaction('Insert','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','|681|8|8|||2272|46||0.0|3139.04|1|1.0000000000|1.0000000000|0|3139.04|1034|39463|','jbooks_id','','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:45:27] - SELECT jbooks_id AS id FROM trans_jbooks WHERE   ROUND(trans_id,2) = ROUND(681,2)  AND  ROUND(project_id,2) = ROUND(8,2)  AND  ROUND(department_id,2) = ROUND(8,2)  AND  ROUND(project_unit_no_id,2) = ROUND(2272,2)  AND  ROUND(account_id,2) = ROUND(46,2)  AND  ROUND(debit,2) = ROUND(0.0,2)  AND  ROUND(credit,2) = ROUND(3139.04,2)  AND  ROUND(currency_id,2) = ROUND(1,2)  AND  ROUND(exchange_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(based_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(credit_based,2) = ROUND(3139.04,2)  AND  ROUND(general_id,2) = ROUND(1034,2)  AND  ROUND(ref_jbooks_id,2) = ROUND(39463,2) 
[17:45:27] - CALL SaveTransaction('Update','trans_checks','check_id,jbooks_id,general_id,check_no,check_date,check_amount,check_amount_based,bank_id,bank_code,bank_name,cleared,released,cancelled,crossed,replacement_check_no,cleared_date,deposit_date,cancel_date,replaced,currency_id,exchange_rate,based_rate','2215|3749|1034|10908123|2018-01-15|23094.3500000000|23094.3500000000|54|||0|0|0|0||2018-01-15|2018-01-15|2018-01-15|0|1|1.0000000000|1.0000000000|','check_id','2215','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:45:30] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-01' ORDER BY a.trans_no ASC 
[17:45:30] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '681'
            
[17:45:31] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 681
[17:45:31] - SELECT * FROM select_ewt WHERE trans_id = 681
[17:45:31] - SELECT * FROM select_final_tax WHERE trans_id = 681
[17:45:31] - SELECT * FROM select_input_vat WHERE trans_id = 681
[17:45:31] - SELECT * FROM select_output_vat WHERE trans_id = 681
[17:45:31] - SELECT * FROM select_prepaid WHERE trans_id = 681
[17:45:31] - SELECT * FROM select_fixed_asset WHERE trans_id = 681
[17:45:32] - SELECT * FROM select_checks WHERE trans_id = 681
[17:45:32] - SELECT * FROM trans_header_particular WHERE trans_id = 681
[17:45:46] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-01' ORDER BY a.trans_no ASC 
[17:45:47] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '752'
            
[17:45:47] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 752
[17:45:47] - SELECT * FROM select_ewt WHERE trans_id = 752
[17:45:47] - SELECT * FROM select_final_tax WHERE trans_id = 752
[17:45:47] - SELECT * FROM select_input_vat WHERE trans_id = 752
[17:45:48] - SELECT * FROM select_output_vat WHERE trans_id = 752
[17:45:48] - SELECT * FROM select_prepaid WHERE trans_id = 752
[17:45:48] - SELECT * FROM select_fixed_asset WHERE trans_id = 752
[17:45:48] - SELECT * FROM select_checks WHERE trans_id = 752
[17:45:48] - SELECT * FROM trans_header_particular WHERE trans_id = 752
[17:45:49] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[17:45:55] - SELECT * FROM lib_erp_chart
[17:45:57] - SELECT * FROM lib_erp_project
[17:46:05] - SELECT * FROM lib_erp_department
[17:46:05] - SELECT * FROM lib_erp_department
[17:46:05] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '8'
[17:46:06] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '8'
[17:46:07] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '8'
[17:46:09] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[17:46:09] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 752 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-1-15' AND a.trans_id <> 752 AND a.general_id = 557 AND a.currency_id = 1 AND a.project_id  = 8 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[17:46:18] - SEL: jbooks_id = '' AND ref_jbooks_id = '39451' , FOUND: 0
[17:46:19] - SELECT MAX(IFNULL(isLock,False)) AS isLock FROM transaction_locking WHERE journal_id = '2' AND '2018-01-15' BETWEEN date_from AND date_to
[17:46:19] - SELECT trans_no AS existing FROM trans_header WHERE trans_no = '98333' AND trans_id <> '752' AND journal_id = '2'
[17:46:19] - CALL SaveTransaction('Update','trans_header','trans_id,trans_no,trans_date,book_id,journal_id,general_id,currency_id,exchange_rate,based_rate,amount,amount_based,description','752|98333|2018-01-15|11|2|557|1|1.0000000000|1.0000000000|21482.4600000000|21482.4600000000|MA for Jan 2018|','trans_id','752','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:46:19] - CALL SaveTransaction('Update','trans_header_cr','trans_cr_id,trans_id,si_no','471|752||','trans_cr_id','471','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:46:19] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','4053|752|8|8||||3||21482.4600000000|0.0000000000|1|1.0000000000|1.0000000000|21482.4600000000|0.0000000000|||','jbooks_id','4053','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:46:19] - CALL SaveTransaction('Remove','trans_jbooks','','4054|','jbooks_id','4054|','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:46:19] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','4055|752|8|8||||416|MA for Jan 2018|0.0000000000|17168.2800000000|1|1.0000000000|1.0000000000|0.0000000000|17168.2800000000|||','jbooks_id','4055','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:46:19] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','17244|752|8|8||||223||0.0000000000|558.0000000000|1|1.0000000000|1.0000000000|0.0000000000|558.0000000000|10|16677|','jbooks_id','17244','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:46:19] - CALL SaveTransaction('Insert','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','|752|8|8|||1937|46||0.0|3756.18|1|1.0000000000|1.0000000000|0|3756.18|557|39451|','jbooks_id','','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:46:19] - SELECT jbooks_id AS id FROM trans_jbooks WHERE   ROUND(trans_id,2) = ROUND(752,2)  AND  ROUND(project_id,2) = ROUND(8,2)  AND  ROUND(department_id,2) = ROUND(8,2)  AND  ROUND(project_unit_no_id,2) = ROUND(1937,2)  AND  ROUND(account_id,2) = ROUND(46,2)  AND  ROUND(debit,2) = ROUND(0.0,2)  AND  ROUND(credit,2) = ROUND(3756.18,2)  AND  ROUND(currency_id,2) = ROUND(1,2)  AND  ROUND(exchange_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(based_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(credit_based,2) = ROUND(3756.18,2)  AND  ROUND(general_id,2) = ROUND(557,2)  AND  ROUND(ref_jbooks_id,2) = ROUND(39451,2) 
[17:46:20] - CALL SaveTransaction('Update','trans_checks','check_id,jbooks_id,general_id,check_no,check_date,check_amount,check_amount_based,bank_id,bank_code,bank_name,cleared,released,cancelled,crossed,replacement_check_no,cleared_date,deposit_date,cancel_date,replaced,currency_id,exchange_rate,based_rate','2284|4053|557|10477035|2018-01-15|21482.4600000000|0.0000000000|54|||0|0|0|0||2018-01-15|2018-01-15|2018-01-15|0|1|1.0000000000|1.0000000000|','check_id','2284','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:46:20] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-01' ORDER BY a.trans_no ASC 
[17:46:20] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '752'
            
[17:46:20] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 752
[17:46:21] - SELECT * FROM select_ewt WHERE trans_id = 752
[17:46:21] - SELECT * FROM select_final_tax WHERE trans_id = 752
[17:46:21] - SELECT * FROM select_input_vat WHERE trans_id = 752
[17:46:21] - SELECT * FROM select_output_vat WHERE trans_id = 752
[17:46:21] - SELECT * FROM select_prepaid WHERE trans_id = 752
[17:46:21] - SELECT * FROM select_fixed_asset WHERE trans_id = 752
[17:46:21] - SELECT * FROM select_checks WHERE trans_id = 752
[17:46:21] - SELECT * FROM trans_header_particular WHERE trans_id = 752
[17:46:38] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-01' ORDER BY a.trans_no ASC 
[17:46:39] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '860'
            
[17:46:39] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 860
[17:46:39] - SELECT * FROM select_ewt WHERE trans_id = 860
[17:46:40] - SELECT * FROM select_final_tax WHERE trans_id = 860
[17:46:40] - SELECT * FROM select_input_vat WHERE trans_id = 860
[17:46:40] - SELECT * FROM select_output_vat WHERE trans_id = 860
[17:46:40] - SELECT * FROM select_prepaid WHERE trans_id = 860
[17:46:40] - SELECT * FROM select_fixed_asset WHERE trans_id = 860
[17:46:40] - SELECT * FROM select_checks WHERE trans_id = 860
[17:46:40] - SELECT * FROM trans_header_particular WHERE trans_id = 860
[17:46:43] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[17:46:56] - SELECT * FROM lib_erp_chart
[17:47:00] - SELECT * FROM lib_erp_project
[17:47:01] - SELECT * FROM lib_erp_project
[17:47:02] - SELECT * FROM lib_erp_department
[17:47:03] - SELECT * FROM lib_erp_department
[17:47:04] - SELECT * FROM lib_erp_project_unit_no
[17:47:05] - SELECT * FROM lib_erp_project_unit_no
[17:47:05] - SELECT * FROM lib_erp_project_unit_no
[17:47:07] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[17:47:08] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 860 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-1-29' AND a.trans_id <> 860 AND a.general_id = 609 AND a.currency_id = 1 AND a.project_id  IS NULL  AND a.department_id  IS NULL  AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[17:47:16] - SELECT * FROM lib_erp_chart
[17:47:27] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[17:47:28] - SELECT * FROM lib_erp_project
[17:47:30] - SELECT * FROM lib_erp_department
[17:47:32] - SELECT * FROM lib_erp_department
[17:47:32] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:47:33] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:47:33] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:47:34] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:47:34] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:47:34] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:47:34] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:47:34] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:47:34] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:47:35] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:47:36] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:47:36] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:47:36] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:47:36] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:47:36] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:47:36] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:47:36] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:47:36] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:47:36] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:47:36] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:47:37] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:47:37] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:47:37] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:47:37] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:47:37] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:47:37] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:47:37] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:47:37] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:47:37] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:47:38] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:47:38] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:47:38] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '3'
[17:47:39] - SELECT * FROM lib_erp_project
[17:47:43] - SELECT * FROM lib_erp_department
[17:47:43] - SELECT * FROM lib_erp_department
[17:47:43] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '8'
[17:47:43] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '8'
[17:47:44] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '8'
[17:47:46] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[17:47:46] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 860 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-1-29' AND a.trans_id <> 860 AND a.general_id = 609 AND a.currency_id = 1 AND a.project_id  = 8 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[17:47:55] - SEL: jbooks_id = '' AND ref_jbooks_id = '39453' , FOUND: 0
[17:47:57] - SELECT MAX(IFNULL(isLock,False)) AS isLock FROM transaction_locking WHERE journal_id = '2' AND '2018-01-29' BETWEEN date_from AND date_to
[17:47:57] - SELECT trans_no AS existing FROM trans_header WHERE trans_no = '98497' AND trans_id <> '860' AND journal_id = '2'
[17:47:57] - CALL SaveTransaction('Update','trans_header','trans_id,trans_no,trans_date,book_id,journal_id,general_id,currency_id,exchange_rate,based_rate,amount,amount_based,description','860|98497|2018-01-29|11|2|609|1|1.0000000000|1.0000000000|23601.8600000000|23601.8600000000|MA FOR JAN2018|','trans_id','860','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:47:57] - CALL SaveTransaction('Update','trans_header_cr','trans_cr_id,trans_id,si_no','560|860||','trans_cr_id','560','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:47:57] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','4441|860|8|8||||3|MA FOR JAN2018|23601.8600000000|0.0000000000|1|1.0000000000|1.0000000000|23601.8600000000|0.0000000000|||','jbooks_id','4441','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:47:57] - CALL SaveTransaction('Remove','trans_jbooks','','4442|','jbooks_id','4442|','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:47:57] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','4443|860|8|8||||416|MA FOR JAN2018|0.0000000000|15475.7900000000|1|1.0000000000|1.0000000000|0.0000000000|15475.7900000000|||','jbooks_id','4443','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:47:57] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','9406|860|8|8||||223||0.0000000000|569.0000000000|1|1.0000000000|1.0000000000|0.0000000000|569.0000000000|10|7190|','jbooks_id','9406','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:47:57] - CALL SaveTransaction('Insert','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','|860|8|8|||2122|46||0.0|7557.07|1|1.0000000000|1.0000000000|0|7557.07|609|39453|','jbooks_id','','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:47:58] - SELECT jbooks_id AS id FROM trans_jbooks WHERE   ROUND(trans_id,2) = ROUND(860,2)  AND  ROUND(project_id,2) = ROUND(8,2)  AND  ROUND(department_id,2) = ROUND(8,2)  AND  ROUND(project_unit_no_id,2) = ROUND(2122,2)  AND  ROUND(account_id,2) = ROUND(46,2)  AND  ROUND(debit,2) = ROUND(0.0,2)  AND  ROUND(credit,2) = ROUND(7557.07,2)  AND  ROUND(currency_id,2) = ROUND(1,2)  AND  ROUND(exchange_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(based_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(credit_based,2) = ROUND(7557.07,2)  AND  ROUND(general_id,2) = ROUND(609,2)  AND  ROUND(ref_jbooks_id,2) = ROUND(39453,2) 
[17:47:58] - CALL SaveTransaction('Update','trans_checks','check_id,jbooks_id,general_id,check_no,check_date,check_amount,check_amount_based,bank_id,bank_code,bank_name,cleared,released,cancelled,crossed,replacement_check_no,cleared_date,deposit_date,cancel_date,replaced,currency_id,exchange_rate,based_rate','2400|4441|609|432109|2018-01-29|23601.8600000000|0.0000000000|54|||0|0|0|0||2018-01-29|2018-01-29|2018-01-29|0|1|1.0000000000|1.0000000000|','check_id','2400','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:47:58] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-01' ORDER BY a.trans_no ASC 
[17:47:58] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '860'
            
[17:47:58] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 860
[17:47:59] - SELECT * FROM select_ewt WHERE trans_id = 860
[17:47:59] - SELECT * FROM select_final_tax WHERE trans_id = 860
[17:47:59] - SELECT * FROM select_input_vat WHERE trans_id = 860
[17:47:59] - SELECT * FROM select_output_vat WHERE trans_id = 860
[17:47:59] - SELECT * FROM select_prepaid WHERE trans_id = 860
[17:47:59] - SELECT * FROM select_fixed_asset WHERE trans_id = 860
[17:47:59] - SELECT * FROM select_checks WHERE trans_id = 860
[17:47:59] - SELECT * FROM trans_header_particular WHERE trans_id = 860
[17:48:19] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-01' ORDER BY a.trans_no ASC 
[17:48:19] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '866'
            
[17:48:19] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 866
[17:48:20] - SELECT * FROM select_ewt WHERE trans_id = 866
[17:48:20] - SELECT * FROM select_final_tax WHERE trans_id = 866
[17:48:20] - SELECT * FROM select_input_vat WHERE trans_id = 866
[17:48:20] - SELECT * FROM select_output_vat WHERE trans_id = 866
[17:48:20] - SELECT * FROM select_prepaid WHERE trans_id = 866
[17:48:20] - SELECT * FROM select_fixed_asset WHERE trans_id = 866
[17:48:20] - SELECT * FROM select_checks WHERE trans_id = 866
[17:48:20] - SELECT * FROM trans_header_particular WHERE trans_id = 866
[17:48:26] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[17:48:35] - SELECT * FROM lib_erp_chart
[17:48:37] - SELECT * FROM lib_erp_project
[17:48:40] - SELECT * FROM lib_erp_department
[17:48:41] - SELECT * FROM lib_erp_department
[17:48:42] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '8'
[17:48:43] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '8'
[17:48:43] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '8'
[17:48:46] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[17:48:46] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 866 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-1-30' AND a.trans_id <> 866 AND a.general_id = 894 AND a.currency_id = 1 AND a.project_id  = 8 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[17:49:11] - SELECT * FROM lib_erp_project
[17:49:14] - SELECT * FROM lib_erp_department
[17:49:14] - SELECT * FROM lib_erp_department
[17:49:14] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '4'
[17:49:15] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '4'
[17:49:16] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '4'
[17:49:17] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[17:49:18] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 866 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-1-30' AND a.trans_id <> 866 AND a.general_id = 894 AND a.currency_id = 1 AND a.project_id  = 4 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[17:49:27] - SEL: jbooks_id = '' AND ref_jbooks_id = '39333' , FOUND: 0
[17:49:29] - SELECT MAX(IFNULL(isLock,False)) AS isLock FROM transaction_locking WHERE journal_id = '2' AND '2018-01-30' BETWEEN date_from AND date_to
[17:49:29] - SELECT trans_no AS existing FROM trans_header WHERE trans_no = '97457' AND trans_id <> '866' AND journal_id = '2'
[17:49:29] - CALL SaveTransaction('Update','trans_header','trans_id,trans_no,trans_date,book_id,journal_id,general_id,currency_id,exchange_rate,based_rate,amount,amount_based,description','866|97457|2018-01-30|11|2|894|1|1.0000000000|1.0000000000|59768.1400000000|59768.1400000000|MA for Jan. 2018|','trans_id','866','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:49:29] - CALL SaveTransaction('Update','trans_header_cr','trans_cr_id,trans_id,si_no','566|866||','trans_cr_id','566','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:49:29] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','4472|866|4|8||||31|MA for Jan. 2018|59768.1400000000|0.0000000000|1|1.0000000000|1.0000000000|59768.1400000000|0.0000000000|||','jbooks_id','4472','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:49:30] - CALL SaveTransaction('Remove','trans_jbooks','','4473|','jbooks_id','4473|','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:49:30] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','4474|866|4|8||||416|MA for Jan. 2018|0.0000000000|39011.5300000000|1|1.0000000000|1.0000000000|0.0000000000|39011.5300000000|||','jbooks_id','4474','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:49:30] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','9515|866|4|8||||223||0.0000000000|1430.0000000000|1|1.0000000000|1.0000000000|0.0000000000|1430.0000000000|10|5834|','jbooks_id','9515','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:49:30] - CALL SaveTransaction('Insert','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','|866|4|8|||1064|46||0.0|19326.61|1|1.0000000000|1.0000000000|0|19326.61|894|39333|','jbooks_id','','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:49:30] - SELECT jbooks_id AS id FROM trans_jbooks WHERE   ROUND(trans_id,2) = ROUND(866,2)  AND  ROUND(project_id,2) = ROUND(4,2)  AND  ROUND(department_id,2) = ROUND(8,2)  AND  ROUND(project_unit_no_id,2) = ROUND(1064,2)  AND  ROUND(account_id,2) = ROUND(46,2)  AND  ROUND(debit,2) = ROUND(0.0,2)  AND  ROUND(credit,2) = ROUND(19326.61,2)  AND  ROUND(currency_id,2) = ROUND(1,2)  AND  ROUND(exchange_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(based_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(credit_based,2) = ROUND(19326.61,2)  AND  ROUND(general_id,2) = ROUND(894,2)  AND  ROUND(ref_jbooks_id,2) = ROUND(39333,2) 
[17:49:30] - CALL SaveTransaction('Update','trans_checks','check_id,jbooks_id,general_id,check_no,check_date,check_amount,check_amount_based,bank_id,bank_code,bank_name,cleared,released,cancelled,crossed,replacement_check_no,cleared_date,deposit_date,cancel_date,replaced,currency_id,exchange_rate,based_rate','2406|4472|894|1321598|2018-01-30|59768.1400000000|0.0000000000|51|||0|0|0|0||2018-01-30|2018-01-30|2018-01-30|0|1|1.0000000000|1.0000000000|','check_id','2406','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:49:30] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-01' ORDER BY a.trans_no ASC 
[17:49:31] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '866'
            
[17:49:31] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 866
[17:49:31] - SELECT * FROM select_ewt WHERE trans_id = 866
[17:49:31] - SELECT * FROM select_final_tax WHERE trans_id = 866
[17:49:31] - SELECT * FROM select_input_vat WHERE trans_id = 866
[17:49:32] - SELECT * FROM select_output_vat WHERE trans_id = 866
[17:49:32] - SELECT * FROM select_prepaid WHERE trans_id = 866
[17:49:32] - SELECT * FROM select_fixed_asset WHERE trans_id = 866
[17:49:32] - SELECT * FROM select_checks WHERE trans_id = 866
[17:49:32] - SELECT * FROM trans_header_particular WHERE trans_id = 866
[17:49:52] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-01' ORDER BY a.trans_no ASC 
[17:49:52] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '886'
            
[17:49:52] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 886
[17:49:53] - SELECT * FROM select_ewt WHERE trans_id = 886
[17:49:53] - SELECT * FROM select_final_tax WHERE trans_id = 886
[17:49:53] - SELECT * FROM select_input_vat WHERE trans_id = 886
[17:49:53] - SELECT * FROM select_output_vat WHERE trans_id = 886
[17:49:53] - SELECT * FROM select_prepaid WHERE trans_id = 886
[17:49:53] - SELECT * FROM select_fixed_asset WHERE trans_id = 886
[17:49:53] - SELECT * FROM select_checks WHERE trans_id = 886
[17:49:53] - SELECT * FROM trans_header_particular WHERE trans_id = 886
[17:49:57] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[17:49:58] - SELECT * FROM lib_erp_chart
[17:50:04] - SELECT * FROM lib_erp_chart
[17:50:14] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-01' ORDER BY a.trans_no ASC 
[17:50:15] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '886'
            
[17:50:15] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 886
[17:50:15] - SELECT * FROM select_ewt WHERE trans_id = 886
[17:50:15] - SELECT * FROM select_final_tax WHERE trans_id = 886
[17:50:16] - SELECT * FROM select_input_vat WHERE trans_id = 886
[17:50:16] - SELECT * FROM select_output_vat WHERE trans_id = 886
[17:50:16] - SELECT * FROM select_prepaid WHERE trans_id = 886
[17:50:16] - SELECT * FROM select_fixed_asset WHERE trans_id = 886
[17:50:16] - SELECT * FROM select_checks WHERE trans_id = 886
[17:50:16] - SELECT * FROM trans_header_particular WHERE trans_id = 886
[17:50:26] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[17:50:31] - SELECT * FROM lib_erp_chart
[17:50:36] - SELECT * FROM lib_erp_project
[17:50:40] - SELECT * FROM lib_erp_department
[17:50:41] - SELECT * FROM lib_erp_department
[17:50:42] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '8'
[17:50:43] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '8'
[17:50:43] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '8'
[17:50:47] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[17:50:48] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 886 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-1-19' AND a.trans_id <> 886 AND a.general_id = 610 AND a.currency_id = 1 AND a.project_id  = 8 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[17:50:57] - SEL: jbooks_id = '' AND ref_jbooks_id = '40261' , FOUND: 0
[17:50:58] - SELECT MAX(IFNULL(isLock,False)) AS isLock FROM transaction_locking WHERE journal_id = '2' AND '2018-01-19' BETWEEN date_from AND date_to
[17:50:58] - SELECT trans_no AS existing FROM trans_header WHERE trans_no = '98405' AND trans_id <> '886' AND journal_id = '2'
[17:50:58] - CALL SaveTransaction('Update','trans_header','trans_id,trans_no,trans_date,book_id,journal_id,general_id,currency_id,exchange_rate,based_rate,amount,amount_based,description','886|98405|2018-01-19|11|2|610|1|1.0000000000|1.0000000000|23484.0700000000|23484.0700000000|MA FOR JAN2018|','trans_id','886','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:50:58] - CALL SaveTransaction('Update','trans_header_cr','trans_cr_id,trans_id,si_no','586|886||','trans_cr_id','586','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:50:58] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','4554|886|8|8||||9|MA FOR JAN2018|23484.0700000000|0.0000000000|1|1.0000000000|1.0000000000|23484.0700000000|0.0000000000|||','jbooks_id','4554','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:50:59] - CALL SaveTransaction('Remove','trans_jbooks','','4555|','jbooks_id','4555|','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:50:59] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','4556|886|8|8||||416|MA FOR JAN2018|0.0000000000|19648.9000000000|1|1.0000000000|1.0000000000|0.0000000000|19648.9000000000|||','jbooks_id','4556','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:50:59] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','4558|886|8|8||||419|MA FOR JAN2018|0.0000000000|358.3500000000|1|1.0000000000|1.0000000000|0.0000000000|358.3500000000|||','jbooks_id','4558','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:50:59] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','9417|886|8|8||||223||0.0000000000|605.0000000000|1|1.0000000000|1.0000000000|0.0000000000|605.0000000000|10|7190|','jbooks_id','9417','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:50:59] - CALL SaveTransaction('Insert','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','|886|8|8|||2131|46||0.0|2871.82|1|1.0000000000|1.0000000000|0|2871.82|610|40261|','jbooks_id','','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:50:59] - SELECT jbooks_id AS id FROM trans_jbooks WHERE   ROUND(trans_id,2) = ROUND(886,2)  AND  ROUND(project_id,2) = ROUND(8,2)  AND  ROUND(department_id,2) = ROUND(8,2)  AND  ROUND(project_unit_no_id,2) = ROUND(2131,2)  AND  ROUND(account_id,2) = ROUND(46,2)  AND  ROUND(debit,2) = ROUND(0.0,2)  AND  ROUND(credit,2) = ROUND(2871.82,2)  AND  ROUND(currency_id,2) = ROUND(1,2)  AND  ROUND(exchange_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(based_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(credit_based,2) = ROUND(2871.82,2)  AND  ROUND(general_id,2) = ROUND(610,2)  AND  ROUND(ref_jbooks_id,2) = ROUND(40261,2) 
[17:50:59] - CALL SaveTransaction('Update','trans_checks','check_id,jbooks_id,general_id,check_no,check_date,check_amount,check_amount_based,bank_id,bank_code,bank_name,cleared,released,cancelled,crossed,replacement_check_no,cleared_date,deposit_date,cancel_date,replaced,currency_id,exchange_rate,based_rate','2424|4554|610|735237|2018-01-22|23484.0700000000|0.0000000000|60|||0|0|0|0||2018-01-10|2018-01-10|2018-01-10|0|1|1.0000000000|1.0000000000|','check_id','2424','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:50:59] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-01' ORDER BY a.trans_no ASC 
[17:51:00] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '886'
            
[17:51:00] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 886
[17:51:00] - SELECT * FROM select_ewt WHERE trans_id = 886
[17:51:00] - SELECT * FROM select_final_tax WHERE trans_id = 886
[17:51:00] - SELECT * FROM select_input_vat WHERE trans_id = 886
[17:51:01] - SELECT * FROM select_output_vat WHERE trans_id = 886
[17:51:01] - SELECT * FROM select_prepaid WHERE trans_id = 886
[17:51:01] - SELECT * FROM select_fixed_asset WHERE trans_id = 886
[17:51:01] - SELECT * FROM select_checks WHERE trans_id = 886
[17:51:01] - SELECT * FROM trans_header_particular WHERE trans_id = 886
[17:51:14] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-01' ORDER BY a.trans_no ASC 
[17:51:14] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '890'
            
[17:51:14] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 890
[17:51:15] - SELECT * FROM select_ewt WHERE trans_id = 890
[17:51:15] - SELECT * FROM select_final_tax WHERE trans_id = 890
[17:51:15] - SELECT * FROM select_input_vat WHERE trans_id = 890
[17:51:15] - SELECT * FROM select_output_vat WHERE trans_id = 890
[17:51:15] - SELECT * FROM select_prepaid WHERE trans_id = 890
[17:51:15] - SELECT * FROM select_fixed_asset WHERE trans_id = 890
[17:51:15] - SELECT * FROM select_checks WHERE trans_id = 890
[17:51:15] - SELECT * FROM trans_header_particular WHERE trans_id = 890
[17:52:10] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[17:52:26] - SELECT * FROM lib_erp_chart
[17:52:27] - SELECT * FROM lib_erp_project
[17:52:32] - SELECT * FROM lib_erp_department
[17:52:33] - SELECT * FROM lib_erp_department
[17:52:34] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '8'
[17:52:35] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '8'
[17:52:35] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '8'
[17:52:38] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[17:52:39] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 890 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-1-30' AND a.trans_id <> 890 AND a.general_id = 610 AND a.currency_id = 1 AND a.project_id  = 8 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[17:53:12] - SEL: jbooks_id = '' AND ref_jbooks_id = '40261' , FOUND: 0
[17:53:14] - SELECT MAX(IFNULL(isLock,False)) AS isLock FROM transaction_locking WHERE journal_id = '2' AND '2018-01-30' BETWEEN date_from AND date_to
[17:53:14] - SELECT trans_no AS existing FROM trans_header WHERE trans_no = '99768' AND trans_id <> '890' AND journal_id = '2'
[17:53:14] - CALL SaveTransaction('Update','trans_header','trans_id,trans_no,trans_date,book_id,journal_id,general_id,currency_id,exchange_rate,based_rate,amount,amount_based,description','890|99768|2018-01-30|11|2|610|1|1.0000000000|1.0000000000|23484.0700000000|23484.0700000000|MA FOR JAN2018|','trans_id','890','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:53:14] - CALL SaveTransaction('Update','trans_header_cr','trans_cr_id,trans_id,si_no','590|890||','trans_cr_id','590','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:53:14] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','4571|890|8|8||||9|MA FOR JAN2018|23484.0700000000|0.0000000000|1|1.0000000000|1.0000000000|23484.0700000000|0.0000000000|||','jbooks_id','4571','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:53:14] - CALL SaveTransaction('Remove','trans_jbooks','','4572|','jbooks_id','4572|','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:53:14] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','4573|890|8|8||||416|MA FOR JAN2018|0.0000000000|19610.6100000000|1|1.0000000000|1.0000000000|0.0000000000|19610.6100000000|||','jbooks_id','4573','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:53:14] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','9420|890|8|8||||223||0.0000000000|605.0000000000|1|1.0000000000|1.0000000000|0.0000000000|605.0000000000|10|7190|','jbooks_id','9420','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:53:14] - CALL SaveTransaction('Insert','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','|890|8|8|||2131|46||0.0|3268.46|1|1.0000000000|1.0000000000|0|3268.46|610|40261|','jbooks_id','','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:53:15] - SELECT jbooks_id AS id FROM trans_jbooks WHERE   ROUND(trans_id,2) = ROUND(890,2)  AND  ROUND(project_id,2) = ROUND(8,2)  AND  ROUND(department_id,2) = ROUND(8,2)  AND  ROUND(project_unit_no_id,2) = ROUND(2131,2)  AND  ROUND(account_id,2) = ROUND(46,2)  AND  ROUND(debit,2) = ROUND(0.0,2)  AND  ROUND(credit,2) = ROUND(3268.46,2)  AND  ROUND(currency_id,2) = ROUND(1,2)  AND  ROUND(exchange_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(based_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(credit_based,2) = ROUND(3268.46,2)  AND  ROUND(general_id,2) = ROUND(610,2)  AND  ROUND(ref_jbooks_id,2) = ROUND(40261,2) 
[17:53:15] - CALL SaveTransaction('Update','trans_checks','check_id,jbooks_id,general_id,check_no,check_date,check_amount,check_amount_based,bank_id,bank_code,bank_name,cleared,released,cancelled,crossed,replacement_check_no,cleared_date,deposit_date,cancel_date,replaced,currency_id,exchange_rate,based_rate','2428|4571|610|735237|2018-01-30|23484.0700000000|0.0000000000|60|||0|0|0|0||2018-01-30|2018-01-30|2018-01-30|0|1|1.0000000000|1.0000000000|','check_id','2428','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:53:15] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-01' ORDER BY a.trans_no ASC 
[17:53:15] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '890'
            
[17:53:15] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 890
[17:53:16] - SELECT * FROM select_ewt WHERE trans_id = 890
[17:53:16] - SELECT * FROM select_final_tax WHERE trans_id = 890
[17:53:16] - SELECT * FROM select_input_vat WHERE trans_id = 890
[17:53:16] - SELECT * FROM select_output_vat WHERE trans_id = 890
[17:53:16] - SELECT * FROM select_prepaid WHERE trans_id = 890
[17:53:16] - SELECT * FROM select_fixed_asset WHERE trans_id = 890
[17:53:16] - SELECT * FROM select_checks WHERE trans_id = 890
[17:53:16] - SELECT * FROM trans_header_particular WHERE trans_id = 890
[17:54:00] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-02' ORDER BY a.trans_no ASC 
[17:54:00] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '1890'
            
[17:54:01] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 1890
[17:54:01] - SELECT * FROM select_ewt WHERE trans_id = 1890
[17:54:01] - SELECT * FROM select_final_tax WHERE trans_id = 1890
[17:54:01] - SELECT * FROM select_input_vat WHERE trans_id = 1890
[17:54:01] - SELECT * FROM select_output_vat WHERE trans_id = 1890
[17:54:01] - SELECT * FROM select_prepaid WHERE trans_id = 1890
[17:54:02] - SELECT * FROM select_fixed_asset WHERE trans_id = 1890
[17:54:02] - SELECT * FROM select_checks WHERE trans_id = 1890
[17:54:02] - SELECT * FROM trans_header_particular WHERE trans_id = 1890
[17:54:05] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-02' ORDER BY a.trans_no ASC 
[17:54:06] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '188'
            
[17:54:06] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 188
[17:54:06] - SELECT * FROM select_ewt WHERE trans_id = 188
[17:54:07] - SELECT * FROM select_final_tax WHERE trans_id = 188
[17:54:07] - SELECT * FROM select_input_vat WHERE trans_id = 188
[17:54:07] - SELECT * FROM select_output_vat WHERE trans_id = 188
[17:54:07] - SELECT * FROM select_prepaid WHERE trans_id = 188
[17:54:07] - SELECT * FROM select_fixed_asset WHERE trans_id = 188
[17:54:07] - SELECT * FROM select_checks WHERE trans_id = 188
[17:54:07] - SELECT * FROM trans_header_particular WHERE trans_id = 188
[17:54:08] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[17:54:18] - SELECT * FROM lib_erp_chart
[17:54:18] - SELECT * FROM lib_erp_project
[17:54:22] - SELECT * FROM lib_erp_department
[17:54:23] - SELECT * FROM lib_erp_department
[17:54:24] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '9'
[17:54:25] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '9'
[17:54:25] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '9'
[17:54:27] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[17:54:28] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[17:54:28] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 188 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-2-20' AND a.trans_id <> 188 AND a.general_id = 670 AND a.currency_id = 1 AND a.project_id  = 9 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[17:54:38] - SEL: jbooks_id = '' AND ref_jbooks_id = '39487' , FOUND: 0
[17:54:39] - SELECT MAX(IFNULL(isLock,False)) AS isLock FROM transaction_locking WHERE journal_id = '2' AND '2018-02-20' BETWEEN date_from AND date_to
[17:54:39] - SELECT trans_no AS existing FROM trans_header WHERE trans_no = '100116' AND trans_id <> '188' AND journal_id = '2'
[17:54:39] - CALL SaveTransaction('Update','trans_header','trans_id,trans_no,trans_date,book_id,journal_id,general_id,currency_id,exchange_rate,based_rate,amount,amount_based,description','188|100116|2018-02-20|11|2|670|1|1.0000000000|1.0000000000|37760.5500000000|37760.5500000000|Payment MA - January 2018|','trans_id','188','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:54:39] - CALL SaveTransaction('Update','trans_header_cr','trans_cr_id,trans_id,si_no','13|188||','trans_cr_id','13','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:54:39] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','1864|188|9|8||||3|Payment MA - January 2018|37760.5500000000|0.0000000000|1|1.0000000000|1.0000000000|37760.5500000000|0.0000000000|||','jbooks_id','1864','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:54:39] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','1866|188|9|8||||416|Payment MA - January 2018|0.0000000000|30451.5800000000|1|1.0000000000|1.0000000000|0.0000000000|30451.5800000000|||','jbooks_id','1866','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:54:39] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','1868|188|9|8||||419|Payment MA - January 2018|0.0000000000|772.3300000000|1|1.0000000000|1.0000000000|0.0000000000|772.3300000000|||','jbooks_id','1868','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:54:39] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','8396|188|9|8||||223|MRI VAR3 B2 L33|0.0000000000|978.0000000000|1|1.0000000000|1.0000000000|0.0000000000|978.0000000000|10|753|','jbooks_id','8396','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:54:40] - CALL SaveTransaction('Remove','trans_jbooks','','11995|','jbooks_id','11995|','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:54:40] - CALL SaveTransaction('Insert','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','|188|9|8|||2396|46||0.0|5558.64|1|1.0000000000|1.0000000000|0|5558.64|670|39487|','jbooks_id','','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:54:40] - SELECT jbooks_id AS id FROM trans_jbooks WHERE   ROUND(trans_id,2) = ROUND(188,2)  AND  ROUND(project_id,2) = ROUND(9,2)  AND  ROUND(department_id,2) = ROUND(8,2)  AND  ROUND(project_unit_no_id,2) = ROUND(2396,2)  AND  ROUND(account_id,2) = ROUND(46,2)  AND  ROUND(debit,2) = ROUND(0.0,2)  AND  ROUND(credit,2) = ROUND(5558.64,2)  AND  ROUND(currency_id,2) = ROUND(1,2)  AND  ROUND(exchange_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(based_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(credit_based,2) = ROUND(5558.64,2)  AND  ROUND(general_id,2) = ROUND(670,2)  AND  ROUND(ref_jbooks_id,2) = ROUND(39487,2) 
[17:54:40] - CALL SaveTransaction('Update','trans_checks','check_id,jbooks_id,general_id,check_no,check_date,check_amount,check_amount_based,bank_id,bank_code,bank_name,cleared,released,cancelled,crossed,replacement_check_no,cleared_date,deposit_date,cancel_date,replaced,currency_id,exchange_rate,based_rate','1720|1864|670|522951|2018-02-20|37760.5500000000|37760.5500000000|54|||0|0|0|0||2018-02-20|2018-02-20|2018-02-20|0|1|1.0000000000|1.0000000000|','check_id','1720','DESKTOP-PL80BO2','Raymond T. Villegas','1979');
[17:54:41] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-02' ORDER BY a.trans_no ASC 
[17:54:42] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '188'
            
[17:54:42] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 188
[17:54:42] - SELECT * FROM select_ewt WHERE trans_id = 188
[17:54:43] - SELECT * FROM select_final_tax WHERE trans_id = 188
[17:54:43] - SELECT * FROM select_input_vat WHERE trans_id = 188
[17:54:43] - SELECT * FROM select_output_vat WHERE trans_id = 188
[17:54:43] - SELECT * FROM select_prepaid WHERE trans_id = 188
[17:54:43] - SELECT * FROM select_fixed_asset WHERE trans_id = 188
[17:54:43] - SELECT * FROM select_checks WHERE trans_id = 188
[17:54:43] - SELECT * FROM trans_header_particular WHERE trans_id = 188
[17:55:08] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-03' ORDER BY a.trans_no ASC 
[17:55:09] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '1893'
            
[17:55:09] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 1893
[17:55:09] - SELECT * FROM select_ewt WHERE trans_id = 1893
[17:55:09] - SELECT * FROM select_final_tax WHERE trans_id = 1893
[17:55:10] - SELECT * FROM select_input_vat WHERE trans_id = 1893
[17:55:10] - SELECT * FROM select_output_vat WHERE trans_id = 1893
[17:55:10] - SELECT * FROM select_prepaid WHERE trans_id = 1893
[17:55:10] - SELECT * FROM select_fixed_asset WHERE trans_id = 1893
[17:55:10] - SELECT * FROM select_checks WHERE trans_id = 1893
[17:55:10] - SELECT * FROM trans_header_particular WHERE trans_id = 1893
[17:55:12] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-03' ORDER BY a.trans_no ASC 
[17:55:12] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '189'
            
[17:55:13] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 189
[17:55:13] - SELECT * FROM select_ewt WHERE trans_id = 189
[17:55:13] - SELECT * FROM select_final_tax WHERE trans_id = 189
[17:55:13] - SELECT * FROM select_input_vat WHERE trans_id = 189
[17:55:13] - SELECT * FROM select_output_vat WHERE trans_id = 189
[17:55:14] - SELECT * FROM select_prepaid WHERE trans_id = 189
[17:55:14] - SELECT * FROM select_fixed_asset WHERE trans_id = 189
[17:55:14] - SELECT * FROM select_checks WHERE trans_id = 189
[17:55:14] - SELECT * FROM trans_header_particular WHERE trans_id = 189
[17:55:16] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[17:55:22] - SELECT * FROM lib_erp_chart
[17:55:27] - SELECT * FROM lib_erp_chart
[17:55:28] - SELECT * FROM lib_erp_project
[17:55:33] - SELECT * FROM lib_erp_department
[17:55:36] - SELECT * FROM lib_erp_department
[17:55:36] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '9'
[17:55:37] - SELECT * FROM lib_erp_project_unit_no WHERE project_id = '9'
[17:55:47] - ----- Accounting Start -----
[17:55:47] - Main Connection String = Server=192.168.1.4;User Id=root;Password=snoitulos;Database=erp_accounting_ngg;Port=3306;allowzerodatetime=True;convertzerodatetime=True;Connect Timeout=6000000
[17:55:47] - FS Connection String = Server=192.168.1.4;User Id=root;Password=snoitulos;Database=erp_fs_ngg;Port=3306;allowzerodatetime=True;convertzerodatetime=True;Connect Timeout=6000000
[17:55:55] - SELECT b.book_id,b.book_code,b.book_name FROM sys_acc_journal_book a LEFT JOIN lib_erp_book b ON b.book_id = a.book_id WHERE b.book_code IS NOT NULL AND a.journal_id = '3' AND b.company_id = '1' ORDER BY b.book_code 
[17:55:59] - SELECT COUNT(a.approval_id) AS numRow FROM sys_erp_approval a LEFT JOIN sys_erp_modules b ON b.module_id = a.module_id WHERE b.module_code = 'ACC00301'
[17:56:00] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_ap_id,'') AS trans_ap_id,IFNULL(b.si_no,'') AS si_no,IFNULL(b.rr_no,'') AS rr_no,IFNULL(b.po_no,'') AS po_no ,IFNULL(b.terms_id,'') AS terms_id,IFNULL(b.nodays,0) AS nodays,e.terms_name,b.due_date ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_ap b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN erp_fs_ngg.lib_erp_terms e ON b.terms_id = e.terms_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '3' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-03' ORDER BY a.trans_no ASC 
[17:56:00] - SELECT a.trans_sub_contract_id,a.trans_id,a.sub_contract_det_id,a.billed_amount,a.billed_amount_based
            ,a.currency_id,f.currency_code,f.currency_name,a.exchange_rate,a.based_rate
            ,b.subconid,e.subconcode,e.subconname,b.cons1,b.cons2,b.amount,b.amount_based,b.po_no
            ,b.trans_date
            ,sc_offset.amount_collected,sc_offset.amount_collected_based
            FROM trans_header_sub_contract a
            LEFT JOIN trans_sub_contract_det b ON b.sub_contract_det_id = a.sub_contract_det_id
            LEFT JOIN trans_sub_contract c ON c.sub_contract_id = b.sub_contract_id
            LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = c.project_id
            LEFT JOIN erp_fs_ngg.lib_subcon e ON e.subConid = b.subconid
            LEFT JOIN erp_fs_ngg.lib_erp_currency f ON f.currency_id = a.currency_id
            LEFT JOIN (
	            SELECT a.trans_sub_contract_id
	            ,SUM(a.amount_collected) AS amount_collected
	            ,SUM(a.amount_collected_based) AS amount_collected_based
	            FROM trans_sub_contract_offset a
	            GROUP BY a.trans_sub_contract_id
            ) sc_offset ON sc_offset.trans_sub_contract_id = a.trans_sub_contract_id
            WHERE a.trans_id='3078'
[17:56:00] - 
                    select a.trans_detailed_particular_id, a.trans_id, a.po_no,a.rr_no,a.dr_no,a.si_no,a.due_date,ROUND(a.trans_header_detailed_amount, 2) as trans_header_detailed_amount 
                    from trans_header_detailed_particular a
                    WHERE trans_id = '3078'
[17:56:00] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 3078
[17:56:00] - SELECT * FROM select_ewt WHERE trans_id = 3078
[17:56:01] - SELECT * FROM select_final_tax WHERE trans_id = 3078
[17:56:01] - SELECT * FROM select_input_vat WHERE trans_id = 3078
[17:56:01] - SELECT * FROM select_output_vat WHERE trans_id = 3078
[17:56:01] - SELECT * FROM select_prepaid WHERE trans_id = 3078
[17:56:01] - SELECT * FROM select_fixed_asset WHERE trans_id = 3078
[17:56:01] - SELECT * FROM select_checks WHERE trans_id = 3078
[17:56:01] - SELECT * FROM trans_header_particular WHERE trans_id = 3078
[17:56:26] - ----- Accounting Close -----
[17:56:28] - ----- Accounting Start -----
[17:56:28] - Main Connection String = Server=192.168.1.4;User Id=root;Password=snoitulos;Database=erp_accounting_ngg;Port=3306;allowzerodatetime=True;convertzerodatetime=True;Connect Timeout=6000000
[17:56:28] - FS Connection String = Server=192.168.1.4;User Id=root;Password=snoitulos;Database=erp_fs_ngg;Port=3306;allowzerodatetime=True;convertzerodatetime=True;Connect Timeout=6000000
[17:56:30] - Login Button Click
[17:56:30] - SELECT user_id FROM erp_fs_ngg.sys_erp_user WHERE username = 'alas' AND password = 'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580' 
[17:56:30] - INSERT INTO sys_log(log_date,user_id,log_code_3,machine_name,machine_user) VALUES('2019-07-23 17:56:30',1,'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580','DESKTOP-PL80BO2','Raymond T. Villegas');
[17:56:30] - SELECT log_id AS id FROM sys_log WHERE log_date = '2019-07-23 17:56:30' AND user_id = 1 AND log_code_3 = 'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580' AND machine_name = 'DESKTOP-PL80BO2' AND machine_user = 'Raymond T. Villegas';
[17:56:30] - SELECT a.stage_id,c.module_code,b.user_id FROM sys_erp_approval a LEFT JOIN sys_erp_approval_user b on b.approval_id = a.approval_id LEFT JOIN sys_erp_modules c ON c.module_id = a.module_id 
[17:56:30] - SELECT a.module_code,b.m_view,b.m_add,b.m_edit,b.m_delete,b.m_cancel,b.m_verify,b.m_approve,b.m_print FROM erp_fs_ngg.sys_erp_modules a LEFT JOIN erp_fs_ngg.sys_erp_profile_det b ON b.module_id = a.module_id LEFT JOIN erp_fs_ngg.sys_erp_user_profile c ON c.profile_id = b.profile_id AND c.system_id = a.system_id LEFT JOIN erp_fs_ngg.sys_erp_user d ON d.user_id = c.user_id WHERE a.system_id = 2 AND d.username = 'alas' 
[17:56:30] - SELECT module_code FROM erp_fs_ngg.sys_erp_modules WHERE system_id = 2 
[17:56:31] - select * from lib_erp_journal
[17:56:31] - SELECT a.*,b.company_code,b.company_name,b.address1,b.address2,b.tin,b.rdo_code ,a.currency_id,c.currency_code,c.currency_name,c.symbol  FROM sys_default a  LEFT JOIN erp_fs_ngg.lib_erp_company b ON b.company_id = a.company_id LEFT JOIN erp_fs_ngg.lib_erp_currency c ON c.currency_id = a.currency_id 
[17:56:31] - select a.*,b.module_code from sys_default_det a inner join erp_fs_ngg.sys_erp_modules b on a.module_id = b.module_id
[17:56:32] - SELECT a.book_id,a.book_code,a.book_name FROM lib_erp_book a WHERE a.company_id = '1'
[17:56:32] - SELECT 1 AS id,'January' AS name UNION SELECT 2,'February' UNION SELECT 3,'March' UNION SELECT 4,'April' UNION SELECT 5,'May' UNION SELECT 6,'June' UNION SELECT 7,'July' UNION SELECT 8,'August' UNION SELECT 9,'September' UNION SELECT 10,'October' UNION SELECT 11,'November' UNION SELECT 12,'December' 
[17:56:32] - End of Initialization
[17:56:35] - SELECT b.book_id,b.book_code,b.book_name FROM sys_acc_journal_book a LEFT JOIN lib_erp_book b ON b.book_id = a.book_id WHERE b.book_code IS NOT NULL AND a.journal_id = '2' AND b.company_id = '1' ORDER BY b.book_code 
[17:56:39] - SELECT COUNT(a.approval_id) AS numRow FROM sys_erp_approval a LEFT JOIN sys_erp_modules b ON b.module_id = a.module_id WHERE b.module_code = 'ACC00201'
[17:56:39] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-03' ORDER BY a.trans_no ASC 
[17:56:39] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '1893'
            
[17:56:40] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 1893
[17:56:40] - SELECT * FROM select_ewt WHERE trans_id = 1893
[17:56:40] - SELECT * FROM select_final_tax WHERE trans_id = 1893
[17:56:40] - SELECT * FROM select_input_vat WHERE trans_id = 1893
[17:56:40] - SELECT * FROM select_output_vat WHERE trans_id = 1893
[17:56:41] - SELECT * FROM select_prepaid WHERE trans_id = 1893
[17:56:41] - SELECT * FROM select_fixed_asset WHERE trans_id = 1893
[17:56:41] - SELECT * FROM select_checks WHERE trans_id = 1893
[17:56:41] - SELECT * FROM trans_header_particular WHERE trans_id = 1893
[17:56:44] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-03' ORDER BY a.trans_no ASC 
[17:56:45] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '189'
            
[17:56:45] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 189
[17:56:45] - SELECT * FROM select_ewt WHERE trans_id = 189
[17:56:45] - SELECT * FROM select_final_tax WHERE trans_id = 189
[17:56:45] - SELECT * FROM select_input_vat WHERE trans_id = 189
[17:56:45] - SELECT * FROM select_output_vat WHERE trans_id = 189
[17:56:46] - SELECT * FROM select_prepaid WHERE trans_id = 189
[17:56:46] - SELECT * FROM select_fixed_asset WHERE trans_id = 189
[17:56:46] - SELECT * FROM select_checks WHERE trans_id = 189
[17:56:46] - SELECT * FROM trans_header_particular WHERE trans_id = 189
[17:56:47] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[17:56:51] - SELECT * FROM lib_erp_chart
[17:56:54] - SELECT * FROM lib_erp_project
[17:56:59] - SELECT * FROM lib_erp_department
[17:57:02] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[17:57:02] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 189 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-3-5' AND a.trans_id <> 189 AND a.general_id = 670 AND a.currency_id = 1 AND a.project_id  = 9 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[17:57:15] - SEL: jbooks_id = '' AND ref_jbooks_id = '39487' , FOUND: 0
[17:57:16] - SELECT MAX(IFNULL(isLock,False)) AS isLock FROM transaction_locking WHERE journal_id = '2' AND '2018-03-05' BETWEEN date_from AND date_to
[17:57:16] - SELECT trans_no AS existing FROM trans_header WHERE trans_no = '100286' AND trans_id <> '189' AND journal_id = '2'
[17:57:17] - CALL SaveTransaction('Update','trans_header','trans_id,trans_no,trans_date,book_id,journal_id,general_id,currency_id,exchange_rate,based_rate,amount,amount_based,description','189|100286|2018-03-05|11|2|670|1|1.0000000000|1.0000000000|1938.3700000000|1938.3700000000|Payment of MA|','trans_id','189','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[17:57:17] - CALL SaveTransaction('Update','trans_header_cr','trans_cr_id,trans_id,si_no','14|189||','trans_cr_id','14','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[17:57:17] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','1869|189|9|8||||9|Payment of MA|1938.3700000000|0.0000000000|1|1.0000000000|1.0000000000|1938.3700000000|0.0000000000|||','jbooks_id','1869','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[17:57:17] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','1870|189|9|8||||419|Payment of MA|0.0000000000|391.5300000000|1|1.0000000000|1.0000000000|0.0000000000|391.5300000000|||','jbooks_id','1870','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[17:57:17] - CALL SaveTransaction('Remove','trans_jbooks','','11996|','jbooks_id','11996|','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[17:57:17] - CALL SaveTransaction('Insert','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','|189|9|8|||2396|46||0.0|1546.84|1|1.0000000000|1.0000000000|0|1546.84|670|39487|','jbooks_id','','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[17:57:17] - SELECT jbooks_id AS id FROM trans_jbooks WHERE   ROUND(trans_id,2) = ROUND(189,2)  AND  ROUND(project_id,2) = ROUND(9,2)  AND  ROUND(department_id,2) = ROUND(8,2)  AND  ROUND(project_unit_no_id,2) = ROUND(2396,2)  AND  ROUND(account_id,2) = ROUND(46,2)  AND  ROUND(debit,2) = ROUND(0.0,2)  AND  ROUND(credit,2) = ROUND(1546.84,2)  AND  ROUND(currency_id,2) = ROUND(1,2)  AND  ROUND(exchange_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(based_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(credit_based,2) = ROUND(1546.84,2)  AND  ROUND(general_id,2) = ROUND(670,2)  AND  ROUND(ref_jbooks_id,2) = ROUND(39487,2) 
[17:57:17] - CALL SaveTransaction('Update','trans_checks','check_id,jbooks_id,general_id,check_no,check_date,check_amount,check_amount_based,bank_id,bank_code,bank_name,cleared,released,cancelled,crossed,replacement_check_no,cleared_date,deposit_date,cancel_date,replaced,currency_id,exchange_rate,based_rate','1721|1869|670||2018-03-05|1938.3700000000|0.0000000000|60|||0|0|0|0||2018-03-05|2018-03-05|2018-03-05|0|1|1.0000000000|1.0000000000|','check_id','1721','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[17:57:17] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-03' ORDER BY a.trans_no ASC 
[17:57:18] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '189'
            
[17:57:18] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 189
[17:57:18] - SELECT * FROM select_ewt WHERE trans_id = 189
[17:57:18] - SELECT * FROM select_final_tax WHERE trans_id = 189
[17:57:19] - SELECT * FROM select_input_vat WHERE trans_id = 189
[17:57:19] - SELECT * FROM select_output_vat WHERE trans_id = 189
[17:57:19] - SELECT * FROM select_prepaid WHERE trans_id = 189
[17:57:19] - SELECT * FROM select_fixed_asset WHERE trans_id = 189
[17:57:19] - SELECT * FROM select_checks WHERE trans_id = 189
[17:57:19] - SELECT * FROM trans_header_particular WHERE trans_id = 189
[17:57:32] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-03' ORDER BY a.trans_no ASC 
[17:57:33] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '190'
            
[17:57:33] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 190
[17:57:33] - SELECT * FROM select_ewt WHERE trans_id = 190
[17:57:34] - SELECT * FROM select_final_tax WHERE trans_id = 190
[17:57:34] - SELECT * FROM select_input_vat WHERE trans_id = 190
[17:57:34] - SELECT * FROM select_output_vat WHERE trans_id = 190
[17:57:34] - SELECT * FROM select_prepaid WHERE trans_id = 190
[17:57:34] - SELECT * FROM select_fixed_asset WHERE trans_id = 190
[17:57:34] - SELECT * FROM select_checks WHERE trans_id = 190
[17:57:34] - SELECT * FROM trans_header_particular WHERE trans_id = 190
[17:57:39] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[17:57:44] - SELECT * FROM lib_erp_chart
[17:57:45] - SELECT * FROM lib_erp_project
[17:57:48] - SELECT * FROM lib_erp_department
[17:57:51] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[17:57:52] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 190 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-3-6' AND a.trans_id <> 190 AND a.general_id = 670 AND a.currency_id = 1 AND a.project_id  = 9 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[17:58:08] - SEL: jbooks_id = '' AND ref_jbooks_id = '39487' , FOUND: 0
[17:58:09] - SELECT MAX(IFNULL(isLock,False)) AS isLock FROM transaction_locking WHERE journal_id = '2' AND '2018-03-06' BETWEEN date_from AND date_to
[17:58:09] - SELECT trans_no AS existing FROM trans_header WHERE trans_no = '100422' AND trans_id <> '190' AND journal_id = '2'
[17:58:09] - CALL SaveTransaction('Update','trans_header','trans_id,trans_no,trans_date,book_id,journal_id,general_id,currency_id,exchange_rate,based_rate,amount,amount_based,description','190|100422|2018-03-06|11|2|670|1|1.0000000000|1.0000000000|37760.5500000000|37760.5500000000|Payment MA - February 2018|','trans_id','190','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[17:58:10] - CALL SaveTransaction('Update','trans_header_cr','trans_cr_id,trans_id,si_no','15|190||','trans_cr_id','15','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[17:58:10] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','1872|190|9|8||||3|Payment MA - February 2018|37760.5500000000|0.0000000000|1|1.0000000000|1.0000000000|37760.5500000000|0.0000000000|||','jbooks_id','1872','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[17:58:10] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','1874|190|9|8||||416|Payment MA - February 2018|0.0000000000|30368.6800000000|1|1.0000000000|1.0000000000|0.0000000000|30368.6800000000|||','jbooks_id','1874','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[17:58:10] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','8397|190|9|8||||223|MRI VAR3 B2 L33|0.0000000000|978.0000000000|1|1.0000000000|1.0000000000|0.0000000000|978.0000000000|10|753|','jbooks_id','8397','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[17:58:10] - CALL SaveTransaction('Remove','trans_jbooks','','12000|','jbooks_id','12000|','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[17:58:10] - CALL SaveTransaction('Insert','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','|190|9|8|||2396|46||0.0|6413.87|1|1.0000000000|1.0000000000|0|6413.87|670|39487|','jbooks_id','','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[17:58:10] - SELECT jbooks_id AS id FROM trans_jbooks WHERE   ROUND(trans_id,2) = ROUND(190,2)  AND  ROUND(project_id,2) = ROUND(9,2)  AND  ROUND(department_id,2) = ROUND(8,2)  AND  ROUND(project_unit_no_id,2) = ROUND(2396,2)  AND  ROUND(account_id,2) = ROUND(46,2)  AND  ROUND(debit,2) = ROUND(0.0,2)  AND  ROUND(credit,2) = ROUND(6413.87,2)  AND  ROUND(currency_id,2) = ROUND(1,2)  AND  ROUND(exchange_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(based_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(credit_based,2) = ROUND(6413.87,2)  AND  ROUND(general_id,2) = ROUND(670,2)  AND  ROUND(ref_jbooks_id,2) = ROUND(39487,2) 
[17:58:10] - CALL SaveTransaction('Update','trans_checks','check_id,jbooks_id,general_id,check_no,check_date,check_amount,check_amount_based,bank_id,bank_code,bank_name,cleared,released,cancelled,crossed,replacement_check_no,cleared_date,deposit_date,cancel_date,replaced,currency_id,exchange_rate,based_rate','1722|1872|670|522979|2018-03-06|37760.5500000000|0.0000000000|54|||0|0|0|0||2018-03-06|2018-03-06|2018-03-06|0|1|1.0000000000|1.0000000000|','check_id','1722','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[17:58:12] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-03' ORDER BY a.trans_no ASC 
[17:58:13] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '190'
            
[17:58:13] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 190
[17:58:13] - SELECT * FROM select_ewt WHERE trans_id = 190
[17:58:13] - SELECT * FROM select_final_tax WHERE trans_id = 190
[17:58:14] - SELECT * FROM select_input_vat WHERE trans_id = 190
[17:58:14] - SELECT * FROM select_output_vat WHERE trans_id = 190
[17:58:14] - SELECT * FROM select_prepaid WHERE trans_id = 190
[17:58:14] - SELECT * FROM select_fixed_asset WHERE trans_id = 190
[17:58:14] - SELECT * FROM select_checks WHERE trans_id = 190
[17:58:14] - SELECT * FROM trans_header_particular WHERE trans_id = 190
[17:58:37] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-04' ORDER BY a.trans_no ASC 
[17:58:37] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '1895'
            
[17:58:37] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 1895
[17:58:38] - SELECT * FROM select_ewt WHERE trans_id = 1895
[17:58:38] - SELECT * FROM select_final_tax WHERE trans_id = 1895
[17:58:38] - SELECT * FROM select_input_vat WHERE trans_id = 1895
[17:58:38] - SELECT * FROM select_output_vat WHERE trans_id = 1895
[17:58:38] - SELECT * FROM select_prepaid WHERE trans_id = 1895
[17:58:38] - SELECT * FROM select_fixed_asset WHERE trans_id = 1895
[17:58:38] - SELECT * FROM select_checks WHERE trans_id = 1895
[17:58:38] - SELECT * FROM trans_header_particular WHERE trans_id = 1895
[17:58:40] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-04' ORDER BY a.trans_no ASC 
[17:58:40] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '195'
            
[17:58:41] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 195
[17:58:41] - SELECT * FROM select_ewt WHERE trans_id = 195
[17:58:41] - SELECT * FROM select_final_tax WHERE trans_id = 195
[17:58:41] - SELECT * FROM select_input_vat WHERE trans_id = 195
[17:58:41] - SELECT * FROM select_output_vat WHERE trans_id = 195
[17:58:41] - SELECT * FROM select_prepaid WHERE trans_id = 195
[17:58:42] - SELECT * FROM select_fixed_asset WHERE trans_id = 195
[17:58:42] - SELECT * FROM select_checks WHERE trans_id = 195
[17:58:42] - SELECT * FROM trans_header_particular WHERE trans_id = 195
[17:58:44] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[17:58:49] - SELECT * FROM lib_erp_chart
[17:58:49] - SELECT * FROM lib_erp_project
[17:58:52] - SELECT * FROM lib_erp_department
[17:58:54] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[17:58:54] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 195 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-4-20' AND a.trans_id <> 195 AND a.general_id = 670 AND a.currency_id = 1 AND a.project_id  = 9 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[17:59:05] - SEL: jbooks_id = '' AND ref_jbooks_id = '39487' , FOUND: 0
[17:59:06] - SELECT MAX(IFNULL(isLock,False)) AS isLock FROM transaction_locking WHERE journal_id = '2' AND '2018-04-20' BETWEEN date_from AND date_to
[17:59:06] - SELECT trans_no AS existing FROM trans_header WHERE trans_no = '100893' AND trans_id <> '195' AND journal_id = '2'
[17:59:06] - CALL SaveTransaction('Update','trans_header','trans_id,trans_no,trans_date,book_id,journal_id,general_id,currency_id,exchange_rate,based_rate,amount,amount_based,description','195|100893|2018-04-20|11|2|670|1|1.0000000000|1.0000000000|37760.5500000000|37760.5500000000|Payment MA - Apr 2018|','trans_id','195','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[17:59:06] - CALL SaveTransaction('Update','trans_header_cr','trans_cr_id,trans_id,si_no','20|195||','trans_cr_id','20','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[17:59:06] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','1889|195|9|8||||3|Payment MA - Apr 2018|37760.5500000000|0.0000000000|1|1.0000000000|1.0000000000|37760.5500000000|0.0000000000|||','jbooks_id','1889','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[17:59:06] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','1891|195|9|8||||416|Payment MA - Apr 2018|0.0000000000|30218.1500000000|1|1.0000000000|1.0000000000|0.0000000000|30218.1500000000|||','jbooks_id','1891','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[17:59:06] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','8399|195|9|8||||223|MRI VAR3 B3 L11|0.0000000000|978.0000000000|1|1.0000000000|1.0000000000|0.0000000000|978.0000000000|10|754|','jbooks_id','8399','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[17:59:06] - CALL SaveTransaction('Remove','trans_jbooks','','12003|','jbooks_id','12003|','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[17:59:06] - CALL SaveTransaction('Insert','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','|195|9|8|||2396|46||0.0|6564.40|1|1.0000000000|1.0000000000|0|6564.40|670|39487|','jbooks_id','','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[17:59:07] - SELECT jbooks_id AS id FROM trans_jbooks WHERE   ROUND(trans_id,2) = ROUND(195,2)  AND  ROUND(project_id,2) = ROUND(9,2)  AND  ROUND(department_id,2) = ROUND(8,2)  AND  ROUND(project_unit_no_id,2) = ROUND(2396,2)  AND  ROUND(account_id,2) = ROUND(46,2)  AND  ROUND(debit,2) = ROUND(0.0,2)  AND  ROUND(credit,2) = ROUND(6564.40,2)  AND  ROUND(currency_id,2) = ROUND(1,2)  AND  ROUND(exchange_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(based_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(credit_based,2) = ROUND(6564.40,2)  AND  ROUND(general_id,2) = ROUND(670,2)  AND  ROUND(ref_jbooks_id,2) = ROUND(39487,2) 
[17:59:07] - CALL SaveTransaction('Update','trans_checks','check_id,jbooks_id,general_id,check_no,check_date,check_amount,check_amount_based,bank_id,bank_code,bank_name,cleared,released,cancelled,crossed,replacement_check_no,cleared_date,deposit_date,cancel_date,replaced,currency_id,exchange_rate,based_rate','1727|1889|670|522953|2018-04-20|37760.5500000000|37760.5500000000|54|||0|0|0|0||2018-04-20|2018-04-20|2018-04-20|0|1|1.0000000000|1.0000000000|','check_id','1727','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[17:59:09] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-04' ORDER BY a.trans_no ASC 
[17:59:09] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '195'
            
[17:59:09] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 195
[17:59:10] - SELECT * FROM select_ewt WHERE trans_id = 195
[17:59:10] - SELECT * FROM select_final_tax WHERE trans_id = 195
[17:59:10] - SELECT * FROM select_input_vat WHERE trans_id = 195
[17:59:10] - SELECT * FROM select_output_vat WHERE trans_id = 195
[17:59:10] - SELECT * FROM select_prepaid WHERE trans_id = 195
[17:59:10] - SELECT * FROM select_fixed_asset WHERE trans_id = 195
[17:59:10] - SELECT * FROM select_checks WHERE trans_id = 195
[17:59:10] - SELECT * FROM trans_header_particular WHERE trans_id = 195
[17:59:29] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-04' ORDER BY a.trans_no ASC 
[17:59:29] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '194'
            
[17:59:29] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 194
[17:59:30] - SELECT * FROM select_ewt WHERE trans_id = 194
[17:59:30] - SELECT * FROM select_final_tax WHERE trans_id = 194
[17:59:30] - SELECT * FROM select_input_vat WHERE trans_id = 194
[17:59:30] - SELECT * FROM select_output_vat WHERE trans_id = 194
[17:59:30] - SELECT * FROM select_prepaid WHERE trans_id = 194
[17:59:30] - SELECT * FROM select_fixed_asset WHERE trans_id = 194
[17:59:30] - SELECT * FROM select_checks WHERE trans_id = 194
[17:59:31] - SELECT * FROM trans_header_particular WHERE trans_id = 194
[17:59:32] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[17:59:36] - SELECT * FROM lib_erp_chart
[17:59:40] - SELECT * FROM lib_erp_project
[17:59:44] - SELECT * FROM lib_erp_department
[17:59:46] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[17:59:46] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 194 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-4-5' AND a.trans_id <> 194 AND a.general_id = 670 AND a.currency_id = 1 AND a.project_id  = 9 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[17:59:56] - SEL: jbooks_id = '' AND ref_jbooks_id = '39487' , FOUND: 0
[17:59:57] - SELECT MAX(IFNULL(isLock,False)) AS isLock FROM transaction_locking WHERE journal_id = '2' AND '2018-04-05' BETWEEN date_from AND date_to
[17:59:57] - SELECT trans_no AS existing FROM trans_header WHERE trans_no = '102695' AND trans_id <> '194' AND journal_id = '2'
[17:59:57] - CALL SaveTransaction('Update','trans_header','trans_id,trans_no,trans_date,book_id,journal_id,general_id,currency_id,exchange_rate,based_rate,amount,amount_based,description','194|102695|2018-04-05|11|2|670|1|1.0000000000|1.0000000000|37760.5500000000|37760.5500000000|Payment MA - Mar 2018|','trans_id','194','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[17:59:57] - CALL SaveTransaction('Update','trans_header_cr','trans_cr_id,trans_id,si_no','19|194||','trans_cr_id','19','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[17:59:57] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','1885|194|9|8||||3|Payment MA - Mar 2018|37760.5500000000|0.0000000000|1|1.0000000000|1.0000000000|37760.5500000000|0.0000000000|||','jbooks_id','1885','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[17:59:57] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','1887|194|9|8||||416|Payment MA - Mar 2018|0.0000000000|30293.8500000000|1|1.0000000000|1.0000000000|0.0000000000|30293.8500000000|||','jbooks_id','1887','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[17:59:57] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','8398|194|9|8||||223|MRI VAR3 B2 L33|0.0000000000|978.0000000000|1|1.0000000000|1.0000000000|0.0000000000|978.0000000000|10|753|','jbooks_id','8398','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[17:59:57] - CALL SaveTransaction('Remove','trans_jbooks','','12004|','jbooks_id','12004|','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[17:59:58] - CALL SaveTransaction('Insert','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','|194|9|8|||2396|46||0.0|6488.7|1|1.0000000000|1.0000000000|0|6488.7|670|39487|','jbooks_id','','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[17:59:58] - SELECT jbooks_id AS id FROM trans_jbooks WHERE   ROUND(trans_id,2) = ROUND(194,2)  AND  ROUND(project_id,2) = ROUND(9,2)  AND  ROUND(department_id,2) = ROUND(8,2)  AND  ROUND(project_unit_no_id,2) = ROUND(2396,2)  AND  ROUND(account_id,2) = ROUND(46,2)  AND  ROUND(debit,2) = ROUND(0.0,2)  AND  ROUND(credit,2) = ROUND(6488.7,2)  AND  ROUND(currency_id,2) = ROUND(1,2)  AND  ROUND(exchange_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(based_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(credit_based,2) = ROUND(6488.7,2)  AND  ROUND(general_id,2) = ROUND(670,2)  AND  ROUND(ref_jbooks_id,2) = ROUND(39487,2) 
[17:59:58] - CALL SaveTransaction('Update','trans_checks','check_id,jbooks_id,general_id,check_no,check_date,check_amount,check_amount_based,bank_id,bank_code,bank_name,cleared,released,cancelled,crossed,replacement_check_no,cleared_date,deposit_date,cancel_date,replaced,currency_id,exchange_rate,based_rate','1726|1885|670|522952|2018-03-20|37760.5500000000|0.0000000000|54|||0|0|0|0||2018-04-05|2018-04-05|2018-04-05|0|1|1.0000000000|1.0000000000|','check_id','1726','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[17:59:58] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-04' ORDER BY a.trans_no ASC 
[17:59:58] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '194'
            
[17:59:58] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 194
[17:59:59] - SELECT * FROM select_ewt WHERE trans_id = 194
[17:59:59] - SELECT * FROM select_final_tax WHERE trans_id = 194
[17:59:59] - SELECT * FROM select_input_vat WHERE trans_id = 194
[17:59:59] - SELECT * FROM select_output_vat WHERE trans_id = 194
[17:59:59] - SELECT * FROM select_prepaid WHERE trans_id = 194
[17:59:59] - SELECT * FROM select_fixed_asset WHERE trans_id = 194
[17:59:59] - SELECT * FROM select_checks WHERE trans_id = 194
[18:00:00] - SELECT * FROM trans_header_particular WHERE trans_id = 194
[18:00:08] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-05' ORDER BY a.trans_no ASC 
[18:00:09] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '1898'
            
[18:00:09] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 1898
[18:00:09] - SELECT * FROM select_ewt WHERE trans_id = 1898
[18:00:09] - SELECT * FROM select_final_tax WHERE trans_id = 1898
[18:00:10] - SELECT * FROM select_input_vat WHERE trans_id = 1898
[18:00:10] - SELECT * FROM select_output_vat WHERE trans_id = 1898
[18:00:10] - SELECT * FROM select_prepaid WHERE trans_id = 1898
[18:00:10] - SELECT * FROM select_fixed_asset WHERE trans_id = 1898
[18:00:10] - SELECT * FROM select_checks WHERE trans_id = 1898
[18:00:10] - SELECT * FROM trans_header_particular WHERE trans_id = 1898
[18:00:11] - SELECT a.trans_id,a.trans_no,a.trans_date 
FROM trans_header a 
LEFT JOIN erp_fs_ngg.lib_erp_book b ON b.book_id = a.book_id 
WHERE a.journal_id = '2' AND b.company_id = '1' 
ORDER BY a.trans_date DESC,a.trans_no DESC 

[18:00:11] - SELECT a.trans_id,a.trans_no,a.trans_date 
FROM trans_header a 
LEFT JOIN erp_fs_ngg.lib_erp_book b ON b.book_id = a.book_id 
WHERE a.journal_id = '2' AND b.company_id = '1' 
ORDER BY a.trans_date DESC,a.trans_no DESC 

[18:00:11] - SELECT 'Receipts Voucher' AS name,'' AS code,1 AS id UNION SELECT 'Receipts Voucher List','',2 
[18:00:17] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-05' ORDER BY a.trans_no ASC 
[18:00:18] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '196'
            
[18:00:18] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 196
[18:00:18] - SELECT * FROM select_ewt WHERE trans_id = 196
[18:00:18] - SELECT * FROM select_final_tax WHERE trans_id = 196
[18:00:18] - SELECT * FROM select_input_vat WHERE trans_id = 196
[18:00:18] - SELECT * FROM select_output_vat WHERE trans_id = 196
[18:00:19] - SELECT * FROM select_prepaid WHERE trans_id = 196
[18:00:19] - SELECT * FROM select_fixed_asset WHERE trans_id = 196
[18:00:19] - SELECT * FROM select_checks WHERE trans_id = 196
[18:00:19] - SELECT * FROM trans_header_particular WHERE trans_id = 196
[18:00:21] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[18:00:26] - SELECT * FROM lib_erp_chart
[18:00:26] - SELECT * FROM lib_erp_project
[18:00:29] - SELECT * FROM lib_erp_department
[18:00:32] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[18:00:32] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 196 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-5-21' AND a.trans_id <> 196 AND a.general_id = 670 AND a.currency_id = 1 AND a.project_id  = 9 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[18:00:40] - SEL: jbooks_id = '' AND ref_jbooks_id = '39487' , FOUND: 0
[18:00:41] - SELECT MAX(IFNULL(isLock,False)) AS isLock FROM transaction_locking WHERE journal_id = '2' AND '2018-05-21' BETWEEN date_from AND date_to
[18:00:41] - SELECT trans_no AS existing FROM trans_header WHERE trans_no = '101647' AND trans_id <> '196' AND journal_id = '2'
[18:00:42] - CALL SaveTransaction('Update','trans_header','trans_id,trans_no,trans_date,book_id,journal_id,general_id,currency_id,exchange_rate,based_rate,amount,amount_based,description','196|101647|2018-05-21|11|2|670|1|1.0000000000|1.0000000000|37760.5500000000|37760.5500000000|Payment MA - May 2018|','trans_id','196','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:00:42] - CALL SaveTransaction('Update','trans_header_cr','trans_cr_id,trans_id,si_no','21|196||','trans_cr_id','21','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:00:42] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','1893|196|9|8||||3|Payment MA - May 2018|37760.5500000000|0.0000000000|1|1.0000000000|1.0000000000|37760.5500000000|0.0000000000|||','jbooks_id','1893','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:00:42] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','1895|196|9|8||||416|Payment MA - May 2018|0.0000000000|30141.5700000000|1|1.0000000000|1.0000000000|0.0000000000|30141.5700000000|||','jbooks_id','1895','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:00:42] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','8400|196|9|8||||223|MRI VAR3 B3 L11|0.0000000000|978.0000000000|1|1.0000000000|1.0000000000|0.0000000000|978.0000000000|10|754|','jbooks_id','8400','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:00:42] - CALL SaveTransaction('Remove','trans_jbooks','','12005|','jbooks_id','12005|','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:00:42] - CALL SaveTransaction('Insert','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','|196|9|8|||2396|46||0.0|6640.98|1|1.0000000000|1.0000000000|0|6640.98|670|39487|','jbooks_id','','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:00:42] - SELECT jbooks_id AS id FROM trans_jbooks WHERE   ROUND(trans_id,2) = ROUND(196,2)  AND  ROUND(project_id,2) = ROUND(9,2)  AND  ROUND(department_id,2) = ROUND(8,2)  AND  ROUND(project_unit_no_id,2) = ROUND(2396,2)  AND  ROUND(account_id,2) = ROUND(46,2)  AND  ROUND(debit,2) = ROUND(0.0,2)  AND  ROUND(credit,2) = ROUND(6640.98,2)  AND  ROUND(currency_id,2) = ROUND(1,2)  AND  ROUND(exchange_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(based_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(credit_based,2) = ROUND(6640.98,2)  AND  ROUND(general_id,2) = ROUND(670,2)  AND  ROUND(ref_jbooks_id,2) = ROUND(39487,2) 
[18:00:42] - CALL SaveTransaction('Update','trans_checks','check_id,jbooks_id,general_id,check_no,check_date,check_amount,check_amount_based,bank_id,bank_code,bank_name,cleared,released,cancelled,crossed,replacement_check_no,cleared_date,deposit_date,cancel_date,replaced,currency_id,exchange_rate,based_rate','1728|1893|670|522954|2018-05-20|37760.5500000000|37760.5500000000|54|||0|0|0|0||2018-05-21|2018-05-21|2018-05-21|0|1|1.0000000000|1.0000000000|','check_id','1728','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:00:44] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-05' ORDER BY a.trans_no ASC 
[18:00:45] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '196'
            
[18:00:45] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 196
[18:00:45] - SELECT * FROM select_ewt WHERE trans_id = 196
[18:00:45] - SELECT * FROM select_final_tax WHERE trans_id = 196
[18:00:46] - SELECT * FROM select_input_vat WHERE trans_id = 196
[18:00:46] - SELECT * FROM select_output_vat WHERE trans_id = 196
[18:00:46] - SELECT * FROM select_prepaid WHERE trans_id = 196
[18:00:46] - SELECT * FROM select_fixed_asset WHERE trans_id = 196
[18:00:46] - SELECT * FROM select_checks WHERE trans_id = 196
[18:00:46] - SELECT * FROM trans_header_particular WHERE trans_id = 196
[18:01:00] - SELECT b.book_id,b.book_code,b.book_name FROM sys_acc_journal_book a LEFT JOIN lib_erp_book b ON b.book_id = a.book_id WHERE b.book_code IS NOT NULL AND a.journal_id = '2' AND b.company_id = '1' ORDER BY b.book_code 
[18:01:05] - SELECT COUNT(a.approval_id) AS numRow FROM sys_erp_approval a LEFT JOIN sys_erp_modules b ON b.module_id = a.module_id WHERE b.module_code = 'ACC00201'
[18:01:05] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-06' ORDER BY a.trans_no ASC 
[18:01:05] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '1899'
            
[18:01:05] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 1899
[18:01:06] - SELECT * FROM select_ewt WHERE trans_id = 1899
[18:01:06] - SELECT * FROM select_final_tax WHERE trans_id = 1899
[18:01:06] - SELECT * FROM select_input_vat WHERE trans_id = 1899
[18:01:06] - SELECT * FROM select_output_vat WHERE trans_id = 1899
[18:01:06] - SELECT * FROM select_prepaid WHERE trans_id = 1899
[18:01:06] - SELECT * FROM select_fixed_asset WHERE trans_id = 1899
[18:01:06] - SELECT * FROM select_checks WHERE trans_id = 1899
[18:01:06] - SELECT * FROM trans_header_particular WHERE trans_id = 1899
[18:01:13] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-06' ORDER BY a.trans_no ASC 
[18:01:14] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '197'
            
[18:01:14] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 197
[18:01:14] - SELECT * FROM select_ewt WHERE trans_id = 197
[18:01:15] - SELECT * FROM select_final_tax WHERE trans_id = 197
[18:01:15] - SELECT * FROM select_input_vat WHERE trans_id = 197
[18:01:15] - SELECT * FROM select_output_vat WHERE trans_id = 197
[18:01:15] - SELECT * FROM select_prepaid WHERE trans_id = 197
[18:01:15] - SELECT * FROM select_fixed_asset WHERE trans_id = 197
[18:01:15] - SELECT * FROM select_checks WHERE trans_id = 197
[18:01:15] - SELECT * FROM trans_header_particular WHERE trans_id = 197
[18:01:16] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[18:01:21] - SELECT * FROM lib_erp_chart
[18:01:21] - SELECT * FROM lib_erp_project
[18:01:24] - SELECT * FROM lib_erp_department
[18:01:26] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[18:01:27] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 197 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-6-20' AND a.trans_id <> 197 AND a.general_id = 670 AND a.currency_id = 1 AND a.project_id  = 9 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[18:01:42] - SEL: jbooks_id = '' AND ref_jbooks_id = '39487' , FOUND: 0
[18:01:43] - SELECT MAX(IFNULL(isLock,False)) AS isLock FROM transaction_locking WHERE journal_id = '2' AND '2018-06-20' BETWEEN date_from AND date_to
[18:01:43] - SELECT trans_no AS existing FROM trans_header WHERE trans_no = '102482' AND trans_id <> '197' AND journal_id = '2'
[18:01:43] - CALL SaveTransaction('Update','trans_header','trans_id,trans_no,trans_date,book_id,journal_id,general_id,currency_id,exchange_rate,based_rate,amount,amount_based,description','197|102482|2018-06-20|11|2|670|1|1.0000000000|1.0000000000|37760.5500000000|37760.5500000000|Payment MA - June 2018|','trans_id','197','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:01:43] - CALL SaveTransaction('Update','trans_header_cr','trans_cr_id,trans_id,si_no','22|197||','trans_cr_id','22','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:01:43] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','1897|197|9|8||||3|Payment MA - June 2018|37760.5500000000|0.0000000000|1|1.0000000000|1.0000000000|37760.5500000000|0.0000000000|||','jbooks_id','1897','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:01:43] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','1899|197|9|8||||416|Payment MA - June 2018|0.0000000000|30064.0900000000|1|1.0000000000|1.0000000000|0.0000000000|30064.0900000000|||','jbooks_id','1899','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:01:43] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','8401|197|9|8||||223|MRI VAR3 B3 L11|0.0000000000|978.0000000000|1|1.0000000000|1.0000000000|0.0000000000|978.0000000000|10|754|','jbooks_id','8401','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:01:43] - CALL SaveTransaction('Remove','trans_jbooks','','12006|','jbooks_id','12006|','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:01:43] - CALL SaveTransaction('Insert','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','|197|9|8|||2396|46||0.0|6718.46|1|1.0000000000|1.0000000000|0|6718.46|670|39487|','jbooks_id','','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:01:44] - SELECT jbooks_id AS id FROM trans_jbooks WHERE   ROUND(trans_id,2) = ROUND(197,2)  AND  ROUND(project_id,2) = ROUND(9,2)  AND  ROUND(department_id,2) = ROUND(8,2)  AND  ROUND(project_unit_no_id,2) = ROUND(2396,2)  AND  ROUND(account_id,2) = ROUND(46,2)  AND  ROUND(debit,2) = ROUND(0.0,2)  AND  ROUND(credit,2) = ROUND(6718.46,2)  AND  ROUND(currency_id,2) = ROUND(1,2)  AND  ROUND(exchange_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(based_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(credit_based,2) = ROUND(6718.46,2)  AND  ROUND(general_id,2) = ROUND(670,2)  AND  ROUND(ref_jbooks_id,2) = ROUND(39487,2) 
[18:01:44] - CALL SaveTransaction('Update','trans_checks','check_id,jbooks_id,general_id,check_no,check_date,check_amount,check_amount_based,bank_id,bank_code,bank_name,cleared,released,cancelled,crossed,replacement_check_no,cleared_date,deposit_date,cancel_date,replaced,currency_id,exchange_rate,based_rate','1729|1897|670|522955|2018-06-20|37760.5500000000|0.0000000000|54|||0|0|0|0||2018-06-20|2018-06-20|2018-06-20|0|1|1.0000000000|1.0000000000|','check_id','1729','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:01:44] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-06' ORDER BY a.trans_no ASC 
[18:01:44] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '197'
            
[18:01:44] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 197
[18:01:45] - SELECT * FROM select_ewt WHERE trans_id = 197
[18:01:45] - SELECT * FROM select_final_tax WHERE trans_id = 197
[18:01:45] - SELECT * FROM select_input_vat WHERE trans_id = 197
[18:01:45] - SELECT * FROM select_output_vat WHERE trans_id = 197
[18:01:45] - SELECT * FROM select_prepaid WHERE trans_id = 197
[18:01:45] - SELECT * FROM select_fixed_asset WHERE trans_id = 197
[18:01:45] - SELECT * FROM select_checks WHERE trans_id = 197
[18:01:45] - SELECT * FROM trans_header_particular WHERE trans_id = 197
[18:01:54] - SELECT b.book_id,b.book_code,b.book_name FROM sys_acc_journal_book a LEFT JOIN lib_erp_book b ON b.book_id = a.book_id WHERE b.book_code IS NOT NULL AND a.journal_id = '2' AND b.company_id = '1' ORDER BY b.book_code 
[18:01:56] - SELECT COUNT(a.approval_id) AS numRow FROM sys_erp_approval a LEFT JOIN sys_erp_modules b ON b.module_id = a.module_id WHERE b.module_code = 'ACC00201'
[18:01:56] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-07' ORDER BY a.trans_no ASC 
[18:01:56] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '9615'
            
[18:01:56] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 9615
[18:01:57] - SELECT * FROM select_ewt WHERE trans_id = 9615
[18:01:57] - SELECT * FROM select_final_tax WHERE trans_id = 9615
[18:01:57] - SELECT * FROM select_input_vat WHERE trans_id = 9615
[18:01:57] - SELECT * FROM select_output_vat WHERE trans_id = 9615
[18:01:57] - SELECT * FROM select_prepaid WHERE trans_id = 9615
[18:01:57] - SELECT * FROM select_fixed_asset WHERE trans_id = 9615
[18:01:57] - SELECT * FROM select_checks WHERE trans_id = 9615
[18:01:57] - SELECT * FROM trans_header_particular WHERE trans_id = 9615
[18:02:08] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-07' ORDER BY a.trans_no ASC 
[18:02:08] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '198'
            
[18:02:08] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 198
[18:02:08] - SELECT * FROM select_ewt WHERE trans_id = 198
[18:02:09] - SELECT * FROM select_final_tax WHERE trans_id = 198
[18:02:09] - SELECT * FROM select_input_vat WHERE trans_id = 198
[18:02:09] - SELECT * FROM select_output_vat WHERE trans_id = 198
[18:02:09] - SELECT * FROM select_prepaid WHERE trans_id = 198
[18:02:09] - SELECT * FROM select_fixed_asset WHERE trans_id = 198
[18:02:09] - SELECT * FROM select_checks WHERE trans_id = 198
[18:02:09] - SELECT * FROM trans_header_particular WHERE trans_id = 198
[18:02:10] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[18:02:18] - SELECT * FROM lib_erp_chart
[18:02:18] - SELECT * FROM lib_erp_project
[18:02:21] - SELECT * FROM lib_erp_department
[18:02:24] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[18:02:24] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 198 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-7-20' AND a.trans_id <> 198 AND a.general_id = 670 AND a.currency_id = 1 AND a.project_id  = 9 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[18:02:32] - SEL: jbooks_id = '' AND ref_jbooks_id = '39487' , FOUND: 0
[18:02:33] - SELECT MAX(IFNULL(isLock,False)) AS isLock FROM transaction_locking WHERE journal_id = '2' AND '2018-07-20' BETWEEN date_from AND date_to
[18:02:33] - SELECT trans_no AS existing FROM trans_header WHERE trans_no = '103565' AND trans_id <> '198' AND journal_id = '2'
[18:02:33] - CALL SaveTransaction('Update','trans_header','trans_id,trans_no,trans_date,book_id,journal_id,general_id,currency_id,exchange_rate,based_rate,amount,amount_based,description','198|103565|2018-07-20|11|2|670|1|1.0000000000|1.0000000000|37760.5500000000|37760.5500000000|Payment MA - Jul 2018|','trans_id','198','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:02:33] - CALL SaveTransaction('Update','trans_header_cr','trans_cr_id,trans_id,si_no','23|198||','trans_cr_id','23','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:02:33] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','1901|198|9|8||||3|Payment MA - Jul 2018|37760.5500000000|0.0000000000|1|1.0000000000|1.0000000000|37760.5500000000|0.0000000000|||','jbooks_id','1901','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:02:33] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','1903|198|9|8||||416|Payment MA - Jul 2018|0.0000000000|29985.7100000000|1|1.0000000000|1.0000000000|0.0000000000|29985.7100000000|||','jbooks_id','1903','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:02:33] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','8402|198|9|8||||223|MRI VAR3 B3 L11|0.0000000000|978.0000000000|1|1.0000000000|1.0000000000|0.0000000000|978.0000000000|10|754|','jbooks_id','8402','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:02:33] - CALL SaveTransaction('Remove','trans_jbooks','','12007|','jbooks_id','12007|','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:02:33] - CALL SaveTransaction('Insert','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','|198|9|8|||2396|46||0.0|6796.84|1|1.0000000000|1.0000000000|0|6796.84|670|39487|','jbooks_id','','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:02:33] - SELECT jbooks_id AS id FROM trans_jbooks WHERE   ROUND(trans_id,2) = ROUND(198,2)  AND  ROUND(project_id,2) = ROUND(9,2)  AND  ROUND(department_id,2) = ROUND(8,2)  AND  ROUND(project_unit_no_id,2) = ROUND(2396,2)  AND  ROUND(account_id,2) = ROUND(46,2)  AND  ROUND(debit,2) = ROUND(0.0,2)  AND  ROUND(credit,2) = ROUND(6796.84,2)  AND  ROUND(currency_id,2) = ROUND(1,2)  AND  ROUND(exchange_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(based_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(credit_based,2) = ROUND(6796.84,2)  AND  ROUND(general_id,2) = ROUND(670,2)  AND  ROUND(ref_jbooks_id,2) = ROUND(39487,2) 
[18:02:34] - CALL SaveTransaction('Update','trans_checks','check_id,jbooks_id,general_id,check_no,check_date,check_amount,check_amount_based,bank_id,bank_code,bank_name,cleared,released,cancelled,crossed,replacement_check_no,cleared_date,deposit_date,cancel_date,replaced,currency_id,exchange_rate,based_rate','1730|1901|670|522956|2018-07-20|37760.5500000000|0.0000000000|54|||0|0|0|0||2018-07-20|2018-07-20|2018-07-20|0|1|1.0000000000|1.0000000000|','check_id','1730','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:02:36] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-07' ORDER BY a.trans_no ASC 
[18:02:37] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '198'
            
[18:02:37] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 198
[18:02:37] - SELECT * FROM select_ewt WHERE trans_id = 198
[18:02:38] - SELECT * FROM select_final_tax WHERE trans_id = 198
[18:02:38] - SELECT * FROM select_input_vat WHERE trans_id = 198
[18:02:38] - SELECT * FROM select_output_vat WHERE trans_id = 198
[18:02:38] - SELECT * FROM select_prepaid WHERE trans_id = 198
[18:02:38] - SELECT * FROM select_fixed_asset WHERE trans_id = 198
[18:02:38] - SELECT * FROM select_checks WHERE trans_id = 198
[18:02:38] - SELECT * FROM trans_header_particular WHERE trans_id = 198
[18:02:39] - SELECT b.book_id,b.book_code,b.book_name FROM sys_acc_journal_book a LEFT JOIN lib_erp_book b ON b.book_id = a.book_id WHERE b.book_code IS NOT NULL AND a.journal_id = '2' AND b.company_id = '1' ORDER BY b.book_code 
[18:02:42] - SELECT COUNT(a.approval_id) AS numRow FROM sys_erp_approval a LEFT JOIN sys_erp_modules b ON b.module_id = a.module_id WHERE b.module_code = 'ACC00201'
[18:02:42] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-07' ORDER BY a.trans_no ASC 
[18:02:43] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '9615'
            
[18:02:43] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 9615
[18:02:44] - SELECT * FROM select_ewt WHERE trans_id = 9615
[18:02:44] - SELECT * FROM select_final_tax WHERE trans_id = 9615
[18:02:44] - SELECT * FROM select_input_vat WHERE trans_id = 9615
[18:02:44] - SELECT * FROM select_output_vat WHERE trans_id = 9615
[18:02:44] - SELECT * FROM select_prepaid WHERE trans_id = 9615
[18:02:44] - SELECT * FROM select_fixed_asset WHERE trans_id = 9615
[18:02:44] - SELECT * FROM select_checks WHERE trans_id = 9615
[18:02:44] - SELECT * FROM trans_header_particular WHERE trans_id = 9615
[18:02:54] - SELECT b.book_id,b.book_code,b.book_name FROM sys_acc_journal_book a LEFT JOIN lib_erp_book b ON b.book_id = a.book_id WHERE b.book_code IS NOT NULL AND a.journal_id = '2' AND b.company_id = '1' ORDER BY b.book_code 
[18:02:57] - SELECT COUNT(a.approval_id) AS numRow FROM sys_erp_approval a LEFT JOIN sys_erp_modules b ON b.module_id = a.module_id WHERE b.module_code = 'ACC00201'
[18:02:57] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-08' ORDER BY a.trans_no ASC 
[18:02:58] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '1732'
            
[18:02:58] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 1732
[18:02:59] - SELECT * FROM select_ewt WHERE trans_id = 1732
[18:02:59] - SELECT * FROM select_final_tax WHERE trans_id = 1732
[18:02:59] - SELECT * FROM select_input_vat WHERE trans_id = 1732
[18:02:59] - SELECT * FROM select_output_vat WHERE trans_id = 1732
[18:02:59] - SELECT * FROM select_prepaid WHERE trans_id = 1732
[18:02:59] - SELECT * FROM select_fixed_asset WHERE trans_id = 1732
[18:02:59] - SELECT * FROM select_checks WHERE trans_id = 1732
[18:03:00] - SELECT * FROM trans_header_particular WHERE trans_id = 1732
[18:03:08] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-08' ORDER BY a.trans_no ASC 
[18:03:09] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '199'
            
[18:03:09] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 199
[18:03:10] - SELECT * FROM select_ewt WHERE trans_id = 199
[18:03:10] - SELECT * FROM select_final_tax WHERE trans_id = 199
[18:03:10] - SELECT * FROM select_input_vat WHERE trans_id = 199
[18:03:10] - SELECT * FROM select_output_vat WHERE trans_id = 199
[18:03:10] - SELECT * FROM select_prepaid WHERE trans_id = 199
[18:03:10] - SELECT * FROM select_fixed_asset WHERE trans_id = 199
[18:03:10] - SELECT * FROM select_checks WHERE trans_id = 199
[18:03:10] - SELECT * FROM trans_header_particular WHERE trans_id = 199
[18:03:11] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[18:03:16] - SELECT * FROM lib_erp_chart
[18:03:16] - SELECT * FROM lib_erp_project
[18:03:19] - SELECT * FROM lib_erp_department
[18:03:21] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[18:03:21] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 199 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-8-20' AND a.trans_id <> 199 AND a.general_id = 670 AND a.currency_id = 1 AND a.project_id  = 9 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[18:03:29] - SEL: jbooks_id = '' AND ref_jbooks_id = '39487' , FOUND: 0
[18:03:31] - SELECT MAX(IFNULL(isLock,False)) AS isLock FROM transaction_locking WHERE journal_id = '2' AND '2018-08-20' BETWEEN date_from AND date_to
[18:03:31] - SELECT trans_no AS existing FROM trans_header WHERE trans_no = '104329' AND trans_id <> '199' AND journal_id = '2'
[18:03:31] - CALL SaveTransaction('Update','trans_header','trans_id,trans_no,trans_date,book_id,journal_id,general_id,currency_id,exchange_rate,based_rate,amount,amount_based,description','199|104329|2018-08-20|11|2|670|1|1.0000000000|1.0000000000|37760.5500000000|37760.5500000000|Payment MA - Aug 2018|','trans_id','199','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:03:31] - CALL SaveTransaction('Update','trans_header_cr','trans_cr_id,trans_id,si_no','24|199||','trans_cr_id','24','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:03:31] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','1905|199|9|8||||3|Payment MA - Aug 2018|37760.5500000000|0.0000000000|1|1.0000000000|1.0000000000|37760.5500000000|0.0000000000|||','jbooks_id','1905','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:03:31] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','1907|199|9|8||||416|Payment MA - Aug 2018|0.0000000000|29906.4100000000|1|1.0000000000|1.0000000000|0.0000000000|29906.4100000000|||','jbooks_id','1907','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:03:31] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','8403|199|9|8||||223|MRI VAR3 B3 L11|0.0000000000|978.0000000000|1|1.0000000000|1.0000000000|0.0000000000|978.0000000000|10|754|','jbooks_id','8403','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:03:31] - CALL SaveTransaction('Remove','trans_jbooks','','12009|','jbooks_id','12009|','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:03:32] - CALL SaveTransaction('Insert','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','|199|9|8|||2396|46||0.0|6876.14|1|1.0000000000|1.0000000000|0|6876.14|670|39487|','jbooks_id','','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:03:32] - SELECT jbooks_id AS id FROM trans_jbooks WHERE   ROUND(trans_id,2) = ROUND(199,2)  AND  ROUND(project_id,2) = ROUND(9,2)  AND  ROUND(department_id,2) = ROUND(8,2)  AND  ROUND(project_unit_no_id,2) = ROUND(2396,2)  AND  ROUND(account_id,2) = ROUND(46,2)  AND  ROUND(debit,2) = ROUND(0.0,2)  AND  ROUND(credit,2) = ROUND(6876.14,2)  AND  ROUND(currency_id,2) = ROUND(1,2)  AND  ROUND(exchange_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(based_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(credit_based,2) = ROUND(6876.14,2)  AND  ROUND(general_id,2) = ROUND(670,2)  AND  ROUND(ref_jbooks_id,2) = ROUND(39487,2) 
[18:03:32] - CALL SaveTransaction('Update','trans_checks','check_id,jbooks_id,general_id,check_no,check_date,check_amount,check_amount_based,bank_id,bank_code,bank_name,cleared,released,cancelled,crossed,replacement_check_no,cleared_date,deposit_date,cancel_date,replaced,currency_id,exchange_rate,based_rate','1731|1905|670|522957|2018-08-20|37760.5500000000|0.0000000000|54|||0|0|0|0||2018-08-20|2018-08-20|2018-08-20|0|1|1.0000000000|1.0000000000|','check_id','1731','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:03:35] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-08' ORDER BY a.trans_no ASC 
[18:03:36] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '199'
            
[18:03:36] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 199
[18:03:36] - SELECT * FROM select_ewt WHERE trans_id = 199
[18:03:37] - SELECT * FROM select_final_tax WHERE trans_id = 199
[18:03:37] - SELECT * FROM select_input_vat WHERE trans_id = 199
[18:03:37] - SELECT * FROM select_output_vat WHERE trans_id = 199
[18:03:37] - SELECT * FROM select_prepaid WHERE trans_id = 199
[18:03:37] - SELECT * FROM select_fixed_asset WHERE trans_id = 199
[18:03:37] - SELECT * FROM select_checks WHERE trans_id = 199
[18:03:37] - SELECT * FROM trans_header_particular WHERE trans_id = 199
[18:03:44] - SELECT b.book_id,b.book_code,b.book_name FROM sys_acc_journal_book a LEFT JOIN lib_erp_book b ON b.book_id = a.book_id WHERE b.book_code IS NOT NULL AND a.journal_id = '2' AND b.company_id = '1' ORDER BY b.book_code 
[18:03:55] - SELECT COUNT(a.approval_id) AS numRow FROM sys_erp_approval a LEFT JOIN sys_erp_modules b ON b.module_id = a.module_id WHERE b.module_code = 'ACC00201'
[18:03:55] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-08' ORDER BY a.trans_no ASC 
[18:03:56] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '1732'
            
[18:03:56] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 1732
[18:03:57] - SELECT * FROM select_ewt WHERE trans_id = 1732
[18:03:57] - SELECT * FROM select_final_tax WHERE trans_id = 1732
[18:03:57] - SELECT * FROM select_input_vat WHERE trans_id = 1732
[18:03:57] - SELECT * FROM select_output_vat WHERE trans_id = 1732
[18:03:57] - SELECT * FROM select_prepaid WHERE trans_id = 1732
[18:03:57] - SELECT * FROM select_fixed_asset WHERE trans_id = 1732
[18:03:57] - SELECT * FROM select_checks WHERE trans_id = 1732
[18:03:58] - SELECT * FROM trans_header_particular WHERE trans_id = 1732
[18:04:13] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-09' ORDER BY a.trans_no ASC 
[18:04:13] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '1723'
            
[18:04:13] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 1723
[18:04:14] - SELECT * FROM select_ewt WHERE trans_id = 1723
[18:04:14] - SELECT * FROM select_final_tax WHERE trans_id = 1723
[18:04:14] - SELECT * FROM select_input_vat WHERE trans_id = 1723
[18:04:14] - SELECT * FROM select_output_vat WHERE trans_id = 1723
[18:04:14] - SELECT * FROM select_prepaid WHERE trans_id = 1723
[18:04:14] - SELECT * FROM select_fixed_asset WHERE trans_id = 1723
[18:04:14] - SELECT * FROM select_checks WHERE trans_id = 1723
[18:04:15] - SELECT * FROM trans_header_particular WHERE trans_id = 1723
[18:04:16] - SELECT b.book_id,b.book_code,b.book_name FROM sys_acc_journal_book a LEFT JOIN lib_erp_book b ON b.book_id = a.book_id WHERE b.book_code IS NOT NULL AND a.journal_id = '2' AND b.company_id = '1' ORDER BY b.book_code 
[18:04:19] - SELECT COUNT(a.approval_id) AS numRow FROM sys_erp_approval a LEFT JOIN sys_erp_modules b ON b.module_id = a.module_id WHERE b.module_code = 'ACC00201'
[18:04:20] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-09' ORDER BY a.trans_no ASC 
[18:04:20] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '1723'
            
[18:04:20] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 1723
[18:04:21] - SELECT * FROM select_ewt WHERE trans_id = 1723
[18:04:21] - SELECT * FROM select_final_tax WHERE trans_id = 1723
[18:04:21] - SELECT * FROM select_input_vat WHERE trans_id = 1723
[18:04:21] - SELECT * FROM select_output_vat WHERE trans_id = 1723
[18:04:21] - SELECT * FROM select_prepaid WHERE trans_id = 1723
[18:04:21] - SELECT * FROM select_fixed_asset WHERE trans_id = 1723
[18:04:22] - SELECT * FROM select_checks WHERE trans_id = 1723
[18:04:22] - SELECT * FROM trans_header_particular WHERE trans_id = 1723
[18:04:25] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-09' ORDER BY a.trans_no ASC 
[18:04:25] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '2340'
            
[18:04:26] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 2340
[18:04:26] - SELECT * FROM select_ewt WHERE trans_id = 2340
[18:04:26] - SELECT * FROM select_final_tax WHERE trans_id = 2340
[18:04:27] - SELECT * FROM select_input_vat WHERE trans_id = 2340
[18:04:27] - SELECT * FROM select_output_vat WHERE trans_id = 2340
[18:04:27] - SELECT * FROM select_prepaid WHERE trans_id = 2340
[18:04:27] - SELECT * FROM select_fixed_asset WHERE trans_id = 2340
[18:04:27] - SELECT * FROM select_checks WHERE trans_id = 2340
[18:04:27] - SELECT * FROM trans_header_particular WHERE trans_id = 2340
[18:04:28] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[18:04:35] - SELECT * FROM lib_erp_chart
[18:04:35] - SELECT * FROM lib_erp_project
[18:04:38] - SELECT * FROM lib_erp_department
[18:04:43] - SELECT * FROM lib_erp_project
[18:04:45] - SELECT * FROM lib_erp_department
[18:04:46] - SELECT * FROM lib_erp_project
[18:04:48] - SELECT * FROM lib_erp_department
[18:04:50] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[18:04:50] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 2340 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-9-20' AND a.trans_id <> 2340 AND a.general_id = 670 AND a.currency_id = 1 AND a.project_id  = 9 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[18:04:59] - SEL: jbooks_id = '' AND ref_jbooks_id = '39487' , FOUND: 0
[18:05:00] - SELECT MAX(IFNULL(isLock,False)) AS isLock FROM transaction_locking WHERE journal_id = '2' AND '2018-09-20' BETWEEN date_from AND date_to
[18:05:00] - SELECT trans_no AS existing FROM trans_header WHERE trans_no = '105449' AND trans_id <> '2340' AND journal_id = '2'
[18:05:00] - CALL SaveTransaction('Update','trans_header','trans_id,trans_no,trans_date,book_id,journal_id,general_id,currency_id,exchange_rate,based_rate,amount,amount_based,description','2340|105449|2018-09-20|11|2|670|1|1.0000000000|1.0000000000|37760.5500000000|37760.5500000000|MA for Sep 2018|','trans_id','2340','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:05:01] - CALL SaveTransaction('Update','trans_header_cr','trans_cr_id,trans_id,si_no','1250|2340||','trans_cr_id','1250','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:05:01] - CALL SaveTransaction('Remove','trans_jbooks','','12010|','jbooks_id','12010|','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:05:01] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','12011|2340|9|8||||416||0.0000000000|29826.1900000000|1|1.0000000000|1.0000000000|0.0000000000|29826.1900000000|||','jbooks_id','12011','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:05:01] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','12012|2340|9|8||||223|Payment for FIRE/MRI for VAR 2 and VAR 3|0.0000000000|978.0000000000|1|1.0000000000|1.0000000000|0.0000000000|978.0000000000|10|9048|','jbooks_id','12012','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:05:01] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','12013|2340|9|8||||3||37760.5500000000|0.0000000000|1|1.0000000000|1.0000000000|37760.5500000000|0.0000000000|||','jbooks_id','12013','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:05:01] - CALL SaveTransaction('Insert','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','|2340|9|8|||2396|46||0.0|6956.36|1|1.0000000000|1.0000000000|0|6956.36|670|39487|','jbooks_id','','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:05:01] - SELECT jbooks_id AS id FROM trans_jbooks WHERE   ROUND(trans_id,2) = ROUND(2340,2)  AND  ROUND(project_id,2) = ROUND(9,2)  AND  ROUND(department_id,2) = ROUND(8,2)  AND  ROUND(project_unit_no_id,2) = ROUND(2396,2)  AND  ROUND(account_id,2) = ROUND(46,2)  AND  ROUND(debit,2) = ROUND(0.0,2)  AND  ROUND(credit,2) = ROUND(6956.36,2)  AND  ROUND(currency_id,2) = ROUND(1,2)  AND  ROUND(exchange_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(based_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(credit_based,2) = ROUND(6956.36,2)  AND  ROUND(general_id,2) = ROUND(670,2)  AND  ROUND(ref_jbooks_id,2) = ROUND(39487,2) 
[18:05:05] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-09' ORDER BY a.trans_no ASC 
[18:05:05] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '2340'
            
[18:05:05] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 2340
[18:05:06] - SELECT * FROM select_ewt WHERE trans_id = 2340
[18:05:06] - SELECT * FROM select_final_tax WHERE trans_id = 2340
[18:05:06] - SELECT * FROM select_input_vat WHERE trans_id = 2340
[18:05:06] - SELECT * FROM select_output_vat WHERE trans_id = 2340
[18:05:06] - SELECT * FROM select_prepaid WHERE trans_id = 2340
[18:05:06] - SELECT * FROM select_fixed_asset WHERE trans_id = 2340
[18:05:07] - SELECT * FROM select_checks WHERE trans_id = 2340
[18:05:07] - SELECT * FROM trans_header_particular WHERE trans_id = 2340
[18:05:11] - SELECT b.book_id,b.book_code,b.book_name FROM sys_acc_journal_book a LEFT JOIN lib_erp_book b ON b.book_id = a.book_id WHERE b.book_code IS NOT NULL AND a.journal_id = '2' AND b.company_id = '1' ORDER BY b.book_code 
[18:05:15] - SELECT COUNT(a.approval_id) AS numRow FROM sys_erp_approval a LEFT JOIN sys_erp_modules b ON b.module_id = a.module_id WHERE b.module_code = 'ACC00201'
[18:05:15] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-09' ORDER BY a.trans_no ASC 
[18:05:15] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '1723'
            
[18:05:16] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 1723
[18:05:16] - SELECT * FROM select_ewt WHERE trans_id = 1723
[18:05:16] - SELECT * FROM select_final_tax WHERE trans_id = 1723
[18:05:16] - SELECT * FROM select_input_vat WHERE trans_id = 1723
[18:05:16] - SELECT * FROM select_output_vat WHERE trans_id = 1723
[18:05:16] - SELECT * FROM select_prepaid WHERE trans_id = 1723
[18:05:16] - SELECT * FROM select_fixed_asset WHERE trans_id = 1723
[18:05:16] - SELECT * FROM select_checks WHERE trans_id = 1723
[18:05:17] - SELECT * FROM trans_header_particular WHERE trans_id = 1723
[18:05:20] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-09' ORDER BY a.trans_no ASC 
[18:05:20] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '2340'
            
[18:05:20] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 2340
[18:05:21] - SELECT * FROM select_ewt WHERE trans_id = 2340
[18:05:21] - SELECT * FROM select_final_tax WHERE trans_id = 2340
[18:05:21] - SELECT * FROM select_input_vat WHERE trans_id = 2340
[18:05:21] - SELECT * FROM select_output_vat WHERE trans_id = 2340
[18:05:21] - SELECT * FROM select_prepaid WHERE trans_id = 2340
[18:05:21] - SELECT * FROM select_fixed_asset WHERE trans_id = 2340
[18:05:21] - SELECT * FROM select_checks WHERE trans_id = 2340
[18:05:21] - SELECT * FROM trans_header_particular WHERE trans_id = 2340
[18:06:07] - SELECT b.book_id,b.book_code,b.book_name FROM sys_acc_journal_book a LEFT JOIN lib_erp_book b ON b.book_id = a.book_id WHERE b.book_code IS NOT NULL AND a.journal_id = '2' AND b.company_id = '1' ORDER BY b.book_code 
[18:06:11] - SELECT COUNT(a.approval_id) AS numRow FROM sys_erp_approval a LEFT JOIN sys_erp_modules b ON b.module_id = a.module_id WHERE b.module_code = 'ACC00201'
[18:06:12] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-03' ORDER BY a.trans_no ASC 
[18:06:12] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '1893'
            
[18:06:12] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 1893
[18:06:13] - SELECT * FROM select_ewt WHERE trans_id = 1893
[18:06:13] - SELECT * FROM select_final_tax WHERE trans_id = 1893
[18:06:13] - SELECT * FROM select_input_vat WHERE trans_id = 1893
[18:06:13] - SELECT * FROM select_output_vat WHERE trans_id = 1893
[18:06:13] - SELECT * FROM select_prepaid WHERE trans_id = 1893
[18:06:13] - SELECT * FROM select_fixed_asset WHERE trans_id = 1893
[18:06:13] - SELECT * FROM select_checks WHERE trans_id = 1893
[18:06:13] - SELECT * FROM trans_header_particular WHERE trans_id = 1893
[18:06:19] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-03' ORDER BY a.trans_no ASC 
[18:06:19] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '225'
            
[18:06:19] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 225
[18:06:20] - SELECT * FROM select_ewt WHERE trans_id = 225
[18:06:20] - SELECT * FROM select_final_tax WHERE trans_id = 225
[18:06:20] - SELECT * FROM select_input_vat WHERE trans_id = 225
[18:06:20] - SELECT * FROM select_output_vat WHERE trans_id = 225
[18:06:20] - SELECT * FROM select_prepaid WHERE trans_id = 225
[18:06:20] - SELECT * FROM select_fixed_asset WHERE trans_id = 225
[18:06:20] - SELECT * FROM select_checks WHERE trans_id = 225
[18:06:20] - SELECT * FROM trans_header_particular WHERE trans_id = 225
[18:06:24] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[18:06:28] - SELECT * FROM lib_erp_chart
[18:06:29] - SELECT * FROM lib_erp_project
[18:06:33] - SELECT * FROM lib_erp_department
[18:06:35] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[18:06:36] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[18:06:36] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 225 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-3-20' AND a.trans_id <> 225 AND a.general_id = 676 AND a.currency_id = 1 AND a.project_id  = 9 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[18:06:49] - SEL: jbooks_id = '' AND ref_jbooks_id = '39497' , FOUND: 0
[18:06:50] - SELECT MAX(IFNULL(isLock,False)) AS isLock FROM transaction_locking WHERE journal_id = '2' AND '2018-03-20' BETWEEN date_from AND date_to
[18:06:50] - SELECT trans_no AS existing FROM trans_header WHERE trans_no = '100650' AND trans_id <> '225' AND journal_id = '2'
[18:06:50] - CALL SaveTransaction('Update','trans_header','trans_id,trans_no,trans_date,book_id,journal_id,general_id,currency_id,exchange_rate,based_rate,amount,amount_based,description','225|100650|2018-03-20|11|2|676|1|1.0000000000|1.0000000000|27512.7700000000|27512.7700000000|Payment MA - Mar 2018|','trans_id','225','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:06:50] - CALL SaveTransaction('Update','trans_header_cr','trans_cr_id,trans_id,si_no','50|225||','trans_cr_id','50','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:06:51] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','2029|225|9|8||||3|Payment MA - Mar 2018|27512.7700000000|0.0000000000|1|1.0000000000|1.0000000000|27512.7700000000|0.0000000000|||','jbooks_id','2029','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:06:51] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','2031|225|9|8||||416|Payment MA - Mar 2018|0.0000000000|17673.4500000000|1|1.0000000000|1.0000000000|0.0000000000|17673.4500000000|||','jbooks_id','2031','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:06:51] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','8436|225|9|8||||223|MRI VAR3 B7 L1:12,410.6400, FIRE VAR3: 679.11|0.0000000000|253.1100000000|1|1.0000000000|1.0000000000|0.0000000000|253.1100000000|10|755|','jbooks_id','8436','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:06:51] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','8437|225|9|8||||223||0.0000000000|423.8900000000|1|1.0000000000|1.0000000000|0.0000000000|423.8900000000|10|8335|','jbooks_id','8437','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:06:51] - CALL SaveTransaction('Remove','trans_jbooks','','13189|','jbooks_id','13189|','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:06:51] - CALL SaveTransaction('Insert','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','|225|9|8|||2406|46||0.0|9162.32|1|1.0000000000|1.0000000000|0|9162.32|676|39497|','jbooks_id','','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:06:51] - SELECT jbooks_id AS id FROM trans_jbooks WHERE   ROUND(trans_id,2) = ROUND(225,2)  AND  ROUND(project_id,2) = ROUND(9,2)  AND  ROUND(department_id,2) = ROUND(8,2)  AND  ROUND(project_unit_no_id,2) = ROUND(2406,2)  AND  ROUND(account_id,2) = ROUND(46,2)  AND  ROUND(debit,2) = ROUND(0.0,2)  AND  ROUND(credit,2) = ROUND(9162.32,2)  AND  ROUND(currency_id,2) = ROUND(1,2)  AND  ROUND(exchange_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(based_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(credit_based,2) = ROUND(9162.32,2)  AND  ROUND(general_id,2) = ROUND(676,2)  AND  ROUND(ref_jbooks_id,2) = ROUND(39497,2) 
[18:06:51] - CALL SaveTransaction('Update','trans_checks','check_id,jbooks_id,general_id,check_no,check_date,check_amount,check_amount_based,bank_id,bank_code,bank_name,cleared,released,cancelled,crossed,replacement_check_no,cleared_date,deposit_date,cancel_date,replaced,currency_id,exchange_rate,based_rate','1757|2029|676|10781026|2018-03-20|27512.7700000000|0.0000000000|54|||0|0|0|0||2018-03-20|2018-03-20|2018-03-20|0|1|1.0000000000|1.0000000000|','check_id','1757','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:06:51] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-03' ORDER BY a.trans_no ASC 
[18:06:52] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '225'
            
[18:06:52] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 225
[18:06:52] - SELECT * FROM select_ewt WHERE trans_id = 225
[18:06:52] - SELECT * FROM select_final_tax WHERE trans_id = 225
[18:06:52] - SELECT * FROM select_input_vat WHERE trans_id = 225
[18:06:53] - SELECT * FROM select_output_vat WHERE trans_id = 225
[18:06:53] - SELECT * FROM select_prepaid WHERE trans_id = 225
[18:06:53] - SELECT * FROM select_fixed_asset WHERE trans_id = 225
[18:06:53] - SELECT * FROM select_checks WHERE trans_id = 225
[18:06:53] - SELECT * FROM trans_header_particular WHERE trans_id = 225
[18:07:00] - SELECT b.book_id,b.book_code,b.book_name FROM sys_acc_journal_book a LEFT JOIN lib_erp_book b ON b.book_id = a.book_id WHERE b.book_code IS NOT NULL AND a.journal_id = '2' AND b.company_id = '1' ORDER BY b.book_code 
[18:07:03] - SELECT COUNT(a.approval_id) AS numRow FROM sys_erp_approval a LEFT JOIN sys_erp_modules b ON b.module_id = a.module_id WHERE b.module_code = 'ACC00201'
[18:07:03] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2019-04' ORDER BY a.trans_no ASC 
[18:07:10] - SELECT b.book_id,b.book_code,b.book_name FROM sys_acc_journal_book a LEFT JOIN lib_erp_book b ON b.book_id = a.book_id WHERE b.book_code IS NOT NULL AND a.journal_id = '2' AND b.company_id = '1' ORDER BY b.book_code 
[18:07:13] - SELECT COUNT(a.approval_id) AS numRow FROM sys_erp_approval a LEFT JOIN sys_erp_modules b ON b.module_id = a.module_id WHERE b.module_code = 'ACC00201'
[18:07:13] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-04' ORDER BY a.trans_no ASC 
[18:07:14] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '1895'
            
[18:07:14] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 1895
[18:07:14] - SELECT * FROM select_ewt WHERE trans_id = 1895
[18:07:14] - SELECT * FROM select_final_tax WHERE trans_id = 1895
[18:07:15] - SELECT * FROM select_input_vat WHERE trans_id = 1895
[18:07:15] - SELECT * FROM select_output_vat WHERE trans_id = 1895
[18:07:15] - SELECT * FROM select_prepaid WHERE trans_id = 1895
[18:07:15] - SELECT * FROM select_fixed_asset WHERE trans_id = 1895
[18:07:15] - SELECT * FROM select_checks WHERE trans_id = 1895
[18:07:15] - SELECT * FROM trans_header_particular WHERE trans_id = 1895
[18:07:25] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-04' ORDER BY a.trans_no ASC 
[18:07:26] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '226'
            
[18:07:26] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 226
[18:07:26] - SELECT * FROM select_ewt WHERE trans_id = 226
[18:07:27] - SELECT * FROM select_final_tax WHERE trans_id = 226
[18:07:27] - SELECT * FROM select_input_vat WHERE trans_id = 226
[18:07:27] - SELECT * FROM select_output_vat WHERE trans_id = 226
[18:07:27] - SELECT * FROM select_prepaid WHERE trans_id = 226
[18:07:27] - SELECT * FROM select_fixed_asset WHERE trans_id = 226
[18:07:27] - SELECT * FROM select_checks WHERE trans_id = 226
[18:07:27] - SELECT * FROM trans_header_particular WHERE trans_id = 226
[18:07:28] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[18:07:33] - SELECT * FROM lib_erp_chart
[18:07:34] - SELECT * FROM lib_erp_project
[18:07:37] - SELECT * FROM lib_erp_department
[18:07:40] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[18:07:40] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 226 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-4-20' AND a.trans_id <> 226 AND a.general_id = 676 AND a.currency_id = 1 AND a.project_id  = 9 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[18:07:46] - SEL: jbooks_id = '' AND ref_jbooks_id = '39497' , FOUND: 0
[18:07:47] - SELECT MAX(IFNULL(isLock,False)) AS isLock FROM transaction_locking WHERE journal_id = '2' AND '2018-04-20' BETWEEN date_from AND date_to
[18:07:47] - SELECT trans_no AS existing FROM trans_header WHERE trans_no = '100896' AND trans_id <> '226' AND journal_id = '2'
[18:07:48] - CALL SaveTransaction('Update','trans_header','trans_id,trans_no,trans_date,book_id,journal_id,general_id,currency_id,exchange_rate,based_rate,amount,amount_based,description','226|100896|2018-04-20|11|2|676|1|1.0000000000|1.0000000000|27512.7700000000|27512.7700000000|Payment Ma - Apr 2018|','trans_id','226','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:07:48] - CALL SaveTransaction('Update','trans_header_cr','trans_cr_id,trans_id,si_no','51|226||','trans_cr_id','51','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:07:48] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','2033|226|9|8||||3|Payment Ma - Apr 2018|27512.7700000000|0.0000000000|1|1.0000000000|1.0000000000|27512.7700000000|0.0000000000|||','jbooks_id','2033','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:07:48] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','2035|226|9|8||||416|Payment Ma - Apr 2018|0.0000000000|17581.8300000000|1|1.0000000000|1.0000000000|0.0000000000|17581.8300000000|||','jbooks_id','2035','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:07:48] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','8438|226|9|8||||223|MRI VAR3 B7 L1:12,410.6400, FIRE VAR3: 679.11|0.0000000000|677.0000000000|1|1.0000000000|1.0000000000|0.0000000000|677.0000000000|10|755|','jbooks_id','8438','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:07:48] - CALL SaveTransaction('Remove','trans_jbooks','','13190|','jbooks_id','13190|','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:07:48] - CALL SaveTransaction('Insert','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','|226|9|8|||2406|46||0.0|9253.94|1|1.0000000000|1.0000000000|0|9253.94|676|39497|','jbooks_id','','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:07:48] - SELECT jbooks_id AS id FROM trans_jbooks WHERE   ROUND(trans_id,2) = ROUND(226,2)  AND  ROUND(project_id,2) = ROUND(9,2)  AND  ROUND(department_id,2) = ROUND(8,2)  AND  ROUND(project_unit_no_id,2) = ROUND(2406,2)  AND  ROUND(account_id,2) = ROUND(46,2)  AND  ROUND(debit,2) = ROUND(0.0,2)  AND  ROUND(credit,2) = ROUND(9253.94,2)  AND  ROUND(currency_id,2) = ROUND(1,2)  AND  ROUND(exchange_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(based_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(credit_based,2) = ROUND(9253.94,2)  AND  ROUND(general_id,2) = ROUND(676,2)  AND  ROUND(ref_jbooks_id,2) = ROUND(39497,2) 
[18:07:48] - CALL SaveTransaction('Update','trans_checks','check_id,jbooks_id,general_id,check_no,check_date,check_amount,check_amount_based,bank_id,bank_code,bank_name,cleared,released,cancelled,crossed,replacement_check_no,cleared_date,deposit_date,cancel_date,replaced,currency_id,exchange_rate,based_rate','1758|2033|676|10781027|2018-04-20|27512.7700000000|0.0000000000|54|||0|0|0|0||2018-04-20|2018-04-20|2018-04-20|0|1|1.0000000000|1.0000000000|','check_id','1758','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:07:48] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-04' ORDER BY a.trans_no ASC 
[18:07:49] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '226'
            
[18:07:49] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 226
[18:07:49] - SELECT * FROM select_ewt WHERE trans_id = 226
[18:07:50] - SELECT * FROM select_final_tax WHERE trans_id = 226
[18:07:50] - SELECT * FROM select_input_vat WHERE trans_id = 226
[18:07:50] - SELECT * FROM select_output_vat WHERE trans_id = 226
[18:07:50] - SELECT * FROM select_prepaid WHERE trans_id = 226
[18:07:50] - SELECT * FROM select_fixed_asset WHERE trans_id = 226
[18:07:50] - SELECT * FROM select_checks WHERE trans_id = 226
[18:07:50] - SELECT * FROM trans_header_particular WHERE trans_id = 226
[18:07:56] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-05' ORDER BY a.trans_no ASC 
[18:07:56] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '1898'
            
[18:07:56] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 1898
[18:07:57] - SELECT * FROM select_ewt WHERE trans_id = 1898
[18:07:57] - SELECT * FROM select_final_tax WHERE trans_id = 1898
[18:07:57] - SELECT * FROM select_input_vat WHERE trans_id = 1898
[18:07:57] - SELECT * FROM select_output_vat WHERE trans_id = 1898
[18:07:57] - SELECT * FROM select_prepaid WHERE trans_id = 1898
[18:07:57] - SELECT * FROM select_fixed_asset WHERE trans_id = 1898
[18:07:57] - SELECT * FROM select_checks WHERE trans_id = 1898
[18:07:57] - SELECT * FROM trans_header_particular WHERE trans_id = 1898
[18:08:02] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-05' ORDER BY a.trans_no ASC 
[18:08:03] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '227'
            
[18:08:03] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 227
[18:08:03] - SELECT * FROM select_ewt WHERE trans_id = 227
[18:08:03] - SELECT * FROM select_final_tax WHERE trans_id = 227
[18:08:03] - SELECT * FROM select_input_vat WHERE trans_id = 227
[18:08:03] - SELECT * FROM select_output_vat WHERE trans_id = 227
[18:08:04] - SELECT * FROM select_prepaid WHERE trans_id = 227
[18:08:04] - SELECT * FROM select_fixed_asset WHERE trans_id = 227
[18:08:04] - SELECT * FROM select_checks WHERE trans_id = 227
[18:08:04] - SELECT * FROM trans_header_particular WHERE trans_id = 227
[18:08:04] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[18:08:08] - SELECT * FROM lib_erp_chart
[18:08:09] - SELECT * FROM lib_erp_project
[18:08:11] - SELECT * FROM lib_erp_department
[18:08:13] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[18:08:13] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 227 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-5-21' AND a.trans_id <> 227 AND a.general_id = 676 AND a.currency_id = 1 AND a.project_id  = 9 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[18:08:21] - SEL: jbooks_id = '' AND ref_jbooks_id = '39497' , FOUND: 0
[18:08:22] - SELECT MAX(IFNULL(isLock,False)) AS isLock FROM transaction_locking WHERE journal_id = '2' AND '2018-05-21' BETWEEN date_from AND date_to
[18:08:22] - SELECT trans_no AS existing FROM trans_header WHERE trans_no = '101646' AND trans_id <> '227' AND journal_id = '2'
[18:08:22] - CALL SaveTransaction('Update','trans_header','trans_id,trans_no,trans_date,book_id,journal_id,general_id,currency_id,exchange_rate,based_rate,amount,amount_based,description','227|101646|2018-05-21|11|2|676|1|1.0000000000|1.0000000000|27512.7700000000|27512.7700000000|Payment MA - May 2018|','trans_id','227','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:08:22] - CALL SaveTransaction('Update','trans_header_cr','trans_cr_id,trans_id,si_no','52|227||','trans_cr_id','52','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:08:22] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','2037|227|9|8||||3|Payment MA - May 2018|27512.7700000000|0.0000000000|1|1.0000000000|1.0000000000|27512.7700000000|0.0000000000|||','jbooks_id','2037','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:08:22] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','2039|227|9|8||||416|Payment MA - May 2018|0.0000000000|17489.2900000000|1|1.0000000000|1.0000000000|0.0000000000|17489.2900000000|||','jbooks_id','2039','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:08:22] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','8439|227|9|8||||223|MRI VAR3 B7 L1:12,410.6400, FIRE VAR3: 679.11|0.0000000000|677.0000000000|1|1.0000000000|1.0000000000|0.0000000000|677.0000000000|10|755|','jbooks_id','8439','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:08:22] - CALL SaveTransaction('Remove','trans_jbooks','','13191|','jbooks_id','13191|','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:08:22] - CALL SaveTransaction('Insert','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','|227|9|8|||2406|46||0.0|9346.48|1|1.0000000000|1.0000000000|0|9346.48|676|39497|','jbooks_id','','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:08:22] - SELECT jbooks_id AS id FROM trans_jbooks WHERE   ROUND(trans_id,2) = ROUND(227,2)  AND  ROUND(project_id,2) = ROUND(9,2)  AND  ROUND(department_id,2) = ROUND(8,2)  AND  ROUND(project_unit_no_id,2) = ROUND(2406,2)  AND  ROUND(account_id,2) = ROUND(46,2)  AND  ROUND(debit,2) = ROUND(0.0,2)  AND  ROUND(credit,2) = ROUND(9346.48,2)  AND  ROUND(currency_id,2) = ROUND(1,2)  AND  ROUND(exchange_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(based_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(credit_based,2) = ROUND(9346.48,2)  AND  ROUND(general_id,2) = ROUND(676,2)  AND  ROUND(ref_jbooks_id,2) = ROUND(39497,2) 
[18:08:23] - CALL SaveTransaction('Update','trans_checks','check_id,jbooks_id,general_id,check_no,check_date,check_amount,check_amount_based,bank_id,bank_code,bank_name,cleared,released,cancelled,crossed,replacement_check_no,cleared_date,deposit_date,cancel_date,replaced,currency_id,exchange_rate,based_rate','1759|2037|676|10781028|2018-05-20|27512.7700000000|0.0000000000|54|||0|0|0|0||2018-05-21|2018-05-21|2018-05-21|0|1|1.0000000000|1.0000000000|','check_id','1759','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:08:23] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-05' ORDER BY a.trans_no ASC 
[18:08:23] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '227'
            
[18:08:23] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 227
[18:08:24] - SELECT * FROM select_ewt WHERE trans_id = 227
[18:08:24] - SELECT * FROM select_final_tax WHERE trans_id = 227
[18:08:24] - SELECT * FROM select_input_vat WHERE trans_id = 227
[18:08:24] - SELECT * FROM select_output_vat WHERE trans_id = 227
[18:08:24] - SELECT * FROM select_prepaid WHERE trans_id = 227
[18:08:24] - SELECT * FROM select_fixed_asset WHERE trans_id = 227
[18:08:24] - SELECT * FROM select_checks WHERE trans_id = 227
[18:08:24] - SELECT * FROM trans_header_particular WHERE trans_id = 227
[18:08:29] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-06' ORDER BY a.trans_no ASC 
[18:08:30] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '1899'
            
[18:08:30] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 1899
[18:08:30] - SELECT * FROM select_ewt WHERE trans_id = 1899
[18:08:30] - SELECT * FROM select_final_tax WHERE trans_id = 1899
[18:08:30] - SELECT * FROM select_input_vat WHERE trans_id = 1899
[18:08:31] - SELECT * FROM select_output_vat WHERE trans_id = 1899
[18:08:31] - SELECT * FROM select_prepaid WHERE trans_id = 1899
[18:08:31] - SELECT * FROM select_fixed_asset WHERE trans_id = 1899
[18:08:31] - SELECT * FROM trans_header_particular WHERE trans_id = 1899
[18:08:39] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-06' ORDER BY a.trans_no ASC 
[18:08:40] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '228'
            
[18:08:40] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 228
[18:08:40] - SELECT * FROM select_ewt WHERE trans_id = 228
[18:08:40] - SELECT * FROM select_final_tax WHERE trans_id = 228
[18:08:41] - SELECT * FROM select_input_vat WHERE trans_id = 228
[18:08:41] - SELECT * FROM select_output_vat WHERE trans_id = 228
[18:08:41] - SELECT * FROM select_prepaid WHERE trans_id = 228
[18:08:41] - SELECT * FROM select_fixed_asset WHERE trans_id = 228
[18:08:41] - SELECT * FROM select_checks WHERE trans_id = 228
[18:08:41] - SELECT * FROM trans_header_particular WHERE trans_id = 228
[18:08:43] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[18:08:46] - SELECT * FROM lib_erp_chart
[18:08:46] - SELECT * FROM lib_erp_project
[18:08:49] - SELECT * FROM lib_erp_department
[18:08:50] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[18:08:51] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 228 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-6-20' AND a.trans_id <> 228 AND a.general_id = 676 AND a.currency_id = 1 AND a.project_id  = 9 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[18:08:59] - SEL: jbooks_id = '' AND ref_jbooks_id = '39497' , FOUND: 0
[18:09:00] - SELECT MAX(IFNULL(isLock,False)) AS isLock FROM transaction_locking WHERE journal_id = '2' AND '2018-06-20' BETWEEN date_from AND date_to
[18:09:00] - SELECT trans_no AS existing FROM trans_header WHERE trans_no = '102481' AND trans_id <> '228' AND journal_id = '2'
[18:09:01] - CALL SaveTransaction('Update','trans_header','trans_id,trans_no,trans_date,book_id,journal_id,general_id,currency_id,exchange_rate,based_rate,amount,amount_based,description','228|102481|2018-06-20|11|2|676|1|1.0000000000|1.0000000000|27512.7700000000|27512.7700000000|Payment Ma - June 2018|','trans_id','228','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:09:01] - CALL SaveTransaction('Update','trans_header_cr','trans_cr_id,trans_id,si_no','53|228||','trans_cr_id','53','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:09:01] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','2041|228|9|8||||3|Payment Ma - June 2018|27512.7700000000|0.0000000000|1|1.0000000000|1.0000000000|27512.7700000000|0.0000000000|||','jbooks_id','2041','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:09:01] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','2043|228|9|8||||416|Payment Ma - June 2018|0.0000000000|17395.8200000000|1|1.0000000000|1.0000000000|0.0000000000|17395.8200000000|||','jbooks_id','2043','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:09:01] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','8447|228|9|8||||223|MRI VAR3 B7 L1:12,410.6400, FIRE VAR3: 679.11|0.0000000000|677.0000000000|1|1.0000000000|1.0000000000|0.0000000000|677.0000000000|10|755|','jbooks_id','8447','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:09:01] - CALL SaveTransaction('Remove','trans_jbooks','','13192|','jbooks_id','13192|','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:09:01] - CALL SaveTransaction('Insert','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','|228|9|8|||2406|46||0.0|9439.95|1|1.0000000000|1.0000000000|0|9439.95|676|39497|','jbooks_id','','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:09:01] - SELECT jbooks_id AS id FROM trans_jbooks WHERE   ROUND(trans_id,2) = ROUND(228,2)  AND  ROUND(project_id,2) = ROUND(9,2)  AND  ROUND(department_id,2) = ROUND(8,2)  AND  ROUND(project_unit_no_id,2) = ROUND(2406,2)  AND  ROUND(account_id,2) = ROUND(46,2)  AND  ROUND(debit,2) = ROUND(0.0,2)  AND  ROUND(credit,2) = ROUND(9439.95,2)  AND  ROUND(currency_id,2) = ROUND(1,2)  AND  ROUND(exchange_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(based_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(credit_based,2) = ROUND(9439.95,2)  AND  ROUND(general_id,2) = ROUND(676,2)  AND  ROUND(ref_jbooks_id,2) = ROUND(39497,2) 
[18:09:01] - CALL SaveTransaction('Update','trans_checks','check_id,jbooks_id,general_id,check_no,check_date,check_amount,check_amount_based,bank_id,bank_code,bank_name,cleared,released,cancelled,crossed,replacement_check_no,cleared_date,deposit_date,cancel_date,replaced,currency_id,exchange_rate,based_rate','1760|2041|676|10781029|2018-06-20|27512.7700000000|0.0000000000|54|||0|0|0|0||2018-06-20|2018-06-20|2018-06-20|0|1|1.0000000000|1.0000000000|','check_id','1760','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:09:01] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-06' ORDER BY a.trans_no ASC 
[18:09:02] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '228'
            
[18:09:02] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 228
[18:09:02] - SELECT * FROM select_ewt WHERE trans_id = 228
[18:09:03] - SELECT * FROM select_final_tax WHERE trans_id = 228
[18:09:03] - SELECT * FROM select_input_vat WHERE trans_id = 228
[18:09:03] - SELECT * FROM select_output_vat WHERE trans_id = 228
[18:09:03] - SELECT * FROM select_prepaid WHERE trans_id = 228
[18:09:03] - SELECT * FROM select_fixed_asset WHERE trans_id = 228
[18:09:03] - SELECT * FROM select_checks WHERE trans_id = 228
[18:09:03] - SELECT * FROM trans_header_particular WHERE trans_id = 228
[18:09:09] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-07' ORDER BY a.trans_no ASC 
[18:09:10] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '9615'
            
[18:09:10] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 9615
[18:09:10] - SELECT * FROM select_ewt WHERE trans_id = 9615
[18:09:10] - SELECT * FROM select_final_tax WHERE trans_id = 9615
[18:09:10] - SELECT * FROM select_input_vat WHERE trans_id = 9615
[18:09:10] - SELECT * FROM select_output_vat WHERE trans_id = 9615
[18:09:11] - SELECT * FROM select_prepaid WHERE trans_id = 9615
[18:09:11] - SELECT * FROM select_fixed_asset WHERE trans_id = 9615
[18:09:11] - SELECT * FROM select_checks WHERE trans_id = 9615
[18:09:11] - SELECT * FROM trans_header_particular WHERE trans_id = 9615
[18:09:17] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-07' ORDER BY a.trans_no ASC 
[18:09:17] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '229'
            
[18:09:17] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 229
[18:09:18] - SELECT * FROM select_ewt WHERE trans_id = 229
[18:09:18] - SELECT * FROM select_final_tax WHERE trans_id = 229
[18:09:18] - SELECT * FROM select_input_vat WHERE trans_id = 229
[18:09:18] - SELECT * FROM select_output_vat WHERE trans_id = 229
[18:09:18] - SELECT * FROM select_prepaid WHERE trans_id = 229
[18:09:18] - SELECT * FROM select_fixed_asset WHERE trans_id = 229
[18:09:18] - SELECT * FROM select_checks WHERE trans_id = 229
[18:09:18] - SELECT * FROM trans_header_particular WHERE trans_id = 229
[18:09:20] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[18:09:27] - SELECT * FROM lib_erp_chart
[18:09:27] - SELECT * FROM lib_erp_project
[18:09:30] - SELECT * FROM lib_erp_department
[18:09:32] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[18:09:32] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 229 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-7-20' AND a.trans_id <> 229 AND a.general_id = 676 AND a.currency_id = 1 AND a.project_id  = 9 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[18:09:39] - SEL: jbooks_id = '' AND ref_jbooks_id = '39497' , FOUND: 0
[18:09:40] - SELECT MAX(IFNULL(isLock,False)) AS isLock FROM transaction_locking WHERE journal_id = '2' AND '2018-07-20' BETWEEN date_from AND date_to
[18:09:40] - SELECT trans_no AS existing FROM trans_header WHERE trans_no = '103568' AND trans_id <> '229' AND journal_id = '2'
[18:09:40] - CALL SaveTransaction('Update','trans_header','trans_id,trans_no,trans_date,book_id,journal_id,general_id,currency_id,exchange_rate,based_rate,amount,amount_based,description','229|103568|2018-07-20|11|2|676|1|1.0000000000|1.0000000000|27512.7700000000|27512.7700000000|Payment Ma - July 2018|','trans_id','229','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:09:40] - CALL SaveTransaction('Update','trans_header_cr','trans_cr_id,trans_id,si_no','54|229||','trans_cr_id','54','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:09:40] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','2045|229|9|8||||3|Payment Ma - July 2018|27512.7700000000|0.0000000000|1|1.0000000000|1.0000000000|27512.7700000000|0.0000000000|||','jbooks_id','2045','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:09:40] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','2047|229|9|8||||416|Payment Ma - July 2018|0.0000000000|17301.4200000000|1|1.0000000000|1.0000000000|0.0000000000|17301.4200000000|||','jbooks_id','2047','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:09:40] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','8448|229|9|8||||223|MRI VAR3 B7 L1:12,410.6400, FIRE VAR3: 679.11|0.0000000000|677.0000000000|1|1.0000000000|1.0000000000|0.0000000000|677.0000000000|10|755|','jbooks_id','8448','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:09:40] - CALL SaveTransaction('Remove','trans_jbooks','','13200|','jbooks_id','13200|','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:09:40] - CALL SaveTransaction('Insert','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','|229|9|8|||2406|46||0.0|9534.35|1|1.0000000000|1.0000000000|0|9534.35|676|39497|','jbooks_id','','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:09:41] - SELECT jbooks_id AS id FROM trans_jbooks WHERE   ROUND(trans_id,2) = ROUND(229,2)  AND  ROUND(project_id,2) = ROUND(9,2)  AND  ROUND(department_id,2) = ROUND(8,2)  AND  ROUND(project_unit_no_id,2) = ROUND(2406,2)  AND  ROUND(account_id,2) = ROUND(46,2)  AND  ROUND(debit,2) = ROUND(0.0,2)  AND  ROUND(credit,2) = ROUND(9534.35,2)  AND  ROUND(currency_id,2) = ROUND(1,2)  AND  ROUND(exchange_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(based_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(credit_based,2) = ROUND(9534.35,2)  AND  ROUND(general_id,2) = ROUND(676,2)  AND  ROUND(ref_jbooks_id,2) = ROUND(39497,2) 
[18:09:41] - CALL SaveTransaction('Update','trans_checks','check_id,jbooks_id,general_id,check_no,check_date,check_amount,check_amount_based,bank_id,bank_code,bank_name,cleared,released,cancelled,crossed,replacement_check_no,cleared_date,deposit_date,cancel_date,replaced,currency_id,exchange_rate,based_rate','1761|2045|676|10781030|2018-07-20|27512.7700000000|0.0000000000|54|||0|0|0|0||2018-07-20|2018-07-20|2018-07-20|0|1|1.0000000000|1.0000000000|','check_id','1761','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:09:41] - CALL SaveTransaction('Update','trans_checks','check_id,jbooks_id,general_id,check_no,check_date,check_amount,check_amount_based,bank_id,bank_code,bank_name,cleared,released,cancelled,crossed,replacement_check_no,cleared_date,deposit_date,cancel_date,replaced,currency_id,exchange_rate,based_rate','1098|8448|355|FT|2018-06-29|204169.1800000000|10927542.8519600000|4|||0|0|0|0||2018-06-29|2018-06-29|2018-06-29|0|2|53.5220000000|1.0000000000|','check_id','1098','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:09:41] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-07' ORDER BY a.trans_no ASC 
[18:09:41] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '229'
            
[18:09:41] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 229
[18:09:42] - SELECT * FROM select_ewt WHERE trans_id = 229
[18:09:42] - SELECT * FROM select_final_tax WHERE trans_id = 229
[18:09:42] - SELECT * FROM select_input_vat WHERE trans_id = 229
[18:09:42] - SELECT * FROM select_output_vat WHERE trans_id = 229
[18:09:42] - SELECT * FROM select_prepaid WHERE trans_id = 229
[18:09:42] - SELECT * FROM select_fixed_asset WHERE trans_id = 229
[18:09:42] - SELECT * FROM select_checks WHERE trans_id = 229
[18:09:42] - SELECT * FROM trans_header_particular WHERE trans_id = 229
[18:09:46] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-08' ORDER BY a.trans_no ASC 
[18:09:47] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '1732'
            
[18:09:47] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 1732
[18:09:47] - SELECT * FROM select_ewt WHERE trans_id = 1732
[18:09:48] - SELECT * FROM select_final_tax WHERE trans_id = 1732
[18:09:48] - SELECT * FROM select_input_vat WHERE trans_id = 1732
[18:09:48] - SELECT * FROM select_output_vat WHERE trans_id = 1732
[18:09:48] - SELECT * FROM select_prepaid WHERE trans_id = 1732
[18:09:48] - SELECT * FROM select_fixed_asset WHERE trans_id = 1732
[18:09:48] - SELECT * FROM select_checks WHERE trans_id = 1732
[18:09:48] - SELECT * FROM trans_header_particular WHERE trans_id = 1732
[18:09:58] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-08' ORDER BY a.trans_no ASC 
[18:09:59] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '230'
            
[18:09:59] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 230
[18:09:59] - SELECT * FROM select_ewt WHERE trans_id = 230
[18:09:59] - SELECT * FROM select_final_tax WHERE trans_id = 230
[18:09:59] - SELECT * FROM select_input_vat WHERE trans_id = 230
[18:10:00] - SELECT * FROM select_output_vat WHERE trans_id = 230
[18:10:00] - SELECT * FROM select_prepaid WHERE trans_id = 230
[18:10:00] - SELECT * FROM select_fixed_asset WHERE trans_id = 230
[18:10:00] - SELECT * FROM select_checks WHERE trans_id = 230
[18:10:00] - SELECT * FROM trans_header_particular WHERE trans_id = 230
[18:10:01] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[18:10:11] - SELECT * FROM lib_erp_chart
[18:10:11] - SELECT * FROM lib_erp_project
[18:10:14] - SELECT * FROM lib_erp_department
[18:10:17] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[18:10:17] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 230 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-8-24' AND a.trans_id <> 230 AND a.general_id = 676 AND a.currency_id = 1 AND a.project_id  = 9 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[18:10:23] - SEL: jbooks_id = '' AND ref_jbooks_id = '39497' , FOUND: 0
[18:10:24] - SELECT MAX(IFNULL(isLock,False)) AS isLock FROM transaction_locking WHERE journal_id = '2' AND '2018-08-24' BETWEEN date_from AND date_to
[18:10:24] - SELECT trans_no AS existing FROM trans_header WHERE trans_no = '104381' AND trans_id <> '230' AND journal_id = '2'
[18:10:25] - CALL SaveTransaction('Update','trans_header','trans_id,trans_no,trans_date,book_id,journal_id,general_id,currency_id,exchange_rate,based_rate,amount,amount_based,description','230|104381|2018-08-24|11|2|676|1|1.0000000000|1.0000000000|27512.7700000000|27512.7700000000|Payment MA - Aug 2018|','trans_id','230','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:10:25] - CALL SaveTransaction('Update','trans_header_cr','trans_cr_id,trans_id,si_no','55|230||','trans_cr_id','55','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:10:25] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','2049|230|9|8||||3||27512.7700000000|0.0000000000|1|1.0000000000|1.0000000000|27512.7700000000|0.0000000000|||','jbooks_id','2049','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:10:25] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','2051|230|9|8||||416|Payment MA - Aug 2018|0.0000000000|17206.0800000000|1|1.0000000000|1.0000000000|0.0000000000|17206.0800000000|||','jbooks_id','2051','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:10:25] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','2053|230|9|8||||419|Payment MA - Aug 2018|0.0000000000|89.4500000000|1|1.0000000000|1.0000000000|0.0000000000|89.4500000000|||','jbooks_id','2053','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:10:25] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','8449|230|9|8||||223|MRI VAR3 B7 L1:12,410.6400, FIRE VAR3: 679.11|0.0000000000|677.0000000000|1|1.0000000000|1.0000000000|0.0000000000|677.0000000000|10|755|','jbooks_id','8449','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:10:25] - CALL SaveTransaction('Remove','trans_jbooks','','13201|','jbooks_id','13201|','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:10:25] - CALL SaveTransaction('Insert','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','|230|9|8|||2406|46||0.0|9540.24|1|1.0000000000|1.0000000000|0|9540.24|676|39497|','jbooks_id','','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:10:25] - SELECT jbooks_id AS id FROM trans_jbooks WHERE   ROUND(trans_id,2) = ROUND(230,2)  AND  ROUND(project_id,2) = ROUND(9,2)  AND  ROUND(department_id,2) = ROUND(8,2)  AND  ROUND(project_unit_no_id,2) = ROUND(2406,2)  AND  ROUND(account_id,2) = ROUND(46,2)  AND  ROUND(debit,2) = ROUND(0.0,2)  AND  ROUND(credit,2) = ROUND(9540.24,2)  AND  ROUND(currency_id,2) = ROUND(1,2)  AND  ROUND(exchange_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(based_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(credit_based,2) = ROUND(9540.24,2)  AND  ROUND(general_id,2) = ROUND(676,2)  AND  ROUND(ref_jbooks_id,2) = ROUND(39497,2) 
[18:10:25] - CALL SaveTransaction('Update','trans_checks','check_id,jbooks_id,general_id,check_no,check_date,check_amount,check_amount_based,bank_id,bank_code,bank_name,cleared,released,cancelled,crossed,replacement_check_no,cleared_date,deposit_date,cancel_date,replaced,currency_id,exchange_rate,based_rate','1762|2049|676|10781031|2018-08-20|27512.7700000000|0.0000000000|54|||0|0|0|0||2018-08-24|2018-08-24|2018-08-24|0|1|1.0000000000|1.0000000000|','check_id','1762','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:10:26] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-08' ORDER BY a.trans_no ASC 
[18:10:26] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '230'
            
[18:10:26] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 230
[18:10:26] - SELECT * FROM select_ewt WHERE trans_id = 230
[18:10:27] - SELECT * FROM select_final_tax WHERE trans_id = 230
[18:10:27] - SELECT * FROM select_input_vat WHERE trans_id = 230
[18:10:27] - SELECT * FROM select_output_vat WHERE trans_id = 230
[18:10:27] - SELECT * FROM select_prepaid WHERE trans_id = 230
[18:10:27] - SELECT * FROM select_fixed_asset WHERE trans_id = 230
[18:10:27] - SELECT * FROM select_checks WHERE trans_id = 230
[18:10:27] - SELECT * FROM trans_header_particular WHERE trans_id = 230
[18:10:37] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-09' ORDER BY a.trans_no ASC 
[18:10:38] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '1723'
            
[18:10:38] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 1723
[18:10:38] - SELECT * FROM select_ewt WHERE trans_id = 1723
[18:10:38] - SELECT * FROM select_final_tax WHERE trans_id = 1723
[18:10:38] - SELECT * FROM select_input_vat WHERE trans_id = 1723
[18:10:38] - SELECT * FROM select_output_vat WHERE trans_id = 1723
[18:10:39] - SELECT * FROM select_prepaid WHERE trans_id = 1723
[18:10:39] - SELECT * FROM select_fixed_asset WHERE trans_id = 1723
[18:10:39] - SELECT * FROM select_checks WHERE trans_id = 1723
[18:10:39] - SELECT * FROM trans_header_particular WHERE trans_id = 1723
[18:10:56] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-09' ORDER BY a.trans_no ASC 
[18:10:56] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '2693'
            
[18:10:56] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 2693
[18:10:57] - SELECT * FROM select_ewt WHERE trans_id = 2693
[18:10:57] - SELECT * FROM select_final_tax WHERE trans_id = 2693
[18:10:57] - SELECT * FROM select_input_vat WHERE trans_id = 2693
[18:10:57] - SELECT * FROM select_output_vat WHERE trans_id = 2693
[18:10:57] - SELECT * FROM select_prepaid WHERE trans_id = 2693
[18:10:57] - SELECT * FROM select_fixed_asset WHERE trans_id = 2693
[18:10:57] - SELECT * FROM select_checks WHERE trans_id = 2693
[18:10:57] - SELECT * FROM trans_header_particular WHERE trans_id = 2693
[18:10:58] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[18:11:02] - SELECT * FROM lib_erp_chart
[18:11:03] - SELECT * FROM lib_erp_project
[18:11:06] - SELECT * FROM lib_erp_department
[18:11:08] - SELECT * FROM lib_erp_project
[18:11:10] - SELECT * FROM lib_erp_department
[18:11:11] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[18:11:11] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 2693 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-9-20' AND a.trans_id <> 2693 AND a.general_id = 676 AND a.currency_id = 1 AND a.project_id  = 9 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[18:11:19] - SEL: jbooks_id = '' AND ref_jbooks_id = '39497' , FOUND: 0
[18:11:20] - SELECT MAX(IFNULL(isLock,False)) AS isLock FROM transaction_locking WHERE journal_id = '2' AND '2018-09-20' BETWEEN date_from AND date_to
[18:11:20] - SELECT trans_no AS existing FROM trans_header WHERE trans_no = '105452' AND trans_id <> '2693' AND journal_id = '2'
[18:11:20] - CALL SaveTransaction('Update','trans_header','trans_id,trans_no,trans_date,book_id,journal_id,general_id,currency_id,exchange_rate,based_rate,amount,amount_based,description','2693|105452|2018-09-20|11|2|676|1|1.0000000000|1.0000000000|27512.7700000000|27512.7700000000|MA for Sep 2018|','trans_id','2693','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:11:20] - CALL SaveTransaction('Update','trans_header_cr','trans_cr_id,trans_id,si_no','1372|2693||','trans_cr_id','1372','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:11:21] - CALL SaveTransaction('Remove','trans_jbooks','','13202|','jbooks_id','13202|','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:11:21] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','13203|2693|9|8||||416||0.0000000000|17109.7800000000|1|1.0000000000|1.0000000000|0.0000000000|17109.7800000000|||','jbooks_id','13203','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:11:21] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','13204|2693|9|8||||223|Payment for MRI/FIRE Insurance of VF<, CV, CLV, MV, VAR1,2,and 3.|0.0000000000|677.0000000000|1|1.0000000000|1.0000000000|0.0000000000|677.0000000000|10|4894|','jbooks_id','13204','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:11:21] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','13205|2693|9|8||||3||27512.7700000000|0.0000000000|1|1.0000000000|1.0000000000|27512.7700000000|0.0000000000|||','jbooks_id','13205','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:11:21] - CALL SaveTransaction('Insert','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','|2693|9|8|||2406|46||0.0|9725.99|1|1.0000000000|1.0000000000|0|9725.99|676|39497|','jbooks_id','','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:11:21] - SELECT jbooks_id AS id FROM trans_jbooks WHERE   ROUND(trans_id,2) = ROUND(2693,2)  AND  ROUND(project_id,2) = ROUND(9,2)  AND  ROUND(department_id,2) = ROUND(8,2)  AND  ROUND(project_unit_no_id,2) = ROUND(2406,2)  AND  ROUND(account_id,2) = ROUND(46,2)  AND  ROUND(debit,2) = ROUND(0.0,2)  AND  ROUND(credit,2) = ROUND(9725.99,2)  AND  ROUND(currency_id,2) = ROUND(1,2)  AND  ROUND(exchange_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(based_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(credit_based,2) = ROUND(9725.99,2)  AND  ROUND(general_id,2) = ROUND(676,2)  AND  ROUND(ref_jbooks_id,2) = ROUND(39497,2) 
[18:11:21] - CALL SaveTransaction('Update','trans_checks','check_id,jbooks_id,general_id,check_no,check_date,check_amount,check_amount_based,bank_id,bank_code,bank_name,cleared,released,cancelled,crossed,replacement_check_no,cleared_date,deposit_date,cancel_date,replaced,currency_id,exchange_rate,based_rate','4018|13205|676|10781032|2018-09-20|27512.7700000000|27512.7700000000|54||LDB|0|0|0|0||2018-09-20|2018-09-20|2018-09-20|0|1|1.0000000000|1.0000000000|','check_id','4018','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:11:21] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-09' ORDER BY a.trans_no ASC 
[18:11:22] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '2693'
            
[18:11:22] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 2693
[18:11:22] - SELECT * FROM select_ewt WHERE trans_id = 2693
[18:11:22] - SELECT * FROM select_final_tax WHERE trans_id = 2693
[18:11:22] - SELECT * FROM select_input_vat WHERE trans_id = 2693
[18:11:23] - SELECT * FROM select_output_vat WHERE trans_id = 2693
[18:11:23] - SELECT * FROM select_prepaid WHERE trans_id = 2693
[18:11:23] - SELECT * FROM select_fixed_asset WHERE trans_id = 2693
[18:11:23] - SELECT * FROM select_checks WHERE trans_id = 2693
[18:11:23] - SELECT * FROM trans_header_particular WHERE trans_id = 2693
[18:11:34] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-09' ORDER BY a.trans_no ASC 
[18:11:34] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '2694'
            
[18:11:34] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 2694
[18:11:35] - SELECT * FROM select_ewt WHERE trans_id = 2694
[18:11:35] - SELECT * FROM select_final_tax WHERE trans_id = 2694
[18:11:35] - SELECT * FROM select_input_vat WHERE trans_id = 2694
[18:11:35] - SELECT * FROM select_output_vat WHERE trans_id = 2694
[18:11:35] - SELECT * FROM select_prepaid WHERE trans_id = 2694
[18:11:35] - SELECT * FROM select_fixed_asset WHERE trans_id = 2694
[18:11:35] - SELECT * FROM select_checks WHERE trans_id = 2694
[18:11:35] - SELECT * FROM trans_header_particular WHERE trans_id = 2694
[18:11:37] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[18:11:40] - SELECT * FROM lib_erp_chart
[18:11:44] - SELECT * FROM lib_erp_project
[18:11:46] - SELECT * FROM lib_erp_department
[18:11:48] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[18:11:48] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 2694 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-9-18' AND a.trans_id <> 2694 AND a.general_id = 676 AND a.currency_id = 1 AND a.project_id  = 9 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[18:11:52] - SEL: jbooks_id = '' AND ref_jbooks_id = '39497' , FOUND: 0
[18:11:53] - SELECT MAX(IFNULL(isLock,False)) AS isLock FROM transaction_locking WHERE journal_id = '2' AND '2018-09-18' BETWEEN date_from AND date_to
[18:11:54] - SELECT trans_no AS existing FROM trans_header WHERE trans_no = '105047' AND trans_id <> '2694' AND journal_id = '2'
[18:11:54] - CALL SaveTransaction('Update','trans_header','trans_id,trans_no,trans_date,book_id,journal_id,general_id,currency_id,exchange_rate,based_rate,amount,amount_based,description','2694|105047|2018-09-18|11|2|676|1|1.0000000000|1.0000000000|90.0000000000|90.0000000000|MA|','trans_id','2694','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:11:54] - CALL SaveTransaction('Update','trans_header_cr','trans_cr_id,trans_id,si_no','1373|2694||','trans_cr_id','1373','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:11:54] - CALL SaveTransaction('Remove','trans_jbooks','','13206|','jbooks_id','13206|','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:11:54] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','13207|2694|9|8||||9||90.0000000000|0.0000000000|1|1.0000000000|1.0000000000|90.0000000000|0.0000000000|||','jbooks_id','13207','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:11:54] - CALL SaveTransaction('Insert','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','|2694|9|8|||2406|46||0.0|90|1|1.0000000000|1.0000000000|0|90|676|39497|','jbooks_id','','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:11:54] - SELECT jbooks_id AS id FROM trans_jbooks WHERE   ROUND(trans_id,2) = ROUND(2694,2)  AND  ROUND(project_id,2) = ROUND(9,2)  AND  ROUND(department_id,2) = ROUND(8,2)  AND  ROUND(project_unit_no_id,2) = ROUND(2406,2)  AND  ROUND(account_id,2) = ROUND(46,2)  AND  ROUND(debit,2) = ROUND(0.0,2)  AND  ROUND(credit,2) = ROUND(90,2)  AND  ROUND(currency_id,2) = ROUND(1,2)  AND  ROUND(exchange_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(based_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(credit_based,2) = ROUND(90,2)  AND  ROUND(general_id,2) = ROUND(676,2)  AND  ROUND(ref_jbooks_id,2) = ROUND(39497,2) 
[18:11:54] - CALL SaveTransaction('Update','trans_checks','check_id,jbooks_id,general_id,check_no,check_date,check_amount,check_amount_based,bank_id,bank_code,bank_name,cleared,released,cancelled,crossed,replacement_check_no,cleared_date,deposit_date,cancel_date,replaced,currency_id,exchange_rate,based_rate','4019|13207|676||2018-09-18|90.0000000000|90.0000000000|60|||0|0|0|0||2018-09-18|2018-09-18|2018-09-18|0|1|1.0000000000|1.0000000000|','check_id','4019','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:11:54] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-09' ORDER BY a.trans_no ASC 
[18:11:55] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '2694'
            
[18:11:55] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 2694
[18:11:55] - SELECT * FROM select_ewt WHERE trans_id = 2694
[18:11:55] - SELECT * FROM select_final_tax WHERE trans_id = 2694
[18:11:55] - SELECT * FROM select_input_vat WHERE trans_id = 2694
[18:11:55] - SELECT * FROM select_output_vat WHERE trans_id = 2694
[18:11:56] - SELECT * FROM select_prepaid WHERE trans_id = 2694
[18:11:56] - SELECT * FROM select_fixed_asset WHERE trans_id = 2694
[18:11:56] - SELECT * FROM select_checks WHERE trans_id = 2694
[18:11:56] - SELECT * FROM trans_header_particular WHERE trans_id = 2694
[18:12:07] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-03' ORDER BY a.trans_no ASC 
[18:12:08] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '1893'
            
[18:12:08] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 1893
[18:12:08] - SELECT * FROM select_ewt WHERE trans_id = 1893
[18:12:08] - SELECT * FROM select_final_tax WHERE trans_id = 1893
[18:12:09] - SELECT * FROM select_input_vat WHERE trans_id = 1893
[18:12:09] - SELECT * FROM select_output_vat WHERE trans_id = 1893
[18:12:09] - SELECT * FROM select_prepaid WHERE trans_id = 1893
[18:12:09] - SELECT * FROM select_fixed_asset WHERE trans_id = 1893
[18:12:09] - SELECT * FROM select_checks WHERE trans_id = 1893
[18:12:09] - SELECT * FROM trans_header_particular WHERE trans_id = 1893
[18:12:14] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-03' ORDER BY a.trans_no ASC 
[18:12:14] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '2877'
            
[18:12:15] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 2877
[18:12:15] - SELECT * FROM select_ewt WHERE trans_id = 2877
[18:12:15] - SELECT * FROM select_final_tax WHERE trans_id = 2877
[18:12:15] - SELECT * FROM select_input_vat WHERE trans_id = 2877
[18:12:15] - SELECT * FROM select_output_vat WHERE trans_id = 2877
[18:12:15] - SELECT * FROM select_prepaid WHERE trans_id = 2877
[18:12:15] - SELECT * FROM select_fixed_asset WHERE trans_id = 2877
[18:12:16] - SELECT * FROM select_checks WHERE trans_id = 2877
[18:12:16] - SELECT * FROM trans_header_particular WHERE trans_id = 2877
[18:12:16] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[18:12:21] - SELECT * FROM lib_erp_chart
[18:12:21] - SELECT * FROM lib_erp_project
[18:12:23] - SELECT * FROM lib_erp_department
[18:12:25] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[18:12:25] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 2877 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-3-11' AND a.trans_id <> 2877 AND a.general_id = 1078 AND a.currency_id = 1 AND a.project_id  = 9 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[18:12:32] - SEL: jbooks_id = '' AND ref_jbooks_id = '39543' , FOUND: 0
[18:12:33] - SELECT MAX(IFNULL(isLock,False)) AS isLock FROM transaction_locking WHERE journal_id = '2' AND '2018-03-11' BETWEEN date_from AND date_to
[18:12:33] - SELECT trans_no AS existing FROM trans_header WHERE trans_no = '100389' AND trans_id <> '2877' AND journal_id = '2'
[18:12:33] - CALL SaveTransaction('Update','trans_header','trans_id,trans_no,trans_date,book_id,journal_id,general_id,currency_id,exchange_rate,based_rate,amount,amount_based,description','2877|100389|2018-03-11|11|2|1078|1|1.0000000000|1.0000000000|27513.7700000000|27513.7700000000|MA for Mar 2018|','trans_id','2877','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:12:33] - CALL SaveTransaction('Update','trans_header_cr','trans_cr_id,trans_id,si_no','1470|2877||','trans_cr_id','1470','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:12:33] - CALL SaveTransaction('Remove','trans_jbooks','','14056|','jbooks_id','14056|','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:12:33] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','14057|2877|9|8||||416||0.0000000000|17673.3200000000|1|1.0000000000|1.0000000000|0.0000000000|17673.3200000000|||','jbooks_id','14057','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:12:33] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','14058|2877|9|8||||223|Payment for MRI/FIRE Insurance of CLV,VF,VAR Ph 1,2 and 3.|0.0000000000|677.0000000000|1|1.0000000000|1.0000000000|0.0000000000|677.0000000000|10|8511|','jbooks_id','14058','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:12:33] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','14059|2877|9|8||||3||27513.7700000000|0.0000000000|1|1.0000000000|1.0000000000|27513.7700000000|0.0000000000|||','jbooks_id','14059','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:12:33] - CALL SaveTransaction('Insert','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','|2877|9|8|||2481|46||0.0|9163.45|1|1.0000000000|1.0000000000|0|9163.45|1078|39543|','jbooks_id','','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:12:34] - SELECT jbooks_id AS id FROM trans_jbooks WHERE   ROUND(trans_id,2) = ROUND(2877,2)  AND  ROUND(project_id,2) = ROUND(9,2)  AND  ROUND(department_id,2) = ROUND(8,2)  AND  ROUND(project_unit_no_id,2) = ROUND(2481,2)  AND  ROUND(account_id,2) = ROUND(46,2)  AND  ROUND(debit,2) = ROUND(0.0,2)  AND  ROUND(credit,2) = ROUND(9163.45,2)  AND  ROUND(currency_id,2) = ROUND(1,2)  AND  ROUND(exchange_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(based_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(credit_based,2) = ROUND(9163.45,2)  AND  ROUND(general_id,2) = ROUND(1078,2)  AND  ROUND(ref_jbooks_id,2) = ROUND(39543,2) 
[18:12:34] - CALL SaveTransaction('Update','trans_checks','check_id,jbooks_id,general_id,check_no,check_date,check_amount,check_amount_based,bank_id,bank_code,bank_name,cleared,released,cancelled,crossed,replacement_check_no,cleared_date,deposit_date,cancel_date,replaced,currency_id,exchange_rate,based_rate','4205|14059|1078|4354076|2018-03-11|27513.7700000000|27513.7700000000|54||EWB|0|0|0|0||2018-03-11|2018-03-11|2018-03-11|0|1|1.0000000000|1.0000000000|','check_id','4205','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:12:34] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-03' ORDER BY a.trans_no ASC 
[18:12:34] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '2877'
            
[18:12:34] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 2877
[18:12:35] - SELECT * FROM select_ewt WHERE trans_id = 2877
[18:12:35] - SELECT * FROM select_final_tax WHERE trans_id = 2877
[18:12:35] - SELECT * FROM select_input_vat WHERE trans_id = 2877
[18:12:35] - SELECT * FROM select_output_vat WHERE trans_id = 2877
[18:12:35] - SELECT * FROM select_prepaid WHERE trans_id = 2877
[18:12:35] - SELECT * FROM select_fixed_asset WHERE trans_id = 2877
[18:12:35] - SELECT * FROM select_checks WHERE trans_id = 2877
[18:12:35] - SELECT * FROM trans_header_particular WHERE trans_id = 2877
[18:12:41] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-02' ORDER BY a.trans_no ASC 
[18:12:41] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '1890'
            
[18:12:41] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 1890
[18:12:42] - SELECT * FROM select_ewt WHERE trans_id = 1890
[18:12:42] - SELECT * FROM select_final_tax WHERE trans_id = 1890
[18:12:42] - SELECT * FROM select_input_vat WHERE trans_id = 1890
[18:12:42] - SELECT * FROM select_output_vat WHERE trans_id = 1890
[18:12:42] - SELECT * FROM select_prepaid WHERE trans_id = 1890
[18:12:42] - SELECT * FROM select_fixed_asset WHERE trans_id = 1890
[18:12:42] - SELECT * FROM select_checks WHERE trans_id = 1890
[18:12:42] - SELECT * FROM trans_header_particular WHERE trans_id = 1890
[18:12:45] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-04' ORDER BY a.trans_no ASC 
[18:12:46] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '1895'
            
[18:12:46] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 1895
[18:12:46] - SELECT * FROM select_ewt WHERE trans_id = 1895
[18:12:46] - SELECT * FROM select_final_tax WHERE trans_id = 1895
[18:12:46] - SELECT * FROM select_input_vat WHERE trans_id = 1895
[18:12:46] - SELECT * FROM select_output_vat WHERE trans_id = 1895
[18:12:46] - SELECT * FROM select_prepaid WHERE trans_id = 1895
[18:12:46] - SELECT * FROM select_fixed_asset WHERE trans_id = 1895
[18:12:47] - SELECT * FROM select_checks WHERE trans_id = 1895
[18:12:47] - SELECT * FROM trans_header_particular WHERE trans_id = 1895
[18:12:57] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-04' ORDER BY a.trans_no ASC 
[18:12:58] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '2878'
            
[18:12:58] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 2878
[18:12:58] - SELECT * FROM select_ewt WHERE trans_id = 2878
[18:12:58] - SELECT * FROM select_final_tax WHERE trans_id = 2878
[18:12:58] - SELECT * FROM select_input_vat WHERE trans_id = 2878
[18:12:58] - SELECT * FROM select_output_vat WHERE trans_id = 2878
[18:12:58] - SELECT * FROM select_prepaid WHERE trans_id = 2878
[18:12:59] - SELECT * FROM select_fixed_asset WHERE trans_id = 2878
[18:12:59] - SELECT * FROM select_checks WHERE trans_id = 2878
[18:12:59] - SELECT * FROM trans_header_particular WHERE trans_id = 2878
[18:12:59] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[18:13:03] - SELECT * FROM lib_erp_chart
[18:13:04] - SELECT * FROM lib_erp_project
[18:13:05] - SELECT * FROM lib_erp_department
[18:13:08] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[18:13:08] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 2878 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-4-2' AND a.trans_id <> 2878 AND a.general_id = 1078 AND a.currency_id = 1 AND a.project_id  = 9 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[18:13:15] - SEL: jbooks_id = '' AND ref_jbooks_id = '39543' , FOUND: 0
[18:13:16] - SELECT MAX(IFNULL(isLock,False)) AS isLock FROM transaction_locking WHERE journal_id = '2' AND '2018-04-02' BETWEEN date_from AND date_to
[18:13:16] - SELECT trans_no AS existing FROM trans_header WHERE trans_no = '102670' AND trans_id <> '2878' AND journal_id = '2'
[18:13:16] - CALL SaveTransaction('Update','trans_header','trans_id,trans_no,trans_date,book_id,journal_id,general_id,currency_id,exchange_rate,based_rate,amount,amount_based,description','2878|102670|2018-04-02|11|2|1078|1|1.0000000000|1.0000000000|27513.7700000000|27513.7700000000|MA for Apr 2018|','trans_id','2878','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:13:16] - CALL SaveTransaction('Update','trans_header_cr','trans_cr_id,trans_id,si_no','1471|2878||','trans_cr_id','1471','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:13:16] - CALL SaveTransaction('Remove','trans_jbooks','','14060|','jbooks_id','14060|','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:13:16] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','14061|2878|9|8||||416||0.0000000000|17581.6900000000|1|1.0000000000|1.0000000000|0.0000000000|17581.6900000000|||','jbooks_id','14061','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:13:17] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','14062|2878|9|8||||223|Payment for MRI/FIRE Insurance of CLV,VF,VAR Ph 1,2 and 3.|0.0000000000|677.0000000000|1|1.0000000000|1.0000000000|0.0000000000|677.0000000000|10|8511|','jbooks_id','14062','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:13:17] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','14063|2878|9|8||||30||27513.7700000000|0.0000000000|1|1.0000000000|1.0000000000|27513.7700000000|0.0000000000|||','jbooks_id','14063','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:13:17] - CALL SaveTransaction('Insert','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','|2878|9|8|||2481|46||0.0|9255.08|1|1.0000000000|1.0000000000|0|9255.08|1078|39543|','jbooks_id','','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:13:17] - SELECT jbooks_id AS id FROM trans_jbooks WHERE   ROUND(trans_id,2) = ROUND(2878,2)  AND  ROUND(project_id,2) = ROUND(9,2)  AND  ROUND(department_id,2) = ROUND(8,2)  AND  ROUND(project_unit_no_id,2) = ROUND(2481,2)  AND  ROUND(account_id,2) = ROUND(46,2)  AND  ROUND(debit,2) = ROUND(0.0,2)  AND  ROUND(credit,2) = ROUND(9255.08,2)  AND  ROUND(currency_id,2) = ROUND(1,2)  AND  ROUND(exchange_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(based_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(credit_based,2) = ROUND(9255.08,2)  AND  ROUND(general_id,2) = ROUND(1078,2)  AND  ROUND(ref_jbooks_id,2) = ROUND(39543,2) 
[18:13:17] - CALL SaveTransaction('Update','trans_checks','check_id,jbooks_id,general_id,check_no,check_date,check_amount,check_amount_based,bank_id,bank_code,bank_name,cleared,released,cancelled,crossed,replacement_check_no,cleared_date,deposit_date,cancel_date,replaced,currency_id,exchange_rate,based_rate','4206|14063|1078|4354067|2018-04-01|27513.7700000000|27513.7700000000|81||EWB|0|0|0|0||2018-04-02|2018-04-02|2018-04-02|0|1|1.0000000000|1.0000000000|','check_id','4206','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:13:17] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-04' ORDER BY a.trans_no ASC 
[18:13:17] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '2878'
            
[18:13:18] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 2878
[18:13:18] - SELECT * FROM select_ewt WHERE trans_id = 2878
[18:13:18] - SELECT * FROM select_final_tax WHERE trans_id = 2878
[18:13:18] - SELECT * FROM select_input_vat WHERE trans_id = 2878
[18:13:18] - SELECT * FROM select_output_vat WHERE trans_id = 2878
[18:13:18] - SELECT * FROM select_prepaid WHERE trans_id = 2878
[18:13:19] - SELECT * FROM select_fixed_asset WHERE trans_id = 2878
[18:13:19] - SELECT * FROM select_checks WHERE trans_id = 2878
[18:13:19] - SELECT * FROM trans_header_particular WHERE trans_id = 2878
[18:13:23] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-05' ORDER BY a.trans_no ASC 
[18:13:24] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '1898'
            
[18:13:24] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 1898
[18:13:24] - SELECT * FROM select_ewt WHERE trans_id = 1898
[18:13:24] - SELECT * FROM select_final_tax WHERE trans_id = 1898
[18:13:24] - SELECT * FROM select_input_vat WHERE trans_id = 1898
[18:13:24] - SELECT * FROM select_output_vat WHERE trans_id = 1898
[18:13:25] - SELECT * FROM select_prepaid WHERE trans_id = 1898
[18:13:25] - SELECT * FROM select_fixed_asset WHERE trans_id = 1898
[18:13:25] - SELECT * FROM select_checks WHERE trans_id = 1898
[18:13:25] - SELECT * FROM trans_header_particular WHERE trans_id = 1898
[18:13:28] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-05' ORDER BY a.trans_no ASC 
[18:13:28] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '2879'
            
[18:13:28] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 2879
[18:13:29] - SELECT * FROM select_ewt WHERE trans_id = 2879
[18:13:29] - SELECT * FROM select_final_tax WHERE trans_id = 2879
[18:13:29] - SELECT * FROM select_input_vat WHERE trans_id = 2879
[18:13:29] - SELECT * FROM select_output_vat WHERE trans_id = 2879
[18:13:29] - SELECT * FROM select_prepaid WHERE trans_id = 2879
[18:13:29] - SELECT * FROM select_fixed_asset WHERE trans_id = 2879
[18:13:29] - SELECT * FROM select_checks WHERE trans_id = 2879
[18:13:30] - SELECT * FROM trans_header_particular WHERE trans_id = 2879
[18:13:30] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[18:13:34] - SELECT * FROM lib_erp_chart
[18:13:35] - SELECT * FROM lib_erp_project
[18:13:37] - SELECT * FROM lib_erp_department
[18:13:39] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[18:13:39] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 2879 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-5-2' AND a.trans_id <> 2879 AND a.general_id = 1078 AND a.currency_id = 1 AND a.project_id  = 9 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[18:13:48] - SEL: jbooks_id = '' AND ref_jbooks_id = '39543' , FOUND: 0
[18:13:49] - SELECT MAX(IFNULL(isLock,False)) AS isLock FROM transaction_locking WHERE journal_id = '2' AND '2018-05-02' BETWEEN date_from AND date_to
[18:13:49] - SELECT trans_no AS existing FROM trans_header WHERE trans_no = '101236' AND trans_id <> '2879' AND journal_id = '2'
[18:13:49] - CALL SaveTransaction('Update','trans_header','trans_id,trans_no,trans_date,book_id,journal_id,general_id,currency_id,exchange_rate,based_rate,amount,amount_based,description','2879|101236|2018-05-02|11|2|1078|1|1.0000000000|1.0000000000|27513.7700000000|27513.7700000000|MA for May 2018|','trans_id','2879','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:13:49] - CALL SaveTransaction('Update','trans_header_cr','trans_cr_id,trans_id,si_no','1472|2879||','trans_cr_id','1472','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:13:49] - CALL SaveTransaction('Remove','trans_jbooks','','14064|','jbooks_id','14064|','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:13:49] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','14065|2879|9|8||||416||0.0000000000|17489.1400000000|1|1.0000000000|1.0000000000|0.0000000000|17489.1400000000|||','jbooks_id','14065','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:13:49] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','14066|2879|9|8||||223|Payment for FIRE / MRI for VAR 1, VAR 3, and CLV.|0.0000000000|677.0000000000|1|1.0000000000|1.0000000000|0.0000000000|677.0000000000|10|8691|','jbooks_id','14066','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:13:49] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','14067|2879|9|8||||3||27513.7700000000|0.0000000000|1|1.0000000000|1.0000000000|27513.7700000000|0.0000000000|||','jbooks_id','14067','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:13:49] - CALL SaveTransaction('Insert','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','|2879|9|8|||2481|46||0.0|9347.63|1|1.0000000000|1.0000000000|0|9347.63|1078|39543|','jbooks_id','','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:13:49] - SELECT jbooks_id AS id FROM trans_jbooks WHERE   ROUND(trans_id,2) = ROUND(2879,2)  AND  ROUND(project_id,2) = ROUND(9,2)  AND  ROUND(department_id,2) = ROUND(8,2)  AND  ROUND(project_unit_no_id,2) = ROUND(2481,2)  AND  ROUND(account_id,2) = ROUND(46,2)  AND  ROUND(debit,2) = ROUND(0.0,2)  AND  ROUND(credit,2) = ROUND(9347.63,2)  AND  ROUND(currency_id,2) = ROUND(1,2)  AND  ROUND(exchange_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(based_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(credit_based,2) = ROUND(9347.63,2)  AND  ROUND(general_id,2) = ROUND(1078,2)  AND  ROUND(ref_jbooks_id,2) = ROUND(39543,2) 
[18:13:49] - CALL SaveTransaction('Update','trans_checks','check_id,jbooks_id,general_id,check_no,check_date,check_amount,check_amount_based,bank_id,bank_code,bank_name,cleared,released,cancelled,crossed,replacement_check_no,cleared_date,deposit_date,cancel_date,replaced,currency_id,exchange_rate,based_rate','4207|14067|1078|4354068|2018-05-01|27513.7700000000|27513.7700000000|54||EWB|0|0|0|0||2018-05-02|2018-05-02|2018-05-02|0|1|1.0000000000|1.0000000000|','check_id','4207','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:13:50] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-05' ORDER BY a.trans_no ASC 
[18:13:50] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '2879'
            
[18:13:50] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 2879
[18:13:50] - SELECT * FROM select_ewt WHERE trans_id = 2879
[18:13:51] - SELECT * FROM select_final_tax WHERE trans_id = 2879
[18:13:51] - SELECT * FROM select_input_vat WHERE trans_id = 2879
[18:13:51] - SELECT * FROM select_output_vat WHERE trans_id = 2879
[18:13:51] - SELECT * FROM select_prepaid WHERE trans_id = 2879
[18:13:51] - SELECT * FROM select_fixed_asset WHERE trans_id = 2879
[18:13:51] - SELECT * FROM select_checks WHERE trans_id = 2879
[18:13:51] - SELECT * FROM trans_header_particular WHERE trans_id = 2879
[18:14:15] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-06' ORDER BY a.trans_no ASC 
[18:14:15] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '1899'
            
[18:14:15] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 1899
[18:14:16] - SELECT * FROM select_ewt WHERE trans_id = 1899
[18:14:16] - SELECT * FROM select_final_tax WHERE trans_id = 1899
[18:14:16] - SELECT * FROM select_input_vat WHERE trans_id = 1899
[18:14:16] - SELECT * FROM select_output_vat WHERE trans_id = 1899
[18:14:16] - SELECT * FROM select_prepaid WHERE trans_id = 1899
[18:14:16] - SELECT * FROM select_fixed_asset WHERE trans_id = 1899
[18:14:16] - SELECT * FROM select_checks WHERE trans_id = 1899
[18:14:16] - SELECT * FROM trans_header_particular WHERE trans_id = 1899
[18:14:20] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-06' ORDER BY a.trans_no ASC 
[18:14:20] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '2881'
            
[18:14:20] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 2881
[18:14:20] - SELECT * FROM select_ewt WHERE trans_id = 2881
[18:14:21] - SELECT * FROM select_final_tax WHERE trans_id = 2881
[18:14:21] - SELECT * FROM select_input_vat WHERE trans_id = 2881
[18:14:21] - SELECT * FROM select_output_vat WHERE trans_id = 2881
[18:14:21] - SELECT * FROM select_prepaid WHERE trans_id = 2881
[18:14:21] - SELECT * FROM select_fixed_asset WHERE trans_id = 2881
[18:14:21] - SELECT * FROM select_checks WHERE trans_id = 2881
[18:14:21] - SELECT * FROM trans_header_particular WHERE trans_id = 2881
[18:14:23] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[18:14:26] - SELECT * FROM lib_erp_chart
[18:14:26] - SELECT * FROM lib_erp_project
[18:14:28] - SELECT * FROM lib_erp_department
[18:14:32] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[18:14:32] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 2881 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-6-1' AND a.trans_id <> 2881 AND a.general_id = 1078 AND a.currency_id = 1 AND a.project_id  = 9 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[18:14:38] - SEL: jbooks_id = '' AND ref_jbooks_id = '39543' , FOUND: 0
[18:14:39] - SELECT MAX(IFNULL(isLock,False)) AS isLock FROM transaction_locking WHERE journal_id = '2' AND '2018-06-01' BETWEEN date_from AND date_to
[18:14:39] - SELECT trans_no AS existing FROM trans_header WHERE trans_no = '102008' AND trans_id <> '2881' AND journal_id = '2'
[18:14:40] - CALL SaveTransaction('Update','trans_header','trans_id,trans_no,trans_date,book_id,journal_id,general_id,currency_id,exchange_rate,based_rate,amount,amount_based,description','2881|102008|2018-06-01|11|2|1078|1|1.0000000000|1.0000000000|27513.7700000000|27513.7700000000|MA for Jun 2018|','trans_id','2881','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:14:40] - CALL SaveTransaction('Update','trans_header_cr','trans_cr_id,trans_id,si_no','1473|2881||','trans_cr_id','1473','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:14:40] - CALL SaveTransaction('Remove','trans_jbooks','','14074|','jbooks_id','14074|','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:14:40] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','14075|2881|9|8||||416||0.0000000000|17395.6600000000|1|1.0000000000|1.0000000000|0.0000000000|17395.6600000000|||','jbooks_id','14075','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:14:40] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','14076|2881|9|8||||223|Payment for MRI for VAR 3 B3 L43 Jelaine Reyes|0.0000000000|677.0000000000|1|1.0000000000|1.0000000000|0.0000000000|677.0000000000|10|9045|','jbooks_id','14076','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:14:40] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','14077|2881|9|8||||3||27513.7700000000|0.0000000000|1|1.0000000000|1.0000000000|27513.7700000000|0.0000000000|||','jbooks_id','14077','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:14:40] - CALL SaveTransaction('Insert','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','|2881|9|8|||2481|46||0.0|9441.11|1|1.0000000000|1.0000000000|0|9441.11|1078|39543|','jbooks_id','','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:14:40] - SELECT jbooks_id AS id FROM trans_jbooks WHERE   ROUND(trans_id,2) = ROUND(2881,2)  AND  ROUND(project_id,2) = ROUND(9,2)  AND  ROUND(department_id,2) = ROUND(8,2)  AND  ROUND(project_unit_no_id,2) = ROUND(2481,2)  AND  ROUND(account_id,2) = ROUND(46,2)  AND  ROUND(debit,2) = ROUND(0.0,2)  AND  ROUND(credit,2) = ROUND(9441.11,2)  AND  ROUND(currency_id,2) = ROUND(1,2)  AND  ROUND(exchange_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(based_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(credit_based,2) = ROUND(9441.11,2)  AND  ROUND(general_id,2) = ROUND(1078,2)  AND  ROUND(ref_jbooks_id,2) = ROUND(39543,2) 
[18:14:40] - CALL SaveTransaction('Update','trans_checks','check_id,jbooks_id,general_id,check_no,check_date,check_amount,check_amount_based,bank_id,bank_code,bank_name,cleared,released,cancelled,crossed,replacement_check_no,cleared_date,deposit_date,cancel_date,replaced,currency_id,exchange_rate,based_rate','4209|14077|1078|4354069|2018-06-01|27513.7700000000|27513.7700000000|54||EWB|0|0|0|0||2018-06-01|2018-06-01|2018-06-01|0|1|1.0000000000|1.0000000000|','check_id','4209','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:14:41] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-06' ORDER BY a.trans_no ASC 
[18:14:41] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '2881'
            
[18:14:41] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 2881
[18:14:41] - SELECT * FROM select_ewt WHERE trans_id = 2881
[18:14:42] - SELECT * FROM select_final_tax WHERE trans_id = 2881
[18:14:42] - SELECT * FROM select_input_vat WHERE trans_id = 2881
[18:14:42] - SELECT * FROM select_output_vat WHERE trans_id = 2881
[18:14:42] - SELECT * FROM select_prepaid WHERE trans_id = 2881
[18:14:42] - SELECT * FROM select_fixed_asset WHERE trans_id = 2881
[18:14:42] - SELECT * FROM select_checks WHERE trans_id = 2881
[18:14:42] - SELECT * FROM trans_header_particular WHERE trans_id = 2881
[18:14:49] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-07' ORDER BY a.trans_no ASC 
[18:14:49] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '9615'
            
[18:14:49] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 9615
[18:14:49] - SELECT * FROM select_ewt WHERE trans_id = 9615
[18:14:50] - SELECT * FROM select_final_tax WHERE trans_id = 9615
[18:14:50] - SELECT * FROM select_input_vat WHERE trans_id = 9615
[18:14:50] - SELECT * FROM select_output_vat WHERE trans_id = 9615
[18:14:50] - SELECT * FROM select_prepaid WHERE trans_id = 9615
[18:14:50] - SELECT * FROM select_fixed_asset WHERE trans_id = 9615
[18:14:50] - SELECT * FROM select_checks WHERE trans_id = 9615
[18:14:50] - SELECT * FROM trans_header_particular WHERE trans_id = 9615
[18:14:54] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-07' ORDER BY a.trans_no ASC 
[18:14:54] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '2882'
            
[18:14:54] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 2882
[18:14:55] - SELECT * FROM select_ewt WHERE trans_id = 2882
[18:14:55] - SELECT * FROM select_final_tax WHERE trans_id = 2882
[18:14:55] - SELECT * FROM select_input_vat WHERE trans_id = 2882
[18:14:55] - SELECT * FROM select_output_vat WHERE trans_id = 2882
[18:14:55] - SELECT * FROM select_prepaid WHERE trans_id = 2882
[18:14:55] - SELECT * FROM select_fixed_asset WHERE trans_id = 2882
[18:14:55] - SELECT * FROM select_checks WHERE trans_id = 2882
[18:14:55] - SELECT * FROM trans_header_particular WHERE trans_id = 2882
[18:14:56] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[18:15:00] - SELECT * FROM lib_erp_chart
[18:15:01] - SELECT * FROM lib_erp_project
[18:15:03] - SELECT * FROM lib_erp_department
[18:15:04] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[18:15:05] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 2882 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-7-2' AND a.trans_id <> 2882 AND a.general_id = 1078 AND a.currency_id = 1 AND a.project_id  = 9 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[18:15:13] - SEL: jbooks_id = '' AND ref_jbooks_id = '39543' , FOUND: 0
[18:15:13] - SELECT MAX(IFNULL(isLock,False)) AS isLock FROM transaction_locking WHERE journal_id = '2' AND '2018-07-02' BETWEEN date_from AND date_to
[18:15:13] - SELECT trans_no AS existing FROM trans_header WHERE trans_no = '103172' AND trans_id <> '2882' AND journal_id = '2'
[18:15:14] - CALL SaveTransaction('Update','trans_header','trans_id,trans_no,trans_date,book_id,journal_id,general_id,currency_id,exchange_rate,based_rate,amount,amount_based,description','2882|103172|2018-07-02|11|2|1078|1|1.0000000000|1.0000000000|27513.7700000000|27513.7700000000|MA for Jul 2018|','trans_id','2882','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:15:14] - CALL SaveTransaction('Update','trans_header_cr','trans_cr_id,trans_id,si_no','1474|2882||','trans_cr_id','1474','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:15:14] - CALL SaveTransaction('Remove','trans_jbooks','','14078|','jbooks_id','14078|','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:15:14] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','14079|2882|9|8||||416||0.0000000000|17301.2500000000|1|1.0000000000|1.0000000000|0.0000000000|17301.2500000000|||','jbooks_id','14079','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:15:14] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','14080|2882|9|8||||223|Payment for MRI/FIRE Insurance of CLV,VF,VAR Ph 1,2 and 3.|0.0000000000|677.0000000000|1|1.0000000000|1.0000000000|0.0000000000|677.0000000000|10|8511|','jbooks_id','14080','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:15:14] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','14081|2882|9|8||||30||27513.7700000000|0.0000000000|1|1.0000000000|1.0000000000|27513.7700000000|0.0000000000|||','jbooks_id','14081','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:15:14] - CALL SaveTransaction('Insert','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','|2882|9|8|||2481|46||0.0|9535.52|1|1.0000000000|1.0000000000|0|9535.52|1078|39543|','jbooks_id','','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:15:14] - SELECT jbooks_id AS id FROM trans_jbooks WHERE   ROUND(trans_id,2) = ROUND(2882,2)  AND  ROUND(project_id,2) = ROUND(9,2)  AND  ROUND(department_id,2) = ROUND(8,2)  AND  ROUND(project_unit_no_id,2) = ROUND(2481,2)  AND  ROUND(account_id,2) = ROUND(46,2)  AND  ROUND(debit,2) = ROUND(0.0,2)  AND  ROUND(credit,2) = ROUND(9535.52,2)  AND  ROUND(currency_id,2) = ROUND(1,2)  AND  ROUND(exchange_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(based_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(credit_based,2) = ROUND(9535.52,2)  AND  ROUND(general_id,2) = ROUND(1078,2)  AND  ROUND(ref_jbooks_id,2) = ROUND(39543,2) 
[18:15:14] - CALL SaveTransaction('Update','trans_checks','check_id,jbooks_id,general_id,check_no,check_date,check_amount,check_amount_based,bank_id,bank_code,bank_name,cleared,released,cancelled,crossed,replacement_check_no,cleared_date,deposit_date,cancel_date,replaced,currency_id,exchange_rate,based_rate','4210|14081|1078|4354075|2018-07-01|27513.7700000000|27513.7700000000|81||EWB|0|0|0|0||2018-07-02|2018-07-02|2018-07-02|0|1|1.0000000000|1.0000000000|','check_id','4210','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:15:14] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-07' ORDER BY a.trans_no ASC 
[18:15:15] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '2882'
            
[18:15:15] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 2882
[18:15:15] - SELECT * FROM select_ewt WHERE trans_id = 2882
[18:15:16] - SELECT * FROM select_final_tax WHERE trans_id = 2882
[18:15:16] - SELECT * FROM select_input_vat WHERE trans_id = 2882
[18:15:16] - SELECT * FROM select_output_vat WHERE trans_id = 2882
[18:15:16] - SELECT * FROM select_prepaid WHERE trans_id = 2882
[18:15:16] - SELECT * FROM select_fixed_asset WHERE trans_id = 2882
[18:15:16] - SELECT * FROM select_checks WHERE trans_id = 2882
[18:15:16] - SELECT * FROM trans_header_particular WHERE trans_id = 2882
[18:15:21] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-08' ORDER BY a.trans_no ASC 
[18:15:21] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '1732'
            
[18:15:21] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 1732
[18:15:22] - SELECT * FROM select_ewt WHERE trans_id = 1732
[18:15:22] - SELECT * FROM select_final_tax WHERE trans_id = 1732
[18:15:22] - SELECT * FROM select_input_vat WHERE trans_id = 1732
[18:15:22] - SELECT * FROM select_output_vat WHERE trans_id = 1732
[18:15:22] - SELECT * FROM select_prepaid WHERE trans_id = 1732
[18:15:22] - SELECT * FROM select_fixed_asset WHERE trans_id = 1732
[18:15:22] - SELECT * FROM select_checks WHERE trans_id = 1732
[18:15:22] - SELECT * FROM trans_header_particular WHERE trans_id = 1732
[18:15:26] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-08' ORDER BY a.trans_no ASC 
[18:15:27] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '2883'
            
[18:15:27] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 2883
[18:15:27] - SELECT * FROM select_ewt WHERE trans_id = 2883
[18:15:27] - SELECT * FROM select_final_tax WHERE trans_id = 2883
[18:15:27] - SELECT * FROM select_input_vat WHERE trans_id = 2883
[18:15:27] - SELECT * FROM select_output_vat WHERE trans_id = 2883
[18:15:27] - SELECT * FROM select_prepaid WHERE trans_id = 2883
[18:15:28] - SELECT * FROM select_fixed_asset WHERE trans_id = 2883
[18:15:28] - SELECT * FROM select_checks WHERE trans_id = 2883
[18:15:28] - SELECT * FROM trans_header_particular WHERE trans_id = 2883
[18:15:29] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[18:15:33] - SELECT * FROM lib_erp_chart
[18:15:33] - SELECT * FROM lib_erp_project
[18:15:36] - SELECT * FROM lib_erp_department
[18:15:37] - SELECT * FROM lib_erp_department
[18:15:38] - SELECT * FROM lib_erp_project
[18:15:40] - SELECT * FROM lib_erp_department
[18:15:41] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[18:15:41] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 2883 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-8-1' AND a.trans_id <> 2883 AND a.general_id = 1078 AND a.currency_id = 1 AND a.project_id  = 9 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[18:15:47] - SEL: jbooks_id = '' AND ref_jbooks_id = '39543' , FOUND: 0
[18:15:47] - SELECT MAX(IFNULL(isLock,False)) AS isLock FROM transaction_locking WHERE journal_id = '2' AND '2018-08-01' BETWEEN date_from AND date_to
[18:15:47] - SELECT trans_no AS existing FROM trans_header WHERE trans_no = '104011' AND trans_id <> '2883' AND journal_id = '2'
[18:15:48] - CALL SaveTransaction('Update','trans_header','trans_id,trans_no,trans_date,book_id,journal_id,general_id,currency_id,exchange_rate,based_rate,amount,amount_based,description','2883|104011|2018-08-01|11|2|1078|1|1.0000000000|1.0000000000|27513.7700000000|27513.7700000000|MA for Aug 2018|','trans_id','2883','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:15:48] - CALL SaveTransaction('Update','trans_header_cr','trans_cr_id,trans_id,si_no','1475|2883||','trans_cr_id','1475','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:15:48] - CALL SaveTransaction('Remove','trans_jbooks','','14082|','jbooks_id','14082|','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:15:48] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','14083|2883|9|8||||416||0.0000000000|17205.8900000000|1|1.0000000000|1.0000000000|0.0000000000|17205.8900000000|||','jbooks_id','14083','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:15:48] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','14084|2883|9|8||||223|Payment for MRI for VAR 3 B3 L43 Jelaine Reyes|0.0000000000|61.0900000000|1|1.0000000000|1.0000000000|0.0000000000|61.0900000000|10|9045|','jbooks_id','14084','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:15:48] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','14085|2883|9|8||||223|Payment for FIRE/MRI for VAR 2 and VAR 3|0.0000000000|615.9100000000|1|1.0000000000|1.0000000000|0.0000000000|615.9100000000|10|9048|','jbooks_id','14085','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:15:48] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','14086|2883|9|8||||3||27513.7700000000|0.0000000000|1|1.0000000000|1.0000000000|27513.7700000000|0.0000000000|||','jbooks_id','14086','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:15:48] - CALL SaveTransaction('Insert','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','|2883|9|8|||2481|46||0.0|9630.88|1|1.0000000000|1.0000000000|0|9630.88|1078|39543|','jbooks_id','','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:15:48] - SELECT jbooks_id AS id FROM trans_jbooks WHERE   ROUND(trans_id,2) = ROUND(2883,2)  AND  ROUND(project_id,2) = ROUND(9,2)  AND  ROUND(department_id,2) = ROUND(8,2)  AND  ROUND(project_unit_no_id,2) = ROUND(2481,2)  AND  ROUND(account_id,2) = ROUND(46,2)  AND  ROUND(debit,2) = ROUND(0.0,2)  AND  ROUND(credit,2) = ROUND(9630.88,2)  AND  ROUND(currency_id,2) = ROUND(1,2)  AND  ROUND(exchange_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(based_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(credit_based,2) = ROUND(9630.88,2)  AND  ROUND(general_id,2) = ROUND(1078,2)  AND  ROUND(ref_jbooks_id,2) = ROUND(39543,2) 
[18:15:48] - CALL SaveTransaction('Update','trans_checks','check_id,jbooks_id,general_id,check_no,check_date,check_amount,check_amount_based,bank_id,bank_code,bank_name,cleared,released,cancelled,crossed,replacement_check_no,cleared_date,deposit_date,cancel_date,replaced,currency_id,exchange_rate,based_rate','4211|14086|1078|4354074|2018-08-01|27513.7700000000|27513.7700000000|54||EWB|0|0|0|0||2018-08-01|2018-08-01|2018-08-01|0|1|1.0000000000|1.0000000000|','check_id','4211','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:15:49] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-08' ORDER BY a.trans_no ASC 
[18:15:49] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '2883'
            
[18:15:49] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 2883
[18:15:50] - SELECT * FROM select_ewt WHERE trans_id = 2883
[18:15:50] - SELECT * FROM select_final_tax WHERE trans_id = 2883
[18:15:50] - SELECT * FROM select_input_vat WHERE trans_id = 2883
[18:15:50] - SELECT * FROM select_output_vat WHERE trans_id = 2883
[18:15:50] - SELECT * FROM select_prepaid WHERE trans_id = 2883
[18:15:50] - SELECT * FROM select_fixed_asset WHERE trans_id = 2883
[18:15:50] - SELECT * FROM select_checks WHERE trans_id = 2883
[18:15:50] - SELECT * FROM trans_header_particular WHERE trans_id = 2883
[18:15:56] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-09' ORDER BY a.trans_no ASC 
[18:15:56] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '1723'
            
[18:15:56] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 1723
[18:15:56] - SELECT * FROM select_ewt WHERE trans_id = 1723
[18:15:57] - SELECT * FROM select_final_tax WHERE trans_id = 1723
[18:15:57] - SELECT * FROM select_input_vat WHERE trans_id = 1723
[18:15:57] - SELECT * FROM select_output_vat WHERE trans_id = 1723
[18:15:57] - SELECT * FROM select_prepaid WHERE trans_id = 1723
[18:15:57] - SELECT * FROM select_fixed_asset WHERE trans_id = 1723
[18:15:57] - SELECT * FROM select_checks WHERE trans_id = 1723
[18:15:57] - SELECT * FROM trans_header_particular WHERE trans_id = 1723
[18:16:01] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-09' ORDER BY a.trans_no ASC 
[18:16:01] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '2885'
            
[18:16:01] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 2885
[18:16:02] - SELECT * FROM select_ewt WHERE trans_id = 2885
[18:16:02] - SELECT * FROM select_final_tax WHERE trans_id = 2885
[18:16:02] - SELECT * FROM select_input_vat WHERE trans_id = 2885
[18:16:02] - SELECT * FROM select_output_vat WHERE trans_id = 2885
[18:16:02] - SELECT * FROM select_prepaid WHERE trans_id = 2885
[18:16:02] - SELECT * FROM select_fixed_asset WHERE trans_id = 2885
[18:16:02] - SELECT * FROM select_checks WHERE trans_id = 2885
[18:16:02] - SELECT * FROM trans_header_particular WHERE trans_id = 2885
[18:16:03] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[18:16:07] - SELECT * FROM lib_erp_chart
[18:16:08] - SELECT * FROM lib_erp_project
[18:16:09] - SELECT * FROM lib_erp_department
[18:16:11] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[18:16:12] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 2885 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-9-3' AND a.trans_id <> 2885 AND a.general_id = 1078 AND a.currency_id = 1 AND a.project_id  = 9 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[18:16:19] - SEL: jbooks_id = '' AND ref_jbooks_id = '39543' , FOUND: 0
[18:16:20] - SELECT MAX(IFNULL(isLock,False)) AS isLock FROM transaction_locking WHERE journal_id = '2' AND '2018-09-03' BETWEEN date_from AND date_to
[18:16:20] - SELECT trans_no AS existing FROM trans_header WHERE trans_no = '104803' AND trans_id <> '2885' AND journal_id = '2'
[18:16:20] - CALL SaveTransaction('Update','trans_header','trans_id,trans_no,trans_date,book_id,journal_id,general_id,currency_id,exchange_rate,based_rate,amount,amount_based,description','2885|104803|2018-09-03|11|2|1078|1|1.0000000000|1.0000000000|27513.7700000000|27513.7700000000|MA for Sep 2018|','trans_id','2885','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:16:20] - CALL SaveTransaction('Update','trans_header_cr','trans_cr_id,trans_id,si_no','1476|2885||','trans_cr_id','1476','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:16:20] - CALL SaveTransaction('Remove','trans_jbooks','','14093|','jbooks_id','14093|','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:16:20] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','14094|2885|9|8||||416||0.0000000000|17109.5900000000|1|1.0000000000|1.0000000000|0.0000000000|17109.5900000000|||','jbooks_id','14094','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:16:21] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','14095|2885|9|8||||223||0.0000000000|677.0000000000|1|1.0000000000|1.0000000000|0.0000000000|677.0000000000|10|554|','jbooks_id','14095','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:16:21] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','14096|2885|9|8||||20||27513.7700000000|0.0000000000|1|1.0000000000|1.0000000000|27513.7700000000|0.0000000000|||','jbooks_id','14096','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:16:21] - CALL SaveTransaction('Insert','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','|2885|9|8|||2481|46||0.0|9727.18|1|1.0000000000|1.0000000000|0|9727.18|1078|39543|','jbooks_id','','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:16:21] - SELECT jbooks_id AS id FROM trans_jbooks WHERE   ROUND(trans_id,2) = ROUND(2885,2)  AND  ROUND(project_id,2) = ROUND(9,2)  AND  ROUND(department_id,2) = ROUND(8,2)  AND  ROUND(project_unit_no_id,2) = ROUND(2481,2)  AND  ROUND(account_id,2) = ROUND(46,2)  AND  ROUND(debit,2) = ROUND(0.0,2)  AND  ROUND(credit,2) = ROUND(9727.18,2)  AND  ROUND(currency_id,2) = ROUND(1,2)  AND  ROUND(exchange_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(based_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(credit_based,2) = ROUND(9727.18,2)  AND  ROUND(general_id,2) = ROUND(1078,2)  AND  ROUND(ref_jbooks_id,2) = ROUND(39543,2) 
[18:16:21] - CALL SaveTransaction('Update','trans_checks','check_id,jbooks_id,general_id,check_no,check_date,check_amount,check_amount_based,bank_id,bank_code,bank_name,cleared,released,cancelled,crossed,replacement_check_no,cleared_date,deposit_date,cancel_date,replaced,currency_id,exchange_rate,based_rate','4213|14096|1078|4354073|2018-09-01|27513.7700000000|27513.7700000000|71||EWB|0|0|0|0||2018-09-03|2018-09-03|2018-09-03|0|1|1.0000000000|1.0000000000|','check_id','4213','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:16:21] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-09' ORDER BY a.trans_no ASC 
[18:16:21] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '2885'
            
[18:16:22] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 2885
[18:16:22] - SELECT * FROM select_ewt WHERE trans_id = 2885
[18:16:22] - SELECT * FROM select_final_tax WHERE trans_id = 2885
[18:16:22] - SELECT * FROM select_input_vat WHERE trans_id = 2885
[18:16:22] - SELECT * FROM select_output_vat WHERE trans_id = 2885
[18:16:22] - SELECT * FROM select_prepaid WHERE trans_id = 2885
[18:16:22] - SELECT * FROM select_fixed_asset WHERE trans_id = 2885
[18:16:23] - SELECT * FROM select_checks WHERE trans_id = 2885
[18:16:23] - SELECT * FROM trans_header_particular WHERE trans_id = 2885
[18:16:30] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-02' ORDER BY a.trans_no ASC 
[18:16:30] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '1890'
            
[18:16:30] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 1890
[18:16:31] - SELECT * FROM select_ewt WHERE trans_id = 1890
[18:16:31] - SELECT * FROM select_final_tax WHERE trans_id = 1890
[18:16:31] - SELECT * FROM select_input_vat WHERE trans_id = 1890
[18:16:31] - SELECT * FROM select_output_vat WHERE trans_id = 1890
[18:16:31] - SELECT * FROM select_prepaid WHERE trans_id = 1890
[18:16:31] - SELECT * FROM select_fixed_asset WHERE trans_id = 1890
[18:16:31] - SELECT * FROM select_checks WHERE trans_id = 1890
[18:16:31] - SELECT * FROM trans_header_particular WHERE trans_id = 1890
[18:16:39] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-02' ORDER BY a.trans_no ASC 
[18:16:39] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '2996'
            
[18:16:39] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 2996
[18:16:40] - SELECT * FROM select_ewt WHERE trans_id = 2996
[18:16:40] - SELECT * FROM select_final_tax WHERE trans_id = 2996
[18:16:40] - SELECT * FROM select_input_vat WHERE trans_id = 2996
[18:16:40] - SELECT * FROM select_output_vat WHERE trans_id = 2996
[18:16:40] - SELECT * FROM select_prepaid WHERE trans_id = 2996
[18:16:40] - SELECT * FROM select_fixed_asset WHERE trans_id = 2996
[18:16:40] - SELECT * FROM select_checks WHERE trans_id = 2996
[18:16:41] - SELECT * FROM trans_header_particular WHERE trans_id = 2996
[18:16:41] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[18:17:01] - SELECT * FROM lib_erp_chart
[18:17:01] - SELECT * FROM lib_erp_project
[18:17:03] - SELECT * FROM lib_erp_department
[18:17:05] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[18:17:05] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 2996 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-2-28' AND a.trans_id <> 2996 AND a.general_id = 1287 AND a.currency_id = 1 AND a.project_id  = 9 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[18:17:15] - SEL: jbooks_id = '' AND ref_jbooks_id = '39651' , FOUND: 0
[18:17:16] - SELECT MAX(IFNULL(isLock,False)) AS isLock FROM transaction_locking WHERE journal_id = '2' AND '2018-02-28' BETWEEN date_from AND date_to
[18:17:17] - SELECT trans_no AS existing FROM trans_header WHERE trans_no = '100357' AND trans_id <> '2996' AND journal_id = '2'
[18:17:17] - CALL SaveTransaction('Update','trans_header','trans_id,trans_no,trans_date,book_id,journal_id,general_id,currency_id,exchange_rate,based_rate,amount,amount_based,description','2996|100357|2018-02-28|11|2|1287|1|1.0000000000|1.0000000000|25899.1900000000|25899.1900000000|MA for Feb 2018|','trans_id','2996','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:17:17] - CALL SaveTransaction('Update','trans_header_cr','trans_cr_id,trans_id,si_no','1507|2996||','trans_cr_id','1507','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:17:17] - CALL SaveTransaction('Remove','trans_jbooks','','14567|','jbooks_id','14567|','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:17:17] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','14568|2996|9|8||||416||0.0000000000|17604.4000000000|1|1.0000000000|1.0000000000|0.0000000000|17604.4000000000|||','jbooks_id','14568','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:17:17] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','14569|2996|9|8||||223|Payment for MRI/FIRE Insurance of VAR Ph 3|0.0000000000|642.0000000000|1|1.0000000000|1.0000000000|0.0000000000|642.0000000000|10|12073|','jbooks_id','14569','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:17:17] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','14570|2996|9|8||||31||25899.1900000000|0.0000000000|1|1.0000000000|1.0000000000|25899.1900000000|0.0000000000|||','jbooks_id','14570','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:17:17] - CALL SaveTransaction('Insert','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','|2996|9|8|||2495|46||0.0|7652.79|1|1.0000000000|1.0000000000|0|7652.79|1287|39651|','jbooks_id','','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:17:17] - SELECT jbooks_id AS id FROM trans_jbooks WHERE   ROUND(trans_id,2) = ROUND(2996,2)  AND  ROUND(project_id,2) = ROUND(9,2)  AND  ROUND(department_id,2) = ROUND(8,2)  AND  ROUND(project_unit_no_id,2) = ROUND(2495,2)  AND  ROUND(account_id,2) = ROUND(46,2)  AND  ROUND(debit,2) = ROUND(0.0,2)  AND  ROUND(credit,2) = ROUND(7652.79,2)  AND  ROUND(currency_id,2) = ROUND(1,2)  AND  ROUND(exchange_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(based_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(credit_based,2) = ROUND(7652.79,2)  AND  ROUND(general_id,2) = ROUND(1287,2)  AND  ROUND(ref_jbooks_id,2) = ROUND(39651,2) 
[18:17:17] - CALL SaveTransaction('Update','trans_checks','check_id,jbooks_id,general_id,check_no,check_date,check_amount,check_amount_based,bank_id,bank_code,bank_name,cleared,released,cancelled,crossed,replacement_check_no,cleared_date,deposit_date,cancel_date,replaced,currency_id,exchange_rate,based_rate','4320|14570|1287|1040002913|2018-02-28|25899.1900000000|25899.1900000000|51||PSBC|0|0|0|0||2018-02-28|2018-02-28|2018-02-28|0|1|1.0000000000|1.0000000000|','check_id','4320','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:17:17] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-02' ORDER BY a.trans_no ASC 
[18:17:18] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '2996'
            
[18:17:18] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 2996
[18:17:18] - SELECT * FROM select_ewt WHERE trans_id = 2996
[18:17:19] - SELECT * FROM select_final_tax WHERE trans_id = 2996
[18:17:19] - SELECT * FROM select_input_vat WHERE trans_id = 2996
[18:17:19] - SELECT * FROM select_output_vat WHERE trans_id = 2996
[18:17:19] - SELECT * FROM select_prepaid WHERE trans_id = 2996
[18:17:19] - SELECT * FROM select_fixed_asset WHERE trans_id = 2996
[18:17:19] - SELECT * FROM select_checks WHERE trans_id = 2996
[18:17:19] - SELECT * FROM trans_header_particular WHERE trans_id = 2996
[18:17:28] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-07' ORDER BY a.trans_no ASC 
[18:17:28] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '9615'
            
[18:17:28] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 9615
[18:17:29] - SELECT * FROM select_ewt WHERE trans_id = 9615
[18:17:29] - SELECT * FROM select_final_tax WHERE trans_id = 9615
[18:17:29] - SELECT * FROM select_input_vat WHERE trans_id = 9615
[18:17:29] - SELECT * FROM select_output_vat WHERE trans_id = 9615
[18:17:29] - SELECT * FROM select_prepaid WHERE trans_id = 9615
[18:17:29] - SELECT * FROM select_fixed_asset WHERE trans_id = 9615
[18:17:29] - SELECT * FROM select_checks WHERE trans_id = 9615
[18:17:29] - SELECT * FROM trans_header_particular WHERE trans_id = 9615
[18:17:36] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-07' ORDER BY a.trans_no ASC 
[18:17:37] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '3193'
            
[18:17:37] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 3193
[18:17:37] - SELECT * FROM select_ewt WHERE trans_id = 3193
[18:17:37] - SELECT * FROM select_final_tax WHERE trans_id = 3193
[18:17:38] - SELECT * FROM select_input_vat WHERE trans_id = 3193
[18:17:38] - SELECT * FROM select_output_vat WHERE trans_id = 3193
[18:17:38] - SELECT * FROM select_prepaid WHERE trans_id = 3193
[18:17:38] - SELECT * FROM select_fixed_asset WHERE trans_id = 3193
[18:17:38] - SELECT * FROM select_checks WHERE trans_id = 3193
[18:17:38] - SELECT * FROM trans_header_particular WHERE trans_id = 3193
[18:17:39] - SELECT auto_number FROM lib_erp_journal WHERE journal_id = 2
[18:17:44] - SELECT * FROM lib_erp_chart
[18:17:45] - SELECT * FROM lib_erp_project
[18:17:46] - SELECT * FROM lib_erp_department
[18:17:48] - SELECT a.general_id,a.general_code,a.general_name,a.terms_id ,b.terms_code,b.terms_name,IFNULL(a.nodays,b.nodays) AS nodays,b.fixed_day FROM lib_erp_general a LEFT JOIN lib_erp_terms b ON b.terms_id = a.terms_id ORDER BY FIELD(a.category_id,1,2),a.general_code ASC 
[18:17:49] - SELECT a.jbooks_id AS ref_jbooks_id,'' AS jbooks_id_tmp,IFNULL(m.journal_code,'') AS ref_journal_code ,a.trans_id,IF(IFNULL(b.ref_no,'') = '',c.trans_no,CONCAT(c.trans_no,' - ',b.ref_no)) AS ref_trans_no,c.trans_date AS ref_trans_date ,a.project_id,d.project_code,d.project_name ,a.department_id,e.department_code,e.department_name ,IFNULL(a.allocation_id,'') AS allocation_id,IFNULL(f.allocation_code,'') AS allocation_code,IFNULL(f.allocation_name,'') AS allocation_name ,a.account_id,g.account_code,g.account_name,g.validation,g.noCompute,g.unit_applicable ,a.currency_id,h.currency_code,h.currency_name ,a.exchange_rate,a.based_rate,a.credit,(a.debit - IF(j.credit IS NULL,0,j.credit)) AS tmp_amount,0 AS credit ,a.credit_based,0 AS credit_based,a.line_remarks ,a.general_id,i.general_code,i.general_name ,IF(a.debit != 0,1,2) as dc ,k.terms_id,k.jbooks_ar_id AS jbooks_terms_id,k.nodays ,IF(c.journal_id = '8',k.si_no,n.si_no) AS si_no,IF(c.journal_id = '8',k.dr_no,n.dr_no) AS dr_no,IF(c.journal_id = '8',k.po_no,n.po_no) AS po_no ,l.terms_code,l.terms_name ,a.book_unit_no_id,o.book_unit_no_code,o.book_unit_no_name,a.line_remarks AS particulars
                ,a.project_unit_no_id,p.project_unit_no_codes,p.project_unit_no_names 
                ,c.description FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN trans_header c ON c.trans_id = a.trans_id LEFT JOIN erp_fs_ngg.lib_erp_project d ON d.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department e ON e.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_allocation f ON f.allocation_id = a.allocation_id LEFT JOIN erp_fs_ngg.lib_erp_chart g ON g.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_general i ON i.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE a.trans_id <> 3193 GROUP BY a.ref_jbooks_id) j ON j.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ar k ON k.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms l ON l.terms_id = k.terms_id LEFT JOIN erp_fs_ngg.lib_erp_journal m ON m.journal_id = c.journal_id LEFT JOIN erp_accounting_ngg.trans_header_ib n ON n.trans_id = c.trans_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no o ON o.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no p ON p.project_unit_no_id = a.project_unit_no_id WHERE a.account_id = 46 AND c.trans_date <= '2018-7-20' AND a.trans_id <> 3193 AND a.general_id = 704 AND a.currency_id = 1 AND a.project_id  = 9 AND a.department_id  = 8 AND IFNULL(a.book_unit_no_id,'') = '' AND a.ref_jbooks_id IS NULL AND (a.debit - IF(j.credit IS NULL,0,j.credit)) <> 0 
[18:17:56] - SEL: jbooks_id = '' AND ref_jbooks_id = '39553' , FOUND: 0
[18:17:57] - SELECT MAX(IFNULL(isLock,False)) AS isLock FROM transaction_locking WHERE journal_id = '2' AND '2018-07-20' BETWEEN date_from AND date_to
[18:17:57] - SELECT trans_no AS existing FROM trans_header WHERE trans_no = '103546' AND trans_id <> '3193' AND journal_id = '2'
[18:17:58] - CALL SaveTransaction('Update','trans_header','trans_id,trans_no,trans_date,book_id,journal_id,general_id,currency_id,exchange_rate,based_rate,amount,amount_based,description','3193|103546|2018-07-20|11|2|704|1|1.0000000000|1.0000000000|27691.1800000000|27691.1800000000|MA for Jul 2018|','trans_id','3193','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:17:58] - CALL SaveTransaction('Update','trans_header_cr','trans_cr_id,trans_id,si_no','1522|3193||','trans_cr_id','1522','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:17:58] - CALL SaveTransaction('Remove','trans_jbooks','','15564|','jbooks_id','15564|','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:17:58] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','15565|3193|9|8||||416||0.0000000000|23619.2400000000|1|1.0000000000|1.0000000000|0.0000000000|23619.2400000000|||','jbooks_id','15565','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:17:58] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','15566|3193|9|8||||223|Payment for FIRE/MRI insurance for VAR 1, 2, 3, CLV, MV, VF, CJT2|0.0000000000|730.0000000000|1|1.0000000000|1.0000000000|0.0000000000|730.0000000000|10|8968|','jbooks_id','15566','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:17:58] - CALL SaveTransaction('Update','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','15567|3193|9|8||||31||27691.1800000000|0.0000000000|1|1.0000000000|1.0000000000|27691.1800000000|0.0000000000|||','jbooks_id','15567','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:17:58] - CALL SaveTransaction('Insert','trans_jbooks','jbooks_id,trans_id,project_id,department_id,allocation_id,book_unit_no_id,project_unit_no_id,account_id,line_remarks,debit,credit,currency_id,exchange_rate,based_rate,debit_based,credit_based,general_id,ref_jbooks_id','|3193|9|8|||2502|46||0.0|3341.94|1|1.0000000000|1.0000000000|0|3341.94|704|39553|','jbooks_id','','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:17:58] - SELECT jbooks_id AS id FROM trans_jbooks WHERE   ROUND(trans_id,2) = ROUND(3193,2)  AND  ROUND(project_id,2) = ROUND(9,2)  AND  ROUND(department_id,2) = ROUND(8,2)  AND  ROUND(project_unit_no_id,2) = ROUND(2502,2)  AND  ROUND(account_id,2) = ROUND(46,2)  AND  ROUND(debit,2) = ROUND(0.0,2)  AND  ROUND(credit,2) = ROUND(3341.94,2)  AND  ROUND(currency_id,2) = ROUND(1,2)  AND  ROUND(exchange_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(based_rate,2) = ROUND(1.0000000000,2)  AND  ROUND(credit_based,2) = ROUND(3341.94,2)  AND  ROUND(general_id,2) = ROUND(704,2)  AND  ROUND(ref_jbooks_id,2) = ROUND(39553,2) 
[18:17:58] - CALL SaveTransaction('Update','trans_checks','check_id,jbooks_id,general_id,check_no,check_date,check_amount,check_amount_based,bank_id,bank_code,bank_name,cleared,released,cancelled,crossed,replacement_check_no,cleared_date,deposit_date,cancel_date,replaced,currency_id,exchange_rate,based_rate','4510|15567|704|94863|2018-07-20|27691.1800000000|27691.1800000000|51||CBC|0|0|0|0||2018-07-20|2018-07-20|2018-07-20|0|1|1.0000000000|1.0000000000|','check_id','4510','DESKTOP-PL80BO2','Raymond T. Villegas','1981');
[18:17:58] - SELECT currentapprover.user_id AS current_approver,currentapprover.status AS current_status ,prevapprover.user_id AS prev_approver,prevapprover.status AS prev_status ,creator.user_id,creator.stage_id ,a.* ,c.general_code,c.general_name ,d.currency_code,d.currency_name ,IFNULL(b.trans_cr_id,'') AS trans_cr_id,IFNULL(b.si_no,'') AS si_no ,IFNULL(_lock.isLock,0) AS isLock  FROM trans_header a LEFT JOIN selectTransactionLocking _lock ON _lock.trans_id = a.trans_id LEFT JOIN trans_header_cr b ON a.trans_id = b.trans_id LEFT JOIN erp_fs_ngg.lib_erp_general c ON a.general_id = c.general_id LEFT JOIN erp_fs_ngg.lib_erp_currency d ON a.currency_id = d.currency_id LEFT JOIN ( SELECT * FROM trans_header_status GROUP BY ref_id ) creator ON creator.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(approved_date) AS approved_date,ref_id FROM trans_header_status GROUP BY ref_id ) a LEFT JOIN trans_header_status b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id GROUP BY ref_id ) currentapprover ON currentapprover.ref_id = a.trans_id LEFT JOIN ( SELECT b.* FROM ( SELECT MAX(b.approved_date) AS approved_date,b.ref_id,b.user_id FROM ( SELECT MAX(approved_date) AS approved_date,ref_id,user_id,status FROM trans_header_approval GROUP BY ref_id,user_id ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id WHERE b.status <> 2 GROUP BY b.ref_id ORDER BY b.approved_date ) a LEFT JOIN trans_header_approval b ON b.approved_date = a.approved_date AND b.ref_id = a.ref_id ) prevapprover ON prevapprover.ref_id = a.trans_id WHERE a.journal_id = '2' AND a.book_id = '11' AND DATE_FORMAT(a.trans_date,'%Y-%m') = '2018-07' ORDER BY a.trans_no ASC 
[18:17:59] - SELECT a.offset_project_management_id,a.jbooks_id,a.trans_project_management_id,a.amount_collected,a.amount_collected_based,a.currency_id,a.exchange_rate,a.based_rate,1 AS sel
                FROM trans_project_management_offset a
                LEFT JOIN trans_jbooks b ON b.jbooks_id = a.jbooks_id
                WHERE b.trans_id = '3193'
            
[18:17:59] - SELECT a.* ,IF(b.offset_ar <> 0 AND b.offset_ar IS NOT NULL,b.offset_ar,IF(b.offset_ap <> 0 AND b.offset_ap IS NOT NULL,b.offset_ap,IF(b.offset_ewt <> 0 AND b.offset_ewt IS NOT NULL,b.offset_ewt,IF(b.offset_final_tax <> 0 AND b.offset_final_tax IS NOT NULL,b.offset_final_tax,IF(b.offset_input_vat <> 0 AND b.offset_input_vat IS NOT NULL,b.offset_input_vat,IF(b.offset_output_vat <> 0 AND b.offset_output_vat IS NOT NULL,b.offset_output_vat,IF(b.offset_prepaid <> 0 AND b.offset_prepaid IS NOT NULL,b.offset_prepaid,IF(b.offset_fixed_asset <> 0 AND b.offset_fixed_asset IS NOT NULL,b.offset_fixed_asset,0)))))))) AS offset ,IF(b.offset_ar IS NOT NULL AND b.offset_ar > 0,c.credit,IF(b.offset_ap IS NOT NULL AND b.offset_ap > 0,c.debit,0)) AS minimum FROM select_jbooks a LEFT JOIN selectReferenceOffset b ON b.jbooks_id = a.jbooks_id LEFT JOIN selectReferenceARAP c ON c.jbooks_id = a.jbooks_id WHERE trans_id = 3193
[18:17:59] - SELECT * FROM select_ewt WHERE trans_id = 3193
[18:17:59] - SELECT * FROM select_final_tax WHERE trans_id = 3193
[18:18:00] - SELECT * FROM select_input_vat WHERE trans_id = 3193
[18:18:00] - SELECT * FROM select_output_vat WHERE trans_id = 3193
[18:18:00] - SELECT * FROM select_prepaid WHERE trans_id = 3193
[18:18:00] - SELECT * FROM select_fixed_asset WHERE trans_id = 3193
[18:18:00] - SELECT * FROM select_checks WHERE trans_id = 3193
[18:18:00] - SELECT * FROM trans_header_particular WHERE trans_id = 3193
[18:18:18] - SELECT False AS sel,journal_id,journal_code,journal_name FROM lib_erp_journal WHERE journal_id <> 8
[18:18:23] - SELECT * FROM lib_erp_chart 
[18:18:24] - SELECT False AS sel,b.book_id,c.book_code,c.book_name,d.book_unit_no_name 
FROM erp_fs_ngg.lib_erp_journal a 
LEFT JOIN erp_fs_ngg.sys_acc_journal_book b ON b.journal_id = a.journal_id 
LEFT JOIN erp_fs_ngg.lib_erp_book c ON c.book_id = b.book_id 
LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no d ON d.book_id = c.book_id 
WHERE a.journal_id IN (1,2,3,4,5,6,7) AND c.book_code IS NOT NULL AND c.company_id = '1' GROUP BY c.book_id 
[18:19:11] - SELECT * FROM lib_erp_general 
[18:19:19] - ExecuteWithParameter : get_account_analysis_new
[18:19:19] - parameters : 'erp_accounting_ngg','erp_fs_ngg','704','2','2019-01-01','2019-07-23','','','','1,2,3,4,5,6,7,8','11','','46','2','1'
[18:19:19] - Execution Time: 2019-07-23 18:19:19
[18:19:21] - Done Time: 2019-07-23 18:19:21
[18:19:21] - SELECT b.company_name,b.address1 AS address,b.tin,c.currency_name FROM erp_accounting_ngg.sys_default a LEFT JOIN erp_fs_ngg.lib_erp_company b ON b.company_id = a.company_id LEFT JOIN erp_fs_ngg.lib_erp_currency c ON c.currency_id = a.currency_id
[18:19:33] - ExecuteWithParameter : get_account_analysis_new
[18:19:33] - parameters : 'erp_accounting_ngg','erp_fs_ngg','704','2','2019-01-01','2019-07-23','','','','1,2,3,4,5,6,7,8','11','','46','2','1'
[18:19:33] - Execution Time: 2019-07-23 18:19:33
[18:19:36] - Done Time: 2019-07-23 18:19:36
[18:19:36] - SELECT b.company_name,b.address1 AS address,b.tin,c.currency_name FROM erp_accounting_ngg.sys_default a LEFT JOIN erp_fs_ngg.lib_erp_company b ON b.company_id = a.company_id LEFT JOIN erp_fs_ngg.lib_erp_currency c ON c.currency_id = a.currency_id
[18:20:15] - ExecuteWithParameter : get_account_analysis_new
[18:20:15] - parameters : 'erp_accounting_ngg','erp_fs_ngg','','2','2019-01-01','2019-07-23','','','','1,2,3,4,5,6,7,8','11','','46','2','1'
[18:20:15] - Execution Time: 2019-07-23 18:20:15
[18:20:22] - Done Time: 2019-07-23 18:20:22
[18:20:22] - SELECT b.company_name,b.address1 AS address,b.tin,c.currency_name FROM erp_accounting_ngg.sys_default a LEFT JOIN erp_fs_ngg.lib_erp_company b ON b.company_id = a.company_id LEFT JOIN erp_fs_ngg.lib_erp_currency c ON c.currency_id = a.currency_id
[18:23:08] - ----- Accounting Start -----
[18:23:08] - Main Connection String = Server=192.168.1.4;User Id=root;Password=snoitulos;Database=erp_accounting_ngg;Port=3306;allowzerodatetime=True;convertzerodatetime=True;Connect Timeout=6000000
[18:23:08] - FS Connection String = Server=192.168.1.4;User Id=root;Password=snoitulos;Database=erp_fs_ngg;Port=3306;allowzerodatetime=True;convertzerodatetime=True;Connect Timeout=6000000
[18:23:11] - Login Button Click
[18:23:11] - SELECT user_id FROM erp_fs_ngg.sys_erp_user WHERE username = 'alas' AND password = 'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580' 
[18:23:12] - INSERT INTO sys_log(log_date,user_id,log_code_3,machine_name,machine_user) VALUES('2019-07-23 18:23:12',1,'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580','DESKTOP-PL80BO2','Raymond T. Villegas');
[18:23:12] - SELECT log_id AS id FROM sys_log WHERE log_date = '2019-07-23 18:23:12' AND user_id = 1 AND log_code_3 = 'a8013ff5b4ddb52f129615ca3b0a9420bdd5ff8bd6e584a4996ffcc454efc580' AND machine_name = 'DESKTOP-PL80BO2' AND machine_user = 'Raymond T. Villegas';
[18:23:12] - SELECT a.stage_id,c.module_code,b.user_id FROM sys_erp_approval a LEFT JOIN sys_erp_approval_user b on b.approval_id = a.approval_id LEFT JOIN sys_erp_modules c ON c.module_id = a.module_id 
[18:23:12] - SELECT a.module_code,b.m_view,b.m_add,b.m_edit,b.m_delete,b.m_cancel,b.m_verify,b.m_approve,b.m_print FROM erp_fs_ngg.sys_erp_modules a LEFT JOIN erp_fs_ngg.sys_erp_profile_det b ON b.module_id = a.module_id LEFT JOIN erp_fs_ngg.sys_erp_user_profile c ON c.profile_id = b.profile_id AND c.system_id = a.system_id LEFT JOIN erp_fs_ngg.sys_erp_user d ON d.user_id = c.user_id WHERE a.system_id = 2 AND d.username = 'alas' 
[18:23:12] - SELECT module_code FROM erp_fs_ngg.sys_erp_modules WHERE system_id = 2 
[18:23:13] - select * from lib_erp_journal
[18:23:13] - SELECT a.*,b.company_code,b.company_name,b.address1,b.address2,b.tin,b.rdo_code ,a.currency_id,c.currency_code,c.currency_name,c.symbol  FROM sys_default a  LEFT JOIN erp_fs_ngg.lib_erp_company b ON b.company_id = a.company_id LEFT JOIN erp_fs_ngg.lib_erp_currency c ON c.currency_id = a.currency_id 
[18:23:13] - select a.*,b.module_code from sys_default_det a inner join erp_fs_ngg.sys_erp_modules b on a.module_id = b.module_id
[18:23:14] - SELECT a.book_id,a.book_code,a.book_name FROM lib_erp_book a WHERE a.company_id = '1'
[18:23:14] - SELECT 1 AS id,'January' AS name UNION SELECT 2,'February' UNION SELECT 3,'March' UNION SELECT 4,'April' UNION SELECT 5,'May' UNION SELECT 6,'June' UNION SELECT 7,'July' UNION SELECT 8,'August' UNION SELECT 9,'September' UNION SELECT 10,'October' UNION SELECT 11,'November' UNION SELECT 12,'December' 
[18:23:14] - End of Initialization
[18:23:19] - SELECT * FROM lib_erp_book WHERE company_id = '1'
[18:23:20] - SELECT * FROM lib_erp_currency
[18:23:20] - SELECT trans_id FROM trans_header WHERE currency_id = 1 AND book_id = 11 AND trans_date = '2017-12-31' AND journal_id = 8
[18:23:20] - SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation <> 3 AND b.validation <> 2 UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 3 GROUP BY a.account_id,a.project_id,a.department_id UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 2 GROUP BY a.account_id,a.project_id,a.department_id ORDER BY account_code ASC 
[18:23:20] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[18:23:20] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[18:23:21] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[18:23:21] - SELECT * FROM lib_erp_currency_rate WHERE currency_id = 1 AND effectivitydate <= '2017-12-31' ORDER BY effectivitydate DESC LIMIT 1
[18:23:21] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[18:23:21] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[18:23:22] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[18:23:23] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[18:23:23] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[18:23:23] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[18:23:23] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[18:23:23] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[18:23:23] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[18:23:23] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[18:23:23] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[18:23:24] - SELECT * FROM lib_erp_chart WHERE account_id = '43'
[18:23:24] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[18:23:25] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[18:23:25] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[18:23:25] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[18:23:26] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[18:23:26] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[18:23:26] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[18:23:27] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[18:23:30] - SELECT * FROM lib_erp_department
[18:23:30] - SELECT * FROM lib_erp_project
[18:23:30] - SELECT * FROM lib_erp_chart WHERE account_id = 190
[18:23:30] - SELECT a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id ,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based ,a.general_id,a.ref_jbooks_id,a.line_remarks ,b.ref_no,b.ref_date,d.general_name,d.general_code ,IF(a.credit > e.debit,'Partially Paid',IF(a.credit = e.debit,'Fully Paid','')) as status ,IF(a.credit > e.debit,e.debit,IF(a.credit = e.debit,a.credit,0)) AS minimum ,f.terms_id,IFNULL(f.nodays,0) AS nodays,f.si_no,f.rr_no,f.po_no ,g.terms_code,g.terms_name ,h.currency_code,h.currency_name ,c.account_code,c.account_name ,a.book_unit_no_id AS unit_id,j.book_unit_no_code AS unit_code,j.book_unit_no_name AS unit_name FROM trans_jbooks a LEFT JOIN trans_jbooks_ref b ON b.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_chart c ON c.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_general d ON d.general_id = a.general_id LEFT JOIN (SELECT a.ref_jbooks_id AS jbooks_id,SUM(a.debit) AS debit,SUM(a.credit) AS credit FROM trans_jbooks a LEFT JOIN trans_header b ON b.trans_id = a.trans_id WHERE ref_jbooks_id IS NOT NULL AND (b.status <> 'C' OR b.status IS NULL) GROUP BY a.ref_jbooks_id ) e ON e.jbooks_id = a.jbooks_id LEFT JOIN erp_accounting_ngg.trans_jbooks_ap f ON f.jbooks_id = a.jbooks_id LEFT JOIN erp_fs_ngg.lib_erp_terms g ON g.terms_id = f.terms_id LEFT JOIN erp_fs_ngg.lib_erp_currency h ON h.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no i ON i.project_unit_no_id = a.project_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no j ON j.book_unit_no_id = a.book_unit_no_id WHERE c.validation = 3 AND a.trans_id = 30 AND a.account_id = 190  AND a.project_id = '9' AND a.department_id = '8'
[18:23:31] - SELECT a.currency_code,a.currency_name FROM lib_erp_currency a WHERE a.currency_id = 1
[18:23:44] - SELECT * FROM lib_erp_chart WHERE account_id = '190'
[18:23:44] - SELECT trans_id FROM trans_header WHERE currency_id = 1 AND book_id = 11 AND trans_date = '2017-12-31' AND journal_id = 8
[18:23:44] - SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,a.debit,a.credit,a.debit_based,a.credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation <> 3 AND b.validation <> 2 UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 3 GROUP BY a.account_id,a.project_id,a.department_id UNION SELECT z.project_unit_no_names,IFNULL(a.book_unit_no_id,a.project_unit_no_id) AS book_unit_no_id,a.jbooks_id,a.trans_id,a.project_id,a.department_id,a.allocation_id,a.account_id,a.currency_id,a.exchange_rate,a.based_rate,SUM(a.debit) AS debit,SUM(a.credit) AS credit,SUM(a.debit_based) AS debit_based,SUM(a.credit_based) AS credit_based,a.general_id,a.ref_jbooks_id,a.line_remarks,b.account_name,b.account_code,b.validation,c.project_code,c.project_name,d.department_code,d.department_name ,e.currency_name,e.currency_code ,IFNULL(f.book_unit_no_name,z.project_unit_no_names) AS book_unit_no_name,IFNULL(f.book_unit_no_code,z.project_unit_no_codes) AS book_unit_no_code FROM trans_jbooks a LEFT JOIN erp_fs_ngg.lib_erp_chart b ON b.account_id = a.account_id LEFT JOIN erp_fs_ngg.lib_erp_project c ON c.project_id = a.project_id LEFT JOIN erp_fs_ngg.lib_erp_department d ON d.department_id = a.department_id LEFT JOIN erp_fs_ngg.lib_erp_currency e ON e.currency_id = a.currency_id LEFT JOIN erp_fs_ngg.lib_erp_book_unit_no f ON f.book_unit_no_id = a.book_unit_no_id LEFT JOIN erp_fs_ngg.lib_erp_project_unit_no z ON z.project_unit_no_id = a.project_unit_no_id WHERE a.trans_id = 30 AND b.validation = 2 GROUP BY a.account_id,a.project_id,a.department_id ORDER BY account_code ASC 
[18:23:44] - SELECT * FROM lib_erp_chart WHERE account_id = '3'
[18:23:44] - SELECT * FROM lib_erp_currency_rate WHERE currency_id = 1 AND effectivitydate <= '2017-12-31' ORDER BY effectivitydate DESC LIMIT 1
[18:25:06] - SELECT a.*,ELT(a.general_type,'Supplier','Client','Both') AS general_type_name,b.category_name,c.terms_name,d.industry_name FROM lib_erp_general a LEFT JOIN lib_erp_category b ON b.category_id = a.category_id LEFT JOIN lib_erp_terms c ON c.terms_id = a.terms_id LEFT JOIN lib_erp_industry d ON d.industry_id = a.industry_id ORDER BY a.general_code,a.general_name ASC 
[18:25:07] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '2'
[18:25:07] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 2
[18:25:07] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '2'
[18:25:07] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 2
[18:25:07] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '2'
[18:25:07] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 2
[18:25:07] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '2'
[18:25:07] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 2
[18:25:07] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '2109'
[18:25:08] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 2109
[18:25:12] - SELECT COUNT(trans_id) AS existing FROM erp_accounting_ngg.trans_header WHERE general_id = 2109
[18:25:12] - CALL SaveTransaction('Remove','lib_erp_general','','2109|','general_id','2109|','DESKTOP-PL80BO2','Raymond T. Villegas','1984');
[18:25:12] - SELECT a.*,ELT(a.general_type,'Supplier','Client','Both') AS general_type_name,b.category_name,c.terms_name,d.industry_name FROM lib_erp_general a LEFT JOIN lib_erp_category b ON b.category_id = a.category_id LEFT JOIN lib_erp_terms c ON c.terms_id = a.terms_id LEFT JOIN lib_erp_industry d ON d.industry_id = a.industry_id ORDER BY a.general_code,a.general_name ASC 
[18:25:12] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '2109'
[18:25:12] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 2109
[18:25:12] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '2'
[18:25:13] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 2
[18:25:13] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '2'
[18:25:13] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 2
[18:25:13] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '2'
[18:25:13] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 2
[18:25:13] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '2'
[18:25:13] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 2
[18:25:18] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '2106'
[18:25:18] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 2106
[18:25:25] - SELECT COUNT(trans_id) AS existing FROM erp_accounting_ngg.trans_header WHERE general_id = 2106
[18:25:25] - CALL SaveTransaction('Remove','lib_erp_general','','2106|','general_id','2106|','DESKTOP-PL80BO2','Raymond T. Villegas','1984');
[18:25:25] - SELECT a.*,ELT(a.general_type,'Supplier','Client','Both') AS general_type_name,b.category_name,c.terms_name,d.industry_name FROM lib_erp_general a LEFT JOIN lib_erp_category b ON b.category_id = a.category_id LEFT JOIN lib_erp_terms c ON c.terms_id = a.terms_id LEFT JOIN lib_erp_industry d ON d.industry_id = a.industry_id ORDER BY a.general_code,a.general_name ASC 
[18:25:25] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '2106'
[18:25:25] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 2106
[18:25:25] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '2'
[18:25:25] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 2
[18:25:25] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '2'
[18:25:25] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 2
[18:25:25] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '2'
[18:25:25] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 2
[18:25:26] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '2'
[18:25:26] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 2
[18:25:41] - ExecuteWithParameter : acc_get_pending_ap
[18:25:41] - parameters : 'erp_fs_ngg',''
[18:25:41] - Execution Time: 2019-07-23 18:25:41
[18:25:41] - Done Time: 2019-07-23 18:25:41
[18:25:44] - SELECT a.*,ELT(a.general_type,'Supplier','Client','Both') AS general_type_name,b.category_name,c.terms_name,d.industry_name FROM lib_erp_general a LEFT JOIN lib_erp_category b ON b.category_id = a.category_id LEFT JOIN lib_erp_terms c ON c.terms_id = a.terms_id LEFT JOIN lib_erp_industry d ON d.industry_id = a.industry_id ORDER BY a.general_code,a.general_name ASC 
[18:25:45] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '2'
[18:25:45] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 2
[18:25:45] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '2'
[18:25:45] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 2
[18:25:45] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '2'
[18:25:45] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 2
[18:25:46] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '2'
[18:25:46] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 2
[18:25:46] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '2'
[18:25:47] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 2
[18:25:47] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '2'
[18:25:47] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 2
[18:25:47] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '92'
[18:25:47] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 92
[18:25:47] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '92'
[18:25:47] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 92
[18:25:47] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '432'
[18:25:47] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 432
[18:25:47] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '432'
[18:25:47] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 432
[18:25:47] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '762'
[18:25:48] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 762
[18:25:48] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '762'
[18:25:48] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 762
[18:25:48] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '762'
[18:25:48] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 762
[18:25:48] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '762'
[18:25:48] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 762
[18:25:48] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '762'
[18:25:48] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 762
[18:25:48] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '762'
[18:25:48] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 762
[18:25:48] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '762'
[18:25:48] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 762
[18:25:51] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '1956'
[18:25:51] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 1956
[18:25:53] - SELECT COUNT(trans_id) AS existing FROM erp_accounting_ngg.trans_header WHERE general_id = 1956
[18:25:53] - CALL SaveTransaction('Remove','lib_erp_general','','1956|','general_id','1956|','DESKTOP-PL80BO2','Raymond T. Villegas','1984');
[18:25:53] - SELECT a.*,ELT(a.general_type,'Supplier','Client','Both') AS general_type_name,b.category_name,c.terms_name,d.industry_name FROM lib_erp_general a LEFT JOIN lib_erp_category b ON b.category_id = a.category_id LEFT JOIN lib_erp_terms c ON c.terms_id = a.terms_id LEFT JOIN lib_erp_industry d ON d.industry_id = a.industry_id ORDER BY a.general_code,a.general_name ASC 
[18:25:54] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '1956'
[18:25:54] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 1956
[18:25:54] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '2'
[18:25:54] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 2
[18:25:54] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '1'
[18:25:54] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 1
[18:25:54] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '1'
[18:25:54] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 1
[18:25:54] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '2'
[18:25:54] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 2
[18:25:54] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '1'
[18:25:54] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 1
[18:25:55] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '1'
[18:25:55] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 1
[18:25:55] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '762'
[18:25:55] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 762
[18:25:55] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '1957'
[18:25:55] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 1957
[18:25:58] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '762'
[18:25:58] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 762
[18:26:00] - SELECT general_id FROM trans_header WHERE general_id = '762'
[18:26:01] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '762'
[18:26:02] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 762
[18:26:02] - SELECT b.ewt_id,b.ewt_code,b.ewt_name,b.tax_rate,a.general_ewt_id,a.general_id FROM lib_erp_general_ewt a LEFT JOIN lib_acc_ewt b ON b.ewt_id = a.ewt_id WHERE a.general_id = '762'
[18:26:02] - SELECT b.final_tax_id,b.final_tax_code,b.final_tax_name,b.final_tax_rate,a.general_final_tax_id,a.general_id FROM lib_erp_general_final_tax a LEFT JOIN lib_acc_final_tax b ON b.final_tax_id = a.final_tax_id WHERE a.general_id = 762
[18:26:04] - ----- Accounting Close -----
[18:28:06] - ----- Accounting Close -----